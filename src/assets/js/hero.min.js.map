{"version":3,"sources":["hero.js"],"names":["window","GIDA","sliders","slider_hero","id","opts","arguments","length","undefined","NS","CLS_SLIDES","CLS_PRE_DISPLAY","CLS_DISPLAY","CLS_START","CLS_VIEW","CLS_PAUSE","OFFSET_VIEW","root","document","getElementById","getElementsByClassName","effectType","timeDur","timeTran","randomTiming","slides","Array","prototype","slice","call","querySelectorAll","size","pics","effect","onTransitionEnd","hasVideo","resizeListeners","onResize","fn","doFirst","push","throttle","onLoad","readyState","addEventListener","setTimeout","initResizeEventHandler","l","passive","isRunning","run","requestAnimationFrame","asyncTimeout","ms","res","tid","set","Promise","r","async","clear","clearTimeout","initViewportDetection","cls","offset","IntersectionObserver","es","e","classList","isIntersecting","rootMargin","observe","visibilityState","getBoundingClientRect","h","innerHeight","top","bottom","add","remove","TransitionSlide","constructor","tranTime","this","_size","_sls","_time","i","style","transform","opacity","transition","idx","dir","TransitionScroll","_cur","_curPsd","_doing","_queue","ps","_calcPosition","cur","curPsd","_doTransition","shift","curIdx","curIdxPsd","d","idxPsd","_shift","_getTransition","Math","floor","curPs","time","tf","lenPsd","t","abs","hs","ceil","rs","j","TransitionFade","pointerEvents","CLS_PIC","CLS_DUAL","CLS_SCROLL","RANDOM_RATE","PictureImage","sl","p","createElement","contains","imgs","appendChild","dataset","img","_createImage","imgSrcset","imgSizes","imgSub","imgSubSrcset","imgSubSizes","src","srcset","sizes","getElement","isCur","preDisplay","display","getDuration","doRandom","dt","random","CLS_VIDEO","PictureVideo","vs","v","_initializeVideo","video","s","setAttribute","muted","playsinline","ar","clientWidth","clientHeight","play","pause","currentTime","duration","arFrame","tryResizeVideo","onResizeVideo","initImages","scroll","isVideo","insertBefore","firstChild","finish","console","log","stStep","last","stReserve","getIdxDir","performance","now","step","fs","move","next","prev"],"mappings":"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","file":"hero.min.js","sourcesContent":["/**\n * Gida Slider - Hero\n *\n * @author Takuto Yanagida\n * @version 2022-09-09\n */\n\n\nwindow.GIDA = window['GIDA'] ?? {};\n\nwindow.GIDA.sliders = window.GIDA['sliders'] ?? {};\n\nwindow.GIDA.slider_hero = function (id, opts = {}) {\n\tconst NS              = 'gida-slider-hero';\n\tconst CLS_SLIDES      = NS + '-slides';\n\tconst CLS_VISIBLE     = 'visible';\n\tconst CLS_PRE_DISPLAY = 'pre-display';\n\tconst CLS_DISPLAY     = 'display';\n\tconst CLS_START       = 'start';\n\tconst CLS_VIEW        = 'view';\n\tconst CLS_PAUSE       = 'pause';\n\tconst OFFSET_VIEW     = 100;\n\n\tconst root = id ? document.getElementById(id) : document.getElementsByClassName(NS)[0];\n\tif (!root) return;\n\n\tconst effectType   = opts['effect_type']     ?? 'slide';  // 'scroll' or 'fade'\n\tconst timeDur      = opts['duration_time']   ?? 8;  // [second]\n\tconst timeTran     = opts['transition_time'] ?? 1;  // [second]\n\tconst randomTiming = opts['random_timing']   ?? false;\n\n\tconst slides = Array.prototype.slice.call(root.querySelectorAll(`.${CLS_SLIDES} > li`));\n\tconst size   = slides.length;\n\tconst pics   = [];\n\tlet effect   = null;\n\n\tlet onTransitionEnd = null;\n\tlet hasVideo        = false;\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t/**\n\t * Common Functions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-08-01\n\t */\n\t\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tfunction onLoad(fn) {\n\t\tif ('loading' === document.readyState) {\n\t\t\tdocument.addEventListener('DOMContentLoaded', fn);\n\t\t} else {\n\t\t\tsetTimeout(fn, 0);\n\t\t}\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction initResizeEventHandler() {\n\t\twindow.addEventListener('resize', () => { for (const l of resizeListeners) l(); }, { passive: true });\n\t}\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\tfunction run() {\n\t\t\tisRunning = false;\n\t\t\tfn();\n\t\t}\n\t\treturn () => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(run);\n\t\t};\n\t}\n\t\n\tfunction asyncTimeout(ms, fn = () => { }) {\n\t\tlet tid = null;\n\t\tlet res;\n\t\treturn {\n\t\t\tset: () => new Promise((r) => {\n\t\t\t\tres = r\n\t\t\t\ttid = setTimeout(async () => {\n\t\t\t\t\ttid = null;\n\t\t\t\t\tawait fn();\n\t\t\t\t\tr();\n\t\t\t\t}, ms);\n\t\t\t}),\n\t\t\tclear: () => {\n\t\t\t\tif (tid) {\n\t\t\t\t\tclearTimeout(tid);\n\t\t\t\t\ttid = null;\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction initViewportDetection(root, cls, offset) {\n\t\tconst io = new IntersectionObserver((es) => {\n\t\t\tfor (const e of es) root.classList[e.isIntersecting ? 'add' : 'remove'](cls);\n\t\t}, { rootMargin: `${offset}px 0px` });\n\t\tio.observe(root);\n\t\n\t\tdocument.addEventListener('visibilitychange', () => {\n\t\t\tconst v = ('hidden' !== document.visibilityState);\n\t\t\tif (v) {\n\t\t\t\tconst r = root.getBoundingClientRect();\n\t\t\t\tconst h = window.innerHeight;\n\t\t\t\tif ((0 < r.top && r.top < h) || (0 < r.bottom && r.bottom < h)) {\n\t\t\t\t\troot.classList.add(cls);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\troot.classList.remove(cls);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/**\n\t * Slide Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t */\n\t\n\t\n\tclass TransitionSlide {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = 'translateX(' + (i ? 100 : 0) + '%)';\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\t\tthis._sls[i].style.transition = 'transform ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = (i <= idx) ? 'translateX(0%)' : 'translateX(100%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Scroll Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-09-09\n\t */\n\t\n\t\n\tclass TransitionScroll {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tthis._cur    = 0;\n\t\t\tthis._curPsd = 0;\n\t\t\tthis._doing  = false;\n\t\t\tthis._queue  = [];\n\t\n\t\t\tconst ps = this._calcPosition(0, 1);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity   = 1;\n\t\t\t\tthis._sls[i].style.transform = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tthis._queue.push((cur, curPsd) => this._doTransition(cur, curPsd, idx, dir));\n\t\t\tif (this._doing) return;\n\t\t\tthis._doing = true;\n\t\t\twhile (this._queue.length) {\n\t\t\t\t[this._cur, this._curPsd] = await this._queue.shift()(this._cur, this._curPsd);\n\t\t\t}\n\t\t\tthis._doing = false;\n\t\t}\n\t\n\t\tasync _doTransition(curIdx, curIdxPsd, idx, dir) {\n\t\t\tif (0 === dir && curIdx !== idx) {\n\t\t\t\tconst r = (curIdx < idx) ? idx - curIdx : idx + this._size - curIdx;\n\t\t\t\tconst l = (idx < curIdx) ? curIdx - idx : curIdx + this._size - idx;\n\t\t\t\tdir = (l < r) ? -1 : 1;\n\t\t\t}\n\t\t\tlet ps = this._calcPosition(curIdxPsd, dir);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.transition = '';\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t\tawait asyncTimeout(100).set();  // Wait\n\t\n\t\t\tlet d = 0;\n\t\t\tif (dir ===  1) d = idx - curIdx;\n\t\t\tif (dir === -1) d = curIdx - idx;\n\t\t\tif (d < 0) d += this._size;\n\t\n\t\t\tlet idxPsd = curIdxPsd;\n\t\t\tfor (let i = 0; i < d; i += 1) {\n\t\t\t\t[ps, idxPsd] = this._shift(ps, idxPsd, dir, this._time / d, this._getTransition(d, i));\n\t\t\t\tawait asyncTimeout(Math.floor(this._time * 1000 / d)).set();\n\t\t\t}\n\t\t\treturn [idx, idxPsd];\n\t\t}\n\t\n\t\t_getTransition(d, i) {\n\t\t\tif (d === 1) return 'ease';\n\t\t\tif (d === 2) {\n\t\t\t\tif (i === 0) return 'ease-in';\n\t\t\t\tif (i === 1) return 'ease-out';\n\t\t\t}\n\t\t\treturn 'linear';\n\t\t}\n\t\n\t\t_shift(curPs, curIdxPsd, dir, time, tf = 'ease') {\n\t\t\tconst lenPsd = this._sls.length;\n\t\n\t\t\tlet idxPsd = curIdxPsd + dir;\n\t\t\tif (lenPsd - 1 < idxPsd) idxPsd = 0;\n\t\t\tif (idxPsd < 0) idxPsd = lenPsd - 1;\n\t\n\t\t\tconst ps = this._calcPosition(idxPsd, dir);\n\t\n\t\t\tfor (let i = 0; i < lenPsd; i += 1) {\n\t\t\t\tconst t = (Math.abs(curPs[i] - ps[i]) === 1) ? `transform ${time}s ${tf}` : '';\n\t\t\t\tthis._sls[i].style.transition = t;\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t\treturn [ps, idxPsd];\n\t\t}\n\t\n\t\t_calcPosition(idxPsd, dir) {\n\t\t\tconst lenPsd = this._sls.length;\n\t\t\tconst ps     = new Array(lenPsd);\n\t\n\t\t\tconst hs = (dir !== -1) ? Math.ceil((lenPsd - 1) / 2) : Math.floor((lenPsd - 1) / 2);\n\t\t\tconst rs = lenPsd - 1 - hs;\n\t\n\t\t\tfor (let i = 1; i <= hs; i += 1) {\n\t\t\t\tlet j = idxPsd + i;\n\t\t\t\tif (lenPsd - 1 < j) j -= lenPsd;\n\t\t\t\tps[j] = i;\n\t\t\t}\n\t\t\tfor (let i = 1; i <= rs; i += 1) {\n\t\t\t\tlet j = idxPsd - i;\n\t\t\t\tif (j < 0) j += lenPsd;\n\t\t\t\tps[j] = -i;\n\t\t\t}\n\t\t\tps[idxPsd] = 0;\n\t\t\treturn ps;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Fade Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t */\n\t\n\t\n\tclass TransitionFade {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === 0) ? 1 : 0;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.transition = 'opacity ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === idx) ? 1 : 0;\n\t\t\t\tthis._sls[i].style.pointerEvents = (i === idx) ? 'auto' : 'none';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t}\n\t\n\t/**\n\t * Image Picture\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-09-09\n\t */\n\t\n\t\n\tconst CLS_PIC    = NS + '-picture';\n\tconst CLS_DUAL   = 'dual';\n\tconst CLS_SCROLL = 'scroll';\n\t\n\tconst RANDOM_RATE = 10;\n\t\n\tclass PictureImage {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_PIC);\n\t\t\tif (sl.classList.contains(CLS_SCROLL)) p.classList.add(CLS_SCROLL);\n\t\n\t\t\tconst imgs = sl.querySelectorAll(':scope > img, :scope > a > img');\n\t\t\tif (imgs.length) {\n\t\t\t\tp.appendChild(imgs[0]);\n\t\t\t\tif (1 < imgs.length) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(imgs[1]);\n\t\t\t\t}\n\t\t\t} else if (sl.dataset.img) {\n\t\t\t\tp.appendChild(this._createImage(sl.dataset.img, sl.dataset.imgSrcset ?? null, sl.dataset.imgSizes ?? null));\n\t\t\t\tif (sl.dataset.imgSub) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(this._createImage(sl.dataset.imgSub, sl.dataset.imgSubSrcset ?? null, sl.dataset.imgSubSizes ?? null));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_createImage(src, srcset, sizes) {\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.src = src;\n\t\t\tif (srcset) img.srcset = srcset;\n\t\t\tif (sizes)  img.sizes  = sizes;\n\t\t\treturn img;\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t}\n\t\n\t\tpreDisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_PRE_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_PRE_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\tif (!doRandom) return timeDur;\n\t\t\treturn dt * (1 + 0.01 * RANDOM_RATE * (1 - Math.random() * 2));\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Image Video\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-09-09\n\t */\n\t\n\t\n\tconst CLS_VIDEO = NS + '-video';\n\t\n\tclass PictureVideo {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_VIDEO);\n\t\n\t\t\tconst vs = sl.querySelectorAll(':scope > video, :scope > a > video');\n\t\t\tif (1 === vs.length) {\n\t\t\t\tconst v = vs[0];\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\t\t} else if (sl.dataset.video) {\n\t\t\t\tconst v = document.createElement('video');\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\n\t\t\t\tconst s = document.createElement('source');\n\t\t\t\ts.setAttribute('src', sl.dataset.video);\n\t\t\t\tv.appendChild(s);\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_initializeVideo(v) {\n\t\t\tv.muted = true;\n\t\t\tv.playsinline = true;\n\t\t\tv.setAttribute('muted', true);\n\t\t\tv.setAttribute('playsinline', true);\n\t\t\tv.addEventListener('loadedmetadata', () => {\n\t\t\t\tconst ar = v.clientWidth / v.clientHeight;\n\t\t\t\tthis.ar = (0 | (ar * 1000)) / 1000;\n\t\t\t});\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.v.setAttribute('autoplay', true);\n\t\t\t\tthis.v.play();\n\t\t\t\tif (size === 1) this.v.setAttribute('loop', true);\n\t\t\t}\n\t\t}\n\t\n\t\tpreDisplay(isCur) {\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (!isCur) {\n\t\t\t\tthis.v.pause();\n\t\t\t\tthis.v.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\treturn this.v.duration - timeTran;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif (!this.ar) return false;\n\t\t\tconst arFrame = this.p.clientWidth / this.p.clientHeight;\n\t\t\tif (this.ar < arFrame) {\n\t\t\t\tthis.v.classList.remove('height');\n\t\t\t\tthis.v.classList.add('width');\n\t\t\t} else {\n\t\t\t\tthis.v.classList.remove('width');\n\t\t\t\tthis.v.classList.add('height');\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\n\t}\n\t\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tinitImages();\n\n\tif (hasVideo) setTimeout(tryResizeVideo, 100);\n\tfunction tryResizeVideo() {\n\t\tconst finish = onResizeVideo();\n\t\tif (!finish) setTimeout(tryResizeVideo, 100);\n\t}\n\n\tonLoad(() => {\n\t\tinitResizeEventHandler();\n\n\t\tinitViewportDetection(root, CLS_VIEW, OFFSET_VIEW);\n\n\t\ttransition(0, 0);\n\t\tconsole.log(`Gida Slider - Hero (#${id}): started`);\n\t\tsetTimeout(() => root.classList.add(CLS_START), 0);\n\t});\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction initImages() {\n\t\tconst scroll = root.classList.contains(CLS_SCROLL);\n\t\tfor (const sl of slides) {\n\t\t\tif (scroll) sl.classList.add(CLS_SCROLL);\n\n\t\t\tsl.style.opacity = 0;  // for avoiding flickering slides on page loading\n\t\t\tlet p = null;\n\t\t\tif (isVideo(sl)) {\n\t\t\t\tp = new PictureVideo(sl);\n\t\t\t\thasVideo = true;\n\t\t\t} else {\n\t\t\t\tp = new PictureImage(sl);\n\t\t\t}\n\t\t\tsl.insertBefore(p.getElement(), sl.firstChild);\n\t\t\tpics.push(p);\n\t\t}\n\t\tif (hasVideo) onResize(onResizeVideo);\n\t\tswitch (effectType) {\n\t\t\tcase 'slide' : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t\tcase 'scroll': effect = new TransitionScroll(size, slides, timeTran); break;\n\t\t\tcase 'fade'  : effect = new TransitionFade(size, slides, timeTran); break;\n\t\t\tdefault      : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t}\n\t}\n\n\tfunction isVideo(sl) {\n\t\tif (sl.dataset.video) return true;\n\t\tconst vs = sl.querySelectorAll(':scope > video, :scope > a > video');\n\t\treturn 0 < vs.length;\n\t}\n\n\tfunction onResizeVideo() {\n\t\tlet finish = true;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst p = pics[i];\n\t\t\tif (p instanceof PictureVideo) {\n\t\t\t\tif (!p.onResize()) finish = false;\n\t\t\t}\n\t\t}\n\t\treturn finish;\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tlet curIdx    = 0;\n\tlet stStep    = null;\n\tlet last      = 0;\n\tlet stReserve = null;\n\n\tasync function transition(idx, dir) {\n\t\t[idx, dir] = getIdxDir(idx, dir);\n\n\t\tconst t = window.performance.now();\n\t\tif (dir !== 0 && t - last < timeTran * 1000) {\n\t\t\tclearTimeout(stReserve);\n\t\t\tstReserve = setTimeout(() => transition(idx, dir), timeTran * 1000 - (t - last));\n\t\t\treturn;\n\t\t}\n\t\tlast = t;\n\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].preDisplay((i % size) === idx);\n\t\t}\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].transition((i % size) === idx, size);\n\t\t}\n\t\tawait effect.transition(idx, dir);\n\t\tif (onTransitionEnd) onTransitionEnd();\n\t\tcurIdx = idx;\n\t\tdisplay(idx);\n\t}\n\n\tasync function display(idx) {\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].display((i % size) === idx);\n\t\t}\n\t\tif (size === 1) return;\n\n\t\tconst dt = pics[idx].getDuration(timeDur, timeTran, randomTiming);\n\t\tif (stStep) stStep.clear();\n\t\tstStep = asyncTimeout(Math.ceil(dt * 1000), step);\n\t\tawait stStep.set();\n\t}\n\n\tasync function step() {\n\t\tif (root.classList.contains(CLS_VIEW) && !root.classList.contains(CLS_PAUSE)) {\n\t\t\ttransition(null, 1);\n\t\t} else {\n\t\t\tasyncTimeout(timeDur * 1000, step).set();\n\t\t}\n\t}\n\n\tfunction getIdxDir(idx, dir) {\n\t\tif (idx === null) {\n\t\t\tidx = curIdx + dir;\n\t\t\tif (size - 1 < idx) idx = 0;\n\t\t\tif (idx < 0) idx = size - 1;\n\t\t} else if (dir === 0) {\n\t\t\tif (curIdx < idx) {\n\t\t\t\tdir = 1;\n\t\t\t\tif ((curIdx - (idx - size)) < (idx - curIdx)) dir = -1;\n\t\t\t}\n\t\t\tif (idx < curIdx) {\n\t\t\t\tdir = -1;\n\t\t\t\tif (((idx + size) - curIdx) < (curIdx - idx)) dir = 1;\n\t\t\t}\n\t\t}\n\t\treturn [idx, dir];\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tconst fs = {\n\t\tmove: idx => transition(idx, size === 2 ? 1 : 0),\n\t\tnext: ()  => transition((curIdx === size - 1) ? 0          : (curIdx + 1),  1),\n\t\tprev: ()  => transition((curIdx === 0       ) ? (size - 1) : (curIdx - 1), -1),\n\n\t\tonTransitionEnd: fn => { onTransitionEnd = fn; }\n\t};\n\twindow.GIDA.sliders[id] = fs;\n\treturn fs;\n\n}\n"]}