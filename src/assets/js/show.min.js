"use strict";window.GIDA=window.GIDA??{},window.GIDA.slider_show=function(t,s){const e="gida-slider-show",i=e+"-frame",n=e+"-slides",o="visible",l="display",a="view",c=t?document.getElementById(t):document.getElementsByClassName(e)[0];if(!c)return;void 0===s&&(s={});const r=s.effect_type??"slide",d=s.duration_time??8,u=s.transition_time??1,h=s.is_random_timing??!1;let f=s.is_background_visible??!0,m=s.is_side_slide_visible??!1;if("scroll"!==r&&(m=!1),m){f=!1;c.querySelector("."+n).style.overflow="visible"}const p=Array.prototype.slice.call(c.querySelectorAll(`.${n} > li`)),_=p.length,y=[];let g=null,v=null,w=!1;const L=[];function E(t,s=!1){s&&t(),L.push(function(t){let s;function e(){s=!1,t()}return()=>{s||(s=!0,requestAnimationFrame(e))}}(t))}function b(t,s=(()=>{})){let e,i=null;return{set:()=>new Promise((n=>{e=n,i=setTimeout((async()=>{i=null,await s(),n()}),t)})),clear:()=>{i&&(clearTimeout(i),i=null,e())}}}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of L)t()}),{passive:!0})}));const C=[];function I(t,s,e){const n=s.getElementsByClassName("gida-slider-show-prev")[0],o=s.getElementsByClassName("gida-slider-show-next")[0];if(1===t)return n&&(n.style.display="none"),void(o&&(o.style.display="none"));const l=async()=>{await e(null,-1)},a=async()=>{await e(null,1)};n&&n.addEventListener("click",(async()=>{n.disabled=!0,await l(),n.disabled=!1})),o&&o.addEventListener("click",(async()=>{o.disabled=!0,await a(),o.disabled=!1})),null===window.ontouchstart&&function(t,s,e){const n=50;let o,l,a;const c=t.getElementsByClassName(i)[0];c.addEventListener("touchstart",(t=>{o=t.touches[0].pageX,l=a=null})),c.addEventListener("touchmove",(t=>{l=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY})),c.addEventListener("touchend",(t=>{null!==l&&null!==a&&(l<o-n?(e(),!0===t.cancelable&&t.preventDefault()):o+n<l&&(s(),!0===t.cancelable&&t.preventDefault()))}))}(s,l,a)}const A=[];const P=[];let x=[],S=[];const z=[];function T(t,s){const e=t.querySelector(":scope > div");if(e){e.style.transitionDuration=s+"s",""===e.className&&(e.classList.add("gida-slider-show-caption"),e.classList.add("subtitle")),e.classList.contains("line")||e.classList.contains("circle")||e.classList.add("subtitle"),e.classList.contains("line")&&(e.dataset.caption="line"),e.classList.contains("circle")&&(e.dataset.caption="circle"),e.classList.contains("subtitle")&&(e.dataset.caption="subtitle");const t=e.querySelectorAll(":scope > div");for(const s of t)q(s);q(e);const i=e.querySelectorAll(":scope > span");if(0<i.length){const t=document.createElement("div");for(const s of i)t.appendChild(e.removeChild(s));e.appendChild(t)}}z.push(e)}function q(t){for(let s=0;s<t.childNodes.length;s+=1){const e=t.childNodes[s];if(3===e.nodeType){if(""===e.nodeValue.trim())continue;const t=document.createElement("span");t.appendChild(document.createTextNode(e.nodeValue)),e.parentNode.replaceChild(t,e)}}}function D(){if(window.innerWidth<600)for(const t of z)t&&(t.classList.remove(t.dataset.caption),t.classList.add("subtitle"));else for(const t of z)t&&(t.classList.remove("subtitle"),t.classList.add(t.dataset.caption))}class N{constructor(t,s,e){this._size=t,this._sls=s,this._time=e;for(let t=0;t<this._size;t+=1)this._sls[t].style.transform="translateX("+(t?100:0)+"%)";setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transition="transform "+this._time+"s"}),10)}async transition(t,s){for(let s=0;s<this._size;s+=1)this._sls[s].style.transform=s<=t?"translateX(0%)":"translateX(100%)";await b(1e3*this._time).set()}}class M{constructor(t,s,e){this._size=t,this._sls=s,this._time=e,this._curIdx=0,this._curIdxPsd=0,this._curPos=this._calcPosition(0,1);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transform=`translateX(${100*this._curPos[t]}%)`}async transition(t,s){this._curPos=this._calcPosition(this._curIdxPsd,s);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.transition="",this._sls[t].style.transform="translateX("+100*this._curPos[t]+"%)";await b(10).set();let e=0;1===s&&(e=t-this._curIdx),-1===s&&(e=this._curIdx-t),e<0&&(e+=this._size);for(let t=0;t<e;t+=1){const i=1===e?"ease":0===t?"ease-in":t===e-1?"ease-out":"linear";this._curPos=this.shift(this._curPos,s,this._time/e,i),await b(Math.floor(1e3*this._time/e)).set()}this._curIdx=t}shift(t,s,e,i="ease"){this._curIdxPsd+=s,this._sls.length-1<this._curIdxPsd&&(this._curIdxPsd=0),this._curIdxPsd<0&&(this._curIdxPsd=this._sls.length-1);const n=this._calcPosition(this._curIdxPsd,s);for(let s=0;s<this._sls.length;s+=1){const o=1===Math.abs(t[s]-n[s])?`transform ${e}s ${i}`:"";this._sls[s].style.transition=o,this._sls[s].style.transform=`translateX(${100*n[s]}%)`}return n}_calcPosition(t,s){const e=this._sls.length,i=new Array(e);i[t]=0;const n=-1!==s?Math.ceil((e-1)/2):Math.floor((e-1)/2),o=e-1-n;for(let s=1;s<=n;s+=1){let n=t+s;e-1<n&&(n-=e),i[n]=s}for(let s=1;s<=o;s+=1){let n=t-s;n<0&&(n+=e),i[n]=-s}return i}}class B{constructor(t,s,e){this._size=t,this._sls=s,this._time=e;for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=0===t?1:0;setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.transition="opacity "+this._time+"s"}),10)}async transition(t,s){for(let s=0;s<this._size;s+=1)this._sls[s].style.opacity=s===t?1:0,this._sls[s].style.pointerEvents=s===t?"auto":"none";await b(1e3*this._time).set()}}const k="dual",X="scroll";class ${constructor(t){const s=document.createElement("div");s.classList.add("gida-slider-show-picture"),t.classList.contains(X)&&s.classList.add(X);const e=t.querySelectorAll(":scope > img");e.length?(s.appendChild(e[0]),1<e.length&&(s.classList.add(k),s.appendChild(e[1]))):t.dataset.img&&(s.appendChild(this._createImage(t.dataset.img,t.dataset.imgSrcset??null)),t.dataset.imgSub&&(s.classList.add(k),s.appendChild(this._createImage(t.dataset.imgSub,t.dataset.imgSubSrcset??null)))),this.p=s}_createImage(t,s){const e=document.createElement("img");return e.src=t,s&&(e.srcset=s),e}getElement(){return this.p}transition(t,s){}display(t){t?this.p.classList.add(l):this.p.classList.remove(l)}getDuration(t,s,e){return e?dt*(1+.1*(1-2*Math.random())):t}}class H{constructor(t){const s=document.createElement("div");s.classList.add("gida-slider-show-video");const e=t.querySelectorAll(":scope > video");if(1===e.length){const t=e[0];this._initializeVideo(t),this.v=s.appendChild(t)}else if(t.dataset.video){const e=document.createElement("video");this._initializeVideo(e),this.v=s.appendChild(e);const i=document.createElement("source");i.setAttribute("src",t.dataset.video),e.appendChild(i)}this.p=s}_initializeVideo(t){t.muted=!0,t.playsinline=!0,t.setAttribute("muted",!0),t.setAttribute("playsinline",!0),t.addEventListener("loadedmetadata",(()=>{const s=t.clientWidth/t.clientHeight;this.ar=(0|1e3*s)/1e3}))}getElement(){return this.p}transition(t,s){t&&(this.v.setAttribute("autoplay",!0),this.v.play(),1===s&&this.v.setAttribute("loop",!0))}display(t){t||(this.v.pause(),this.v.currentTime=0)}getDuration(t,s,e){return this.v.duration-s}onResize(){if(!this.ar)return!1;const t=this.p.clientWidth/this.p.clientHeight;return this.ar<t?(this.v.classList.remove("height"),this.v.classList.add("width")):(this.v.classList.remove("width"),this.v.classList.add("height")),!0}}function V(t){if(t.dataset.video)return!0;return 0<t.querySelectorAll(":scope > video").length}function G(){let t=!0;for(let s=0;s<_;s+=1){const e=y[s];e instanceof H&&(e.onResize()||(t=!1))}return t}!function(){"scroll"===r&&1<_&&_<5&&function(){for(let t=0;t<_;t+=1){const s=p[t],e=s.cloneNode(!0);p.push(e),s.parentNode.appendChild(e)}}();const t=c.classList.contains(X);for(const s of p){t&&s.classList.add(X),s.style.opacity=0,T(s,u);let e=null;V(s)?(e=new H(s),w=!0):e=new $(s),s.insertBefore(e.getElement(),s.firstChild);const i=s.querySelector("a")??s;i.insertBefore(e.getElement(),i.firstChild),y.push(e)}w&&E(G);switch(E(D,!0),r){case"slide":g=new N(_,p,u);break;case"scroll":g=new M(_,p,u);break;case"fade":g=new B(_,p,u);break;default:g=new N(_,p,u)}}(),f&&function(t,s,e,i){const n=document.createElement("div");n.classList.add("gida-slider-show-backgrounds"),s.insertBefore(n,s.firstChild);for(let s=0;s<t;s+=1){const t=e[s],o=document.createElement("div"),l=t.dataset.img??t.dataset.imgLeft;l&&(o.style.backgroundImage=`url('${l}')`,o.style.transitionDuration=2*i+"s"),n.appendChild(o),C.push(o)}}(_,c,p,u),document.addEventListener("DOMContentLoaded",(()=>{I(_,c,F),function(s){if(1!==s)for(let e=0;e<s;e+=1){const s=t+"-"+e;let i=document.querySelector('*[data-id="'+s+'"]');i||(i=document.getElementById(s)),P.push(i)}}(_),function(t,s){x=s.querySelectorAll(".gida-slider-show-slide-count"),S=s.querySelectorAll(".gida-slider-show-slide-index");for(const s of x)s.innerHTML=t;for(const t of S)t.innerHTML=1}(_,c),function(s,e,i){if(1===s)return;const n=e.getElementsByClassName("gida-slider-show-rivets")[0];if(!n)return;const o=2===s?1:0;for(let e=0;e<s;e+=1){const s=e,l=document.createElement("span");l.id=t+"-rivet-"+s,l.className="gida-slider-show-rivet",l.addEventListener("click",(()=>{i(s,o)})),n.appendChild(l),A.push(l)}}(_,c,F);new IntersectionObserver((t=>{for(const s of t)c.classList[s.isIntersecting?"add":"remove"](a)}),{rootMargin:"100px 0px"}).observe(c),F(0,0)})),w&&setTimeout((function t(){G()||setTimeout(t,100)}),100);let O=0,W=null,R=0;async function F(t,s){[t,s]=function(t,s){null===t?(_-1<(t=O+s)&&(t=0),t<0&&(t=_-1)):0===s&&(O<t&&(s=1,O-(t-_)<t-O&&(s=-1)),t<O&&(s=-1,t+_-O<O-t&&(s=1)));return[t,s]}(t,s);const e=window.performance.now();if(!(0!==s&&e-R<1e3*u)){R=e;for(let s=0;s<p.length;s+=1)y[s].transition(s%_===t,_);!function(t,s){for(let e=0;e<s;e+=1)C[e]&&C[e].classList[e===t?"add":"remove"](o)}(t,_),function(t){for(const t of P)t&&t.classList.remove(o);P[t]&&P[t].classList.add(o)}(t),function(t){for(const s of S)s.innerHTML=t+1}(t),function(t){for(const t of A)t.classList.remove(o);A[t]&&A[t].classList.add(o)}(t),await g.transition(t,s),v&&v(),O=t,async function(t){for(let s=0;s<p.length;s+=1)y[s].display(s%_===t);if(function(t,s){for(let e=0;e<z.length;e+=1)z[e]&&(e%s===t?z[e].classList.add(l):z[e].classList.remove(l))}(t,_),1===_)return;const s=y[t].getDuration(d,u,h);W&&W.clear();W=b(Math.ceil(1e3*s),Y),await W.set()}(t)}}async function Y(){c.classList.contains(a)&&!c.classList.contains("pause")?F(null,1):b(1e3*d,Y).set()}return{next:()=>{F(O===_-1?0:O+1,1)},previous:()=>{F(0===O?_-1:O-1,-1)},onTransitionEnd:t=>{v=t}}},window.GIDA.slider_show_page=function(t,s){const e=document.getElementById(t+"-rivet-"+s);e&&e.click()};
//# sourceMappingURL=show.min.js.map