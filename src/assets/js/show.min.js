"use strict";window.GIDA=window.GIDA??{},window.GIDA.slider_show=function(t,e={}){const s="gida-slider-show",i=s+"-slides",n="visible",o="display",a="view",l=t?document.getElementById(t):document.getElementsByClassName(s)[0];if(!l)return;const c=e.effect_type??"slide",r=e.duration_time??8,d=e.transition_time??1,u=e.is_random_timing??!1;let h=e.is_background_visible??!0,f=e.is_side_slide_visible??!1;if("scroll"!==c&&(f=!1),f){h=!1;l.querySelector("."+i).style.overflow="visible"}const m=Array.prototype.slice.call(l.querySelectorAll(`.${i} > li`)),p=m.length,_=[];let g=null,y=null,v=!1;const w=[];function L(t,e=!1){e&&t(),w.push(function(t){let e;function s(){e=!1,t()}return()=>{e||(e=!0,requestAnimationFrame(s))}}(t))}function E(t,e=(()=>{})){let s,i=null;return{set:()=>new Promise((n=>{s=n,i=setTimeout((async()=>{i=null,await e(),n()}),t)})),clear:()=>{i&&(clearTimeout(i),i=null,s())}}}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of w)t()}),{passive:!0})}));const b=[];const C=[];const I=[];let A=[],z=[];const P=[];function S(t,e){const s=t.querySelector(":scope > div, :scope > a > div");if(s){s.style.transitionDuration=e+"s",""===s.className&&(s.classList.add("gida-slider-show-caption"),s.classList.add("subtitle")),s.classList.contains("line")||s.classList.contains("circle")||s.classList.add("subtitle"),s.classList.contains("line")&&(s.dataset.caption="line"),s.classList.contains("circle")&&(s.dataset.caption="circle"),s.classList.contains("subtitle")&&(s.dataset.caption="subtitle");const t=s.querySelectorAll(":scope > div");for(const e of t)x(e);x(s),function(t){let e=[];const s=Array.from(t.childNodes);for(let i of s)if(1===i.nodeType)if("DIV"===i.tagName){if(e.length){const s=document.createElement("div");for(const i of e)s.appendChild(t.removeChild(i));t.insertBefore(s,i),e.length=0}}else e.push(i);if(e.length){const s=document.createElement("div");for(const i of e)s.appendChild(t.removeChild(i));t.appendChild(s)}}(s)}P.push(s)}function x(t){for(let e=0;e<t.childNodes.length;e+=1){const s=t.childNodes[e];if(3===s.nodeType){const t=s.nodeValue.trim();if(""===t)continue;const e=document.createElement("span");e.appendChild(document.createTextNode(t)),s.parentNode.replaceChild(e,s)}}}function T(){if(window.innerWidth<600)for(const t of P)t&&(t.classList.remove(t.dataset.caption),t.classList.add("subtitle"));else for(const t of P)t&&(t.classList.remove("subtitle"),t.classList.add(t.dataset.caption))}class N{constructor(t,e,s){this._size=t,this._sls=e,this._time=s;for(let t=0;t<this._size;t+=1)this._sls[t].style.transform="translateX("+(t?100:0)+"%)";setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transition="transform "+this._time+"s"}),10)}async transition(t,e){for(let e=0;e<this._size;e+=1)this._sls[e].style.transform=e<=t?"translateX(0%)":"translateX(100%)";await E(1e3*this._time).set()}}class D{constructor(t,e,s){this._size=t,this._sls=e,this._time=s,this._curIdx=0,this._curIdxPsd=0,this._curPos=this._calcPosition(0,1);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transform=`translateX(${100*this._curPos[t]}%)`}async transition(t,e){this._curPos=this._calcPosition(this._curIdxPsd,e);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.transition="",this._sls[t].style.transform="translateX("+100*this._curPos[t]+"%)";await E(10).set();let s=0;1===e&&(s=t-this._curIdx),-1===e&&(s=this._curIdx-t),s<0&&(s+=this._size);for(let t=0;t<s;t+=1){const i=1===s?"ease":0===t?"ease-in":t===s-1?"ease-out":"linear";this._curPos=this.shift(this._curPos,e,this._time/s,i),await E(Math.floor(1e3*this._time/s)).set()}this._curIdx=t}shift(t,e,s,i="ease"){this._curIdxPsd+=e,this._sls.length-1<this._curIdxPsd&&(this._curIdxPsd=0),this._curIdxPsd<0&&(this._curIdxPsd=this._sls.length-1);const n=this._calcPosition(this._curIdxPsd,e);for(let e=0;e<this._sls.length;e+=1){const o=1===Math.abs(t[e]-n[e])?`transform ${s}s ${i}`:"";this._sls[e].style.transition=o,this._sls[e].style.transform=`translateX(${100*n[e]}%)`}return n}_calcPosition(t,e){const s=this._sls.length,i=new Array(s);i[t]=0;const n=-1!==e?Math.ceil((s-1)/2):Math.floor((s-1)/2),o=s-1-n;for(let e=1;e<=n;e+=1){let n=t+e;s-1<n&&(n-=s),i[n]=e}for(let e=1;e<=o;e+=1){let n=t-e;n<0&&(n+=s),i[n]=-e}return i}}class q{constructor(t,e,s){this._size=t,this._sls=e,this._time=s;for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=0===t?1:0;setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.transition="opacity "+this._time+"s"}),10)}async transition(t,e){for(let e=0;e<this._size;e+=1)this._sls[e].style.opacity=e===t?1:0,this._sls[e].style.pointerEvents=e===t?"auto":"none";await E(1e3*this._time).set()}}const B="dual",M="scroll";class k{constructor(t){const e=document.createElement("div");e.classList.add("gida-slider-show-picture"),t.classList.contains(M)&&e.classList.add(M);const s=t.querySelectorAll(":scope > img, :scope > a > img");s.length?(e.appendChild(s[0]),1<s.length&&(e.classList.add(B),e.appendChild(s[1]))):t.dataset.img&&(e.appendChild(this._createImage(t.dataset.img,t.dataset.imgSrcset??null,t.dataset.imgSizes??null)),t.dataset.imgSub&&(e.classList.add(B),e.appendChild(this._createImage(t.dataset.imgSub,t.dataset.imgSubSrcset??null,t.dataset.imgSubSizes??null)))),this.p=e}_createImage(t,e,s){const i=document.createElement("img");return i.src=t,e&&(i.srcset=e),s&&(i.sizes=s),i}getElement(){return this.p}transition(t,e){}display(t){t?this.p.classList.add(o):this.p.classList.remove(o)}getDuration(t,e,s){return s?dt*(1+.1*(1-2*Math.random())):t}}class X{constructor(t){const e=document.createElement("div");e.classList.add("gida-slider-show-video");const s=t.querySelectorAll(":scope > video, :scope > a > video");if(1===s.length){const t=s[0];this._initializeVideo(t),this.v=e.appendChild(t)}else if(t.dataset.video){const s=document.createElement("video");this._initializeVideo(s),this.v=e.appendChild(s);const i=document.createElement("source");i.setAttribute("src",t.dataset.video),s.appendChild(i)}this.p=e}_initializeVideo(t){t.muted=!0,t.playsinline=!0,t.setAttribute("muted",!0),t.setAttribute("playsinline",!0),t.addEventListener("loadedmetadata",(()=>{const e=t.clientWidth/t.clientHeight;this.ar=(0|1e3*e)/1e3}))}getElement(){return this.p}transition(t,e){t&&(this.v.setAttribute("autoplay",!0),this.v.play(),1===e&&this.v.setAttribute("loop",!0))}display(t){t||(this.v.pause(),this.v.currentTime=0)}getDuration(t,e,s){return this.v.duration-e}onResize(){if(!this.ar)return!1;const t=this.p.clientWidth/this.p.clientHeight;return this.ar<t?(this.v.classList.remove("height"),this.v.classList.add("width")):(this.v.classList.remove("width"),this.v.classList.add("height")),!0}}function $(t){if(t.dataset.video)return!0;return 0<t.querySelectorAll(":scope > video, :scope > a > video").length}function H(){let t=!0;for(let e=0;e<p;e+=1){const s=_[e];s instanceof X&&(s.onResize()||(t=!1))}return t}!function(){"scroll"===c&&1<p&&p<5&&function(){for(let t=0;t<p;t+=1){const e=m[t],s=e.cloneNode(!0);m.push(s),e.parentNode.appendChild(s)}}();const t=l.classList.contains(M);for(const e of m){t&&e.classList.add(M),e.style.opacity=0,S(e,d);let s=null;$(e)?(s=new X(e),v=!0):s=new k(e),e.insertBefore(s.getElement(),e.firstChild);const i=e.querySelector("a")??e;i.insertBefore(s.getElement(),i.firstChild),_.push(s)}v&&L(H);switch(L(T,!0),c){case"slide":g=new N(p,m,d);break;case"scroll":g=new D(p,m,d);break;case"fade":g=new q(p,m,d);break;default:g=new N(p,m,d)}}(),h&&function(t,e,s,i){const n=document.createElement("div");n.classList.add("gida-slider-show-backgrounds"),e.insertBefore(n,e.firstChild);for(let e=0;e<t;e+=1){const t=s[e],o=document.createElement("div"),a=t.dataset.img??t.dataset.imgLeft;a&&(o.style.backgroundImage=`url('${a}')`,o.style.transitionDuration=2*i+"s"),n.appendChild(o),b.push(o)}}(p,l,m,d),document.addEventListener("DOMContentLoaded",(()=>{!function(t,e,s){const i=e.getElementsByClassName("gida-slider-show-frame")[0],n=e.getElementsByClassName("gida-slider-show-prev")[0],o=e.getElementsByClassName("gida-slider-show-next")[0];if(1===t)return n&&(n.style.display="none"),void(o&&(o.style.display="none"));const a=async()=>{await s(null,-1)},l=async()=>{await s(null,1)};n&&n.addEventListener("click",(async()=>{i.dataset.disabled=!0,await a(),i.dataset.disabled=!1})),o&&o.addEventListener("click",(async()=>{i.dataset.disabled=!0,await l(),i.dataset.disabled=!1})),null===window.ontouchstart&&function(t,e,s){const i=50;let n,o,a;t.addEventListener("touchstart",(t=>{n=t.touches[0].pageX,o=a=null})),t.addEventListener("touchmove",(t=>{o=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY})),t.addEventListener("touchend",(t=>{null!==o&&null!==a&&(o<n-i?(s(),!0===t.cancelable&&t.preventDefault()):n+i<o&&(e(),!0===t.cancelable&&t.preventDefault()))}))}(i,a,l)}(p,l,W),function(e){if(1!==e)for(let s=0;s<e;s+=1){const e=t+"-"+s;let i=document.querySelector('*[data-id="'+e+'"]');i||(i=document.getElementById(e)),I.push(i)}}(p),function(t,e){A=e.querySelectorAll(".gida-slider-show-slide-count"),z=e.querySelectorAll(".gida-slider-show-slide-index");for(const e of A)e.innerHTML=t;for(const t of z)t.innerHTML=1}(p,l),function(e,s,i){if(1===e)return;const n=s.getElementsByClassName("gida-slider-show-rivets")[0];if(!n)return;const o=2===e?1:0;for(let s=0;s<e;s+=1){const e=s,a=document.createElement("span");a.id=t+"-rivet-"+e,a.className="gida-slider-show-rivet",a.addEventListener("click",(()=>{i(e,o)})),n.appendChild(a),C.push(a)}}(p,l,W);new IntersectionObserver((t=>{for(const e of t)l.classList[e.isIntersecting?"add":"remove"](a)}),{rootMargin:"100px 0px"}).observe(l),W(0,0)})),v&&setTimeout((function t(){H()||setTimeout(t,100)}),100);let V=0,G=null,O=0;async function W(t,e){[t,e]=function(t,e){null===t?(p-1<(t=V+e)&&(t=0),t<0&&(t=p-1)):0===e&&(V<t&&(e=1,V-(t-p)<t-V&&(e=-1)),t<V&&(e=-1,t+p-V<V-t&&(e=1)));return[t,e]}(t,e);const s=window.performance.now();if(!(0!==e&&s-O<1e3*d)){O=s;for(let e=0;e<m.length;e+=1)_[e].transition(e%p===t,p);!function(t,e){for(let s=0;s<e;s+=1)b[s]&&b[s].classList[s===t?"add":"remove"](n)}(t,p),function(t){for(const t of I)t&&t.classList.remove(n);I[t]&&I[t].classList.add(n)}(t),function(t){for(const e of z)e.innerHTML=t+1}(t),function(t){for(const t of C)t.classList.remove(n);C[t]&&C[t].classList.add(n)}(t),await g.transition(t,e),y&&y(),V=t,async function(t){for(let e=0;e<m.length;e+=1)_[e].display(e%p===t);if(function(t,e){for(let s=0;s<P.length;s+=1)P[s]&&(s%e===t?P[s].classList.add(o):P[s].classList.remove(o))}(t,p),1===p)return;const e=_[t].getDuration(r,d,u);G&&G.clear();G=E(Math.ceil(1e3*e),R),await G.set()}(t)}}async function R(){l.classList.contains(a)&&!l.classList.contains("pause")?W(null,1):E(1e3*r,R).set()}return{next:()=>{W(V===p-1?0:V+1,1)},previous:()=>{W(0===V?p-1:V-1,-1)},onTransitionEnd:t=>{y=t}}},window.GIDA.slider_show_page=function(t,e){const s=document.getElementById(t+"-rivet-"+e);s&&s.click()};
//# sourceMappingURL=show.min.js.map