"use strict";window.GIDA=window.GIDA??{},window.GIDA.slider_show=function(t,e={}){const s="gida-slider-show",i=s+"-frame",n=s+"-slides",o="visible",l="display",a="view",c=t?document.getElementById(t):document.getElementsByClassName(s)[0];if(!c)return;const r=e.effect_type??"slide",d=e.duration_time??8,u=e.transition_time??1,h=e.is_random_timing??!1;let f=e.is_background_visible??!0,m=e.is_side_slide_visible??!1;if("scroll"!==r&&(m=!1),m){f=!1;c.querySelector("."+n).style.overflow="visible"}const p=Array.prototype.slice.call(c.querySelectorAll(`.${n} > li`)),_=p.length,g=[];let y=null,v=null,w=!1;const L=[];function E(t,e=!1){e&&t(),L.push(function(t){let e;function s(){e=!1,t()}return()=>{e||(e=!0,requestAnimationFrame(s))}}(t))}function b(t,e=(()=>{})){let s,i=null;return{set:()=>new Promise((n=>{s=n,i=setTimeout((async()=>{i=null,await e(),n()}),t)})),clear:()=>{i&&(clearTimeout(i),i=null,s())}}}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of L)t()}),{passive:!0})}));const C=[];function I(t,e,s){const n=e.getElementsByClassName("gida-slider-show-prev")[0],o=e.getElementsByClassName("gida-slider-show-next")[0];if(1===t)return n&&(n.style.display="none"),void(o&&(o.style.display="none"));const l=async()=>{await s(null,-1)},a=async()=>{await s(null,1)};n&&n.addEventListener("click",(async()=>{n.disabled=!0,await l(),n.disabled=!1})),o&&o.addEventListener("click",(async()=>{o.disabled=!0,await a(),o.disabled=!1})),null===window.ontouchstart&&function(t,e,s){const n=50;let o,l,a;const c=t.getElementsByClassName(i)[0];c.addEventListener("touchstart",(t=>{o=t.touches[0].pageX,l=a=null})),c.addEventListener("touchmove",(t=>{l=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY})),c.addEventListener("touchend",(t=>{null!==l&&null!==a&&(l<o-n?(s(),!0===t.cancelable&&t.preventDefault()):o+n<l&&(e(),!0===t.cancelable&&t.preventDefault()))}))}(e,l,a)}const A=[];const z=[];let P=[],S=[];const x=[];function T(t,e){const s=t.querySelector(":scope > div, :scope > a > div");if(s){s.style.transitionDuration=e+"s",""===s.className&&(s.classList.add("gida-slider-show-caption"),s.classList.add("subtitle")),s.classList.contains("line")||s.classList.contains("circle")||s.classList.add("subtitle"),s.classList.contains("line")&&(s.dataset.caption="line"),s.classList.contains("circle")&&(s.dataset.caption="circle"),s.classList.contains("subtitle")&&(s.dataset.caption="subtitle");const t=s.querySelectorAll(":scope > div");for(const e of t)N(e);N(s),function(t){let e=[];const s=Array.from(t.childNodes);for(let i of s)if(1===i.nodeType)if("DIV"===i.tagName){if(e.length){const s=document.createElement("div");for(const i of e)s.appendChild(t.removeChild(i));t.insertBefore(s,i),e.length=0}}else e.push(i);if(e.length){const s=document.createElement("div");for(const i of e)s.appendChild(t.removeChild(i));t.appendChild(s)}}(s)}x.push(s)}function N(t){for(let e=0;e<t.childNodes.length;e+=1){const s=t.childNodes[e];if(3===s.nodeType){const t=s.nodeValue.trim();if(""===t)continue;const e=document.createElement("span");e.appendChild(document.createTextNode(t)),s.parentNode.replaceChild(e,s)}}}function D(){if(window.innerWidth<600)for(const t of x)t&&(t.classList.remove(t.dataset.caption),t.classList.add("subtitle"));else for(const t of x)t&&(t.classList.remove("subtitle"),t.classList.add(t.dataset.caption))}class q{constructor(t,e,s){this._size=t,this._sls=e,this._time=s;for(let t=0;t<this._size;t+=1)this._sls[t].style.transform="translateX("+(t?100:0)+"%)";setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transition="transform "+this._time+"s"}),10)}async transition(t,e){for(let e=0;e<this._size;e+=1)this._sls[e].style.transform=e<=t?"translateX(0%)":"translateX(100%)";await b(1e3*this._time).set()}}class B{constructor(t,e,s){this._size=t,this._sls=e,this._time=s,this._curIdx=0,this._curIdxPsd=0,this._curPos=this._calcPosition(0,1);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transform=`translateX(${100*this._curPos[t]}%)`}async transition(t,e){this._curPos=this._calcPosition(this._curIdxPsd,e);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.transition="",this._sls[t].style.transform="translateX("+100*this._curPos[t]+"%)";await b(10).set();let s=0;1===e&&(s=t-this._curIdx),-1===e&&(s=this._curIdx-t),s<0&&(s+=this._size);for(let t=0;t<s;t+=1){const i=1===s?"ease":0===t?"ease-in":t===s-1?"ease-out":"linear";this._curPos=this.shift(this._curPos,e,this._time/s,i),await b(Math.floor(1e3*this._time/s)).set()}this._curIdx=t}shift(t,e,s,i="ease"){this._curIdxPsd+=e,this._sls.length-1<this._curIdxPsd&&(this._curIdxPsd=0),this._curIdxPsd<0&&(this._curIdxPsd=this._sls.length-1);const n=this._calcPosition(this._curIdxPsd,e);for(let e=0;e<this._sls.length;e+=1){const o=1===Math.abs(t[e]-n[e])?`transform ${s}s ${i}`:"";this._sls[e].style.transition=o,this._sls[e].style.transform=`translateX(${100*n[e]}%)`}return n}_calcPosition(t,e){const s=this._sls.length,i=new Array(s);i[t]=0;const n=-1!==e?Math.ceil((s-1)/2):Math.floor((s-1)/2),o=s-1-n;for(let e=1;e<=n;e+=1){let n=t+e;s-1<n&&(n-=s),i[n]=e}for(let e=1;e<=o;e+=1){let n=t-e;n<0&&(n+=s),i[n]=-e}return i}}class M{constructor(t,e,s){this._size=t,this._sls=e,this._time=s;for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=0===t?1:0;setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.transition="opacity "+this._time+"s"}),10)}async transition(t,e){for(let e=0;e<this._size;e+=1)this._sls[e].style.opacity=e===t?1:0,this._sls[e].style.pointerEvents=e===t?"auto":"none";await b(1e3*this._time).set()}}const k="dual",X="scroll";class ${constructor(t){const e=document.createElement("div");e.classList.add("gida-slider-show-picture"),t.classList.contains(X)&&e.classList.add(X);const s=t.querySelectorAll(":scope > img, :scope > a > img");s.length?(e.appendChild(s[0]),1<s.length&&(e.classList.add(k),e.appendChild(s[1]))):t.dataset.img&&(e.appendChild(this._createImage(t.dataset.img,t.dataset.imgSrcset??null,t.dataset.imgSizes??null)),t.dataset.imgSub&&(e.classList.add(k),e.appendChild(this._createImage(t.dataset.imgSub,t.dataset.imgSubSrcset??null,t.dataset.imgSubSizes??null)))),this.p=e}_createImage(t,e,s){const i=document.createElement("img");return i.src=t,e&&(i.srcset=e),s&&(i.sizes=s),i}getElement(){return this.p}transition(t,e){}display(t){t?this.p.classList.add(l):this.p.classList.remove(l)}getDuration(t,e,s){return s?dt*(1+.1*(1-2*Math.random())):t}}class H{constructor(t){const e=document.createElement("div");e.classList.add("gida-slider-show-video");const s=t.querySelectorAll(":scope > video, :scope > a > video");if(1===s.length){const t=s[0];this._initializeVideo(t),this.v=e.appendChild(t)}else if(t.dataset.video){const s=document.createElement("video");this._initializeVideo(s),this.v=e.appendChild(s);const i=document.createElement("source");i.setAttribute("src",t.dataset.video),s.appendChild(i)}this.p=e}_initializeVideo(t){t.muted=!0,t.playsinline=!0,t.setAttribute("muted",!0),t.setAttribute("playsinline",!0),t.addEventListener("loadedmetadata",(()=>{const e=t.clientWidth/t.clientHeight;this.ar=(0|1e3*e)/1e3}))}getElement(){return this.p}transition(t,e){t&&(this.v.setAttribute("autoplay",!0),this.v.play(),1===e&&this.v.setAttribute("loop",!0))}display(t){t||(this.v.pause(),this.v.currentTime=0)}getDuration(t,e,s){return this.v.duration-e}onResize(){if(!this.ar)return!1;const t=this.p.clientWidth/this.p.clientHeight;return this.ar<t?(this.v.classList.remove("height"),this.v.classList.add("width")):(this.v.classList.remove("width"),this.v.classList.add("height")),!0}}function V(t){if(t.dataset.video)return!0;return 0<t.querySelectorAll(":scope > video, :scope > a > video").length}function G(){let t=!0;for(let e=0;e<_;e+=1){const s=g[e];s instanceof H&&(s.onResize()||(t=!1))}return t}!function(){"scroll"===r&&1<_&&_<5&&function(){for(let t=0;t<_;t+=1){const e=p[t],s=e.cloneNode(!0);p.push(s),e.parentNode.appendChild(s)}}();const t=c.classList.contains(X);for(const e of p){t&&e.classList.add(X),e.style.opacity=0,T(e,u);let s=null;V(e)?(s=new H(e),w=!0):s=new $(e),e.insertBefore(s.getElement(),e.firstChild);const i=e.querySelector("a")??e;i.insertBefore(s.getElement(),i.firstChild),g.push(s)}w&&E(G);switch(E(D,!0),r){case"slide":y=new q(_,p,u);break;case"scroll":y=new B(_,p,u);break;case"fade":y=new M(_,p,u);break;default:y=new q(_,p,u)}}(),f&&function(t,e,s,i){const n=document.createElement("div");n.classList.add("gida-slider-show-backgrounds"),e.insertBefore(n,e.firstChild);for(let e=0;e<t;e+=1){const t=s[e],o=document.createElement("div"),l=t.dataset.img??t.dataset.imgLeft;l&&(o.style.backgroundImage=`url('${l}')`,o.style.transitionDuration=2*i+"s"),n.appendChild(o),C.push(o)}}(_,c,p,u),document.addEventListener("DOMContentLoaded",(()=>{I(_,c,F),function(e){if(1!==e)for(let s=0;s<e;s+=1){const e=t+"-"+s;let i=document.querySelector('*[data-id="'+e+'"]');i||(i=document.getElementById(e)),z.push(i)}}(_),function(t,e){P=e.querySelectorAll(".gida-slider-show-slide-count"),S=e.querySelectorAll(".gida-slider-show-slide-index");for(const e of P)e.innerHTML=t;for(const t of S)t.innerHTML=1}(_,c),function(e,s,i){if(1===e)return;const n=s.getElementsByClassName("gida-slider-show-rivets")[0];if(!n)return;const o=2===e?1:0;for(let s=0;s<e;s+=1){const e=s,l=document.createElement("span");l.id=t+"-rivet-"+e,l.className="gida-slider-show-rivet",l.addEventListener("click",(()=>{i(e,o)})),n.appendChild(l),A.push(l)}}(_,c,F);new IntersectionObserver((t=>{for(const e of t)c.classList[e.isIntersecting?"add":"remove"](a)}),{rootMargin:"100px 0px"}).observe(c),F(0,0)})),w&&setTimeout((function t(){G()||setTimeout(t,100)}),100);let O=0,W=null,R=0;async function F(t,e){[t,e]=function(t,e){null===t?(_-1<(t=O+e)&&(t=0),t<0&&(t=_-1)):0===e&&(O<t&&(e=1,O-(t-_)<t-O&&(e=-1)),t<O&&(e=-1,t+_-O<O-t&&(e=1)));return[t,e]}(t,e);const s=window.performance.now();if(!(0!==e&&s-R<1e3*u)){R=s;for(let e=0;e<p.length;e+=1)g[e].transition(e%_===t,_);!function(t,e){for(let s=0;s<e;s+=1)C[s]&&C[s].classList[s===t?"add":"remove"](o)}(t,_),function(t){for(const t of z)t&&t.classList.remove(o);z[t]&&z[t].classList.add(o)}(t),function(t){for(const e of S)e.innerHTML=t+1}(t),function(t){for(const t of A)t.classList.remove(o);A[t]&&A[t].classList.add(o)}(t),await y.transition(t,e),v&&v(),O=t,async function(t){for(let e=0;e<p.length;e+=1)g[e].display(e%_===t);if(function(t,e){for(let s=0;s<x.length;s+=1)x[s]&&(s%e===t?x[s].classList.add(l):x[s].classList.remove(l))}(t,_),1===_)return;const e=g[t].getDuration(d,u,h);W&&W.clear();W=b(Math.ceil(1e3*e),Y),await W.set()}(t)}}async function Y(){c.classList.contains(a)&&!c.classList.contains("pause")?F(null,1):b(1e3*d,Y).set()}return{next:()=>{F(O===_-1?0:O+1,1)},previous:()=>{F(0===O?_-1:O-1,-1)},onTransitionEnd:t=>{v=t}}},window.GIDA.slider_show_page=function(t,e){const s=document.getElementById(t+"-rivet-"+e);s&&s.click()};
//# sourceMappingURL=show.min.js.map