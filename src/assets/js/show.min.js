"use strict";window.GIDA=window.GIDA??{},document.addEventListener("DOMContentLoaded",(()=>{window.GIDA._slider_show_dcl=!0})),window.GIDA.slider_show=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="gida-slider-show",i=s+"-frame",n=s+"-slides",o="visible",l="display",a="view",c="pause",r=100,d=t?document.getElementById(t):document.getElementsByClassName(s)[0];if(!d)return;const u=e.effect_type??"slide",h=e.duration_time??8,f=e.transition_time??1,m=e.random_timing??!1;let p=e.background_visible??!0,_=e.side_slide_visible??!1;if("scroll"!==u&&(_=!1),_){p=!1;d.querySelector("."+n).style.overflow="visible"}const v=Array.prototype.slice.call(d.querySelectorAll(`.${n} > li`)),y=v.length,g=[];let L=null,w=null,E=!1;const b=[];function C(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&t(),b.push(I(t))}function I(t){let e;function s(){e=!1,t()}return()=>{e||(e=!0,requestAnimationFrame(s))}}function A(t){let e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},i=null;return{set:()=>new Promise((n=>{e=n,i=setTimeout((async()=>{i=null,await s(),n()}),t)})),clear:()=>{i&&(clearTimeout(i),i=null,e())}}}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of b)t()}),{passive:!0})}));const S=s+"-backgrounds",z=[];function P(t,e,s,i){const n=document.createElement("div");n.classList.add(S),e.insertBefore(n,e.firstChild);for(let e=0;e<t;e+=1){const t=s[e],o=document.createElement("div"),l=t.querySelector(":scope img");l&&(o.style.backgroundImage=`url('${l.src}')`,o.style.transitionDuration=2*i+"s"),n.appendChild(o),z.push(o)}}function x(t,e){for(let s=0;s<e;s+=1)z[s]&&z[s].classList[s===t?"add":"remove"](o)}const D=s+"-prev",T=s+"-next";function N(t,e,s){const n=e.getElementsByClassName(i)[0],o=e.getElementsByClassName(D)[0],l=e.getElementsByClassName(T)[0];if(1===t)return o&&(o.style.display="none"),void(l&&(l.style.display="none"));const a=async()=>{await s(null,-1)},c=async()=>{await s(null,1)};o&&o.addEventListener("click",(async()=>{n.dataset.disabled=!0,await a(),n.dataset.disabled=!1})),l&&l.addEventListener("click",(async()=>{n.dataset.disabled=!0,await c(),n.dataset.disabled=!1})),null===window.ontouchstart&&q(n,a,c)}function q(t,e,s){let i,n,o;t.addEventListener("touchstart",(t=>{i=t.touches[0].pageX,n=o=null})),t.addEventListener("touchmove",(t=>{n=t.changedTouches[0].pageX,o=t.changedTouches[0].pageY})),t.addEventListener("touchend",(t=>{null!==n&&null!==o&&(n<i-50?(s(),!0===t.cancelable&&t.preventDefault()):i+50<n&&(e(),!0===t.cancelable&&t.preventDefault()))}))}const M=s+"-rivets",B=s+"-rivet",k=[];function X(e,s,i){if(1===e)return;const n=s.getElementsByClassName(M)[0];if(!n)return;const o=2===e?1:0;for(let s=0;s<e;s+=1){const e=s,l=document.createElement("span");l.id=t+"-rivet-"+e,l.className=B,l.addEventListener("click",(()=>{i(e,o)})),n.appendChild(l),k.push(l)}}function $(t){for(const t of k)t.classList.remove(o);k[t]&&k[t].classList.add(o)}const G=[];function H(e){if(1!==e)for(let s=0;s<e;s+=1){const e=t+"-"+s;let i=document.querySelector('*[data-id="'+e+'"]');i||(i=document.getElementById(e)),G.push(i)}}function V(t){for(const t of G)t&&t.classList.remove(o);G[t]&&G[t].classList.add(o)}const O=s+"-slide-count",W=s+"-slide-index";let R=[],F=[];function Y(t,e){R=e.querySelectorAll("."+O),F=e.querySelectorAll("."+W);for(const e of R)e.innerHTML=t;for(const t of F)t.innerHTML=1}function j(t){for(const e of F)e.innerHTML=t+1}const J=s+"-caption",K=[];function Q(t,e){const s=t.querySelector(":scope > div, :scope > a > div");if(s){s.style.transitionDuration=e+"s",""===s.className&&(s.classList.add(J),s.classList.add("subtitle")),s.classList.contains("line")||s.classList.contains("circle")||s.classList.add("subtitle"),s.classList.contains("line")&&(s.dataset.caption="line"),s.classList.contains("circle")&&(s.dataset.caption="circle"),s.classList.contains("subtitle")&&(s.dataset.caption="subtitle");const t=s.querySelectorAll(":scope > div");for(const e of t)U(e);U(s),Z(s)}K.push(s)}function U(t){for(let e=0;e<t.childNodes.length;e+=1){const s=t.childNodes[e];if(3===s.nodeType){const t=s.nodeValue.trim();if(""===t)continue;const e=document.createElement("span");e.appendChild(document.createTextNode(t)),s.parentNode.replaceChild(e,s)}}}function Z(t){let e=[];const s=Array.from(t.childNodes);for(let i of s)if(1===i.nodeType)if("DIV"===i.tagName){if(e.length){const s=document.createElement("div");for(const i of e)s.appendChild(t.removeChild(i));t.insertBefore(s,i),e.length=0}}else e.push(i);if(e.length){const s=document.createElement("div");for(const i of e)s.appendChild(t.removeChild(i));t.appendChild(s)}}function tt(){if(window.innerWidth<600)for(const t of K)t&&(t.classList.remove(t.dataset.caption),t.classList.add("subtitle"));else for(const t of K)t&&(t.classList.remove("subtitle"),t.classList.add(t.dataset.caption))}function et(t,e){for(let s=0;s<K.length;s+=1)K[s]&&(s%e===t?K[s].classList.add(l):K[s].classList.remove(l))}class st{constructor(t,e,s){this._size=t,this._sls=e,this._time=s;for(let t=0;t<this._size;t+=1)this._sls[t].style.transform="translateX("+(t?100:0)+"%)";setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transition="transform "+this._time+"s"}),10)}async transition(t,e){for(let e=0;e<this._size;e+=1)this._sls[e].style.transform=e<=t?"translateX(0%)":"translateX(100%)";await A(1e3*this._time).set()}}class it{constructor(t,e,s){this._size=t,this._sls=e,this._time=s,this._curIdx=0,this._curIdxPsd=0,this._curPos=this._calcPosition(0,1);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transform=`translateX(${100*this._curPos[t]}%)`}async transition(t,e){this._curPos=this._calcPosition(this._curIdxPsd,e);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.transition="",this._sls[t].style.transform="translateX("+100*this._curPos[t]+"%)";await A(10).set();let s=0;1===e&&(s=t-this._curIdx),-1===e&&(s=this._curIdx-t),s<0&&(s+=this._size);for(let t=0;t<s;t+=1){const i=1===s?"ease":0===t?"ease-in":t===s-1?"ease-out":"linear";this._curPos=this.shift(this._curPos,e,this._time/s,i),await A(Math.floor(1e3*this._time/s)).set()}this._curIdx=t}shift(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ease";this._curIdxPsd+=e,this._sls.length-1<this._curIdxPsd&&(this._curIdxPsd=0),this._curIdxPsd<0&&(this._curIdxPsd=this._sls.length-1);const n=this._calcPosition(this._curIdxPsd,e);for(let e=0;e<this._sls.length;e+=1){const o=1===Math.abs(t[e]-n[e])?`transform ${s}s ${i}`:"";this._sls[e].style.transition=o,this._sls[e].style.transform=`translateX(${100*n[e]}%)`}return n}_calcPosition(t,e){const s=this._sls.length,i=new Array(s);i[t]=0;const n=-1!==e?Math.ceil((s-1)/2):Math.floor((s-1)/2),o=s-1-n;for(let e=1;e<=n;e+=1){let n=t+e;s-1<n&&(n-=s),i[n]=e}for(let e=1;e<=o;e+=1){let n=t-e;n<0&&(n+=s),i[n]=-e}return i}}class nt{constructor(t,e,s){this._size=t,this._sls=e,this._time=s;for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=0===t?1:0;setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.transition="opacity "+this._time+"s"}),10)}async transition(t,e){for(let e=0;e<this._size;e+=1)this._sls[e].style.opacity=e===t?1:0,this._sls[e].style.pointerEvents=e===t?"auto":"none";await A(1e3*this._time).set()}}const ot=s+"-picture",lt="dual",at="scroll",ct=10;class rt{constructor(t){const e=document.createElement("div");e.classList.add(ot),t.classList.contains(at)&&e.classList.add(at);const s=t.querySelectorAll(":scope > img, :scope > a > img");s.length?(e.appendChild(s[0]),1<s.length&&(e.classList.add(lt),e.appendChild(s[1]))):t.dataset.img&&(e.appendChild(this._createImage(t.dataset.img,t.dataset.imgSrcset??null,t.dataset.imgSizes??null)),t.dataset.imgSub&&(e.classList.add(lt),e.appendChild(this._createImage(t.dataset.imgSub,t.dataset.imgSubSrcset??null,t.dataset.imgSubSizes??null)))),this.p=e}_createImage(t,e,s){const i=document.createElement("img");return i.src=t,e&&(i.srcset=e),s&&(i.sizes=s),i}getElement(){return this.p}transition(t,e){}display(t){t?this.p.classList.add(l):this.p.classList.remove(l)}getDuration(t,e,s){return s?dt*(1+.01*ct*(1-2*Math.random())):t}}const ut=s+"-video";class ht{constructor(t){const e=document.createElement("div");e.classList.add(ut);const s=t.querySelectorAll(":scope > video, :scope > a > video");if(1===s.length){const t=s[0];this._initializeVideo(t),this.v=e.appendChild(t)}else if(t.dataset.video){const s=document.createElement("video");this._initializeVideo(s),this.v=e.appendChild(s);const i=document.createElement("source");i.setAttribute("src",t.dataset.video),s.appendChild(i)}this.p=e}_initializeVideo(t){t.muted=!0,t.playsinline=!0,t.setAttribute("muted",!0),t.setAttribute("playsinline",!0),t.addEventListener("loadedmetadata",(()=>{const e=t.clientWidth/t.clientHeight;this.ar=(0|1e3*e)/1e3}))}getElement(){return this.p}transition(t,e){t&&(this.v.setAttribute("autoplay",!0),this.v.play(),1===e&&this.v.setAttribute("loop",!0))}display(t){t||(this.v.pause(),this.v.currentTime=0)}getDuration(t,e,s){return this.v.duration-e}onResize(){if(!this.ar)return!1;const t=this.p.clientWidth/this.p.clientHeight;return this.ar<t?(this.v.classList.remove("height"),this.v.classList.add("width")):(this.v.classList.remove("width"),this.v.classList.add("height")),!0}}function ft(){N(y,d,Et),H(y),Y(y,d),X(y,d,Et);new IntersectionObserver((t=>{for(const e of t)d.classList[e.isIntersecting?"add":"remove"](a)}),{rootMargin:`${r}px 0px`}).observe(d),Et(0,0)}function mt(){vt()||setTimeout(mt,100)}function pt(){"scroll"===u&&1<y&&y<5&&(yt(),2===y&&yt());const t=d.classList.contains(at);for(const e of v){t&&e.classList.add(at),e.style.opacity=0,Q(e,f);let s=null;_t(e)?(s=new ht(e),E=!0):s=new rt(e),e.insertBefore(s.getElement(),e.firstChild);const i=e.querySelector("a")??e;i.insertBefore(s.getElement(),i.firstChild),g.push(s)}switch(E&&C(vt),C(tt,!0),u){default:L=new st(y,v,f);break;case"scroll":L=new it(y,v,f);break;case"fade":L=new nt(y,v,f)}}function _t(t){if(t.dataset.video)return!0;return 0<t.querySelectorAll(":scope > video, :scope > a > video").length}function vt(){let t=!0;for(let e=0;e<y;e+=1){const s=g[e];s instanceof ht&&(s.onResize()||(t=!1))}return t}function yt(){for(let t=0;t<y;t+=1){const e=v[t],s=e.cloneNode(!0);v.push(s),e.parentNode.appendChild(s)}}pt(),p&&P(y,d,v,f),window.GIDA._slider_show_dcl?window.addEventListener("load",ft):document.addEventListener("DOMContentLoaded",ft),E&&setTimeout(mt,100);let gt=0,Lt=null,wt=0;async function Et(t,e){[t,e]=It(t,e);const s=window.performance.now();if(!(0!==e&&s-wt<1e3*f)){wt=s;for(let e=0;e<v.length;e+=1)g[e].transition(e%y===t,y);x(t,y),V(t),j(t),$(t),await L.transition(t,e),w&&w(),gt=t,bt(t)}}async function bt(t){for(let e=0;e<v.length;e+=1)g[e].display(e%y===t);if(et(t,y),1===y)return;const e=g[t].getDuration(h,f,m);Lt&&Lt.clear(),Lt=A(Math.ceil(1e3*e),Ct),await Lt.set()}async function Ct(){d.classList.contains(a)&&!d.classList.contains(c)?Et(null,1):A(1e3*h,Ct).set()}function It(t,e){return null===t?(y-1<(t=gt+e)&&(t=0),t<0&&(t=y-1)):0===e&&(gt<t&&(e=1,gt-(t-y)<t-gt&&(e=-1)),t<gt&&(e=-1,t+y-gt<gt-t&&(e=1))),[t,e]}return{next:()=>{Et(gt===y-1?0:gt+1,1)},previous:()=>{Et(0===gt?y-1:gt-1,-1)},onTransitionEnd:t=>{w=t}}},window.GIDA.slider_show_page=function(t,e){const s=document.getElementById(t+"-rivet-"+e);s&&s.click()};
//# sourceMappingURL=show.min.js.map