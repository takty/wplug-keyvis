{"version":3,"sources":["show.js"],"names":["window","GIDA","sliders","slider_show","id","opts","arguments","length","undefined","NS","CLS_FRAME","CLS_SLIDES","CLS_VISIBLE","CLS_START","CLS_VIEW","CLS_PAUSE","CLS_SCROLL","OFFSET_VIEW","root","document","getElementById","getElementsByClassName","effectType","timeDur","timeTran","randomTiming","bgVisible","sideVisible","style","setProperty","querySelector","overflow","lis","Array","prototype","slice","call","querySelectorAll","size","sss","effect","onTransitionEnd","resizeListeners","onResize","fn","doFirst","push","throttle","onLoad","readyState","addEventListener","setTimeout","initResizeEventHandler","l","passive","isRunning","run","requestAnimationFrame","asyncTimeout","ms","res","tid","set","Promise","r","async","clear","clearTimeout","initViewportDetection","cls","offset","IntersectionObserver","es","e","classList","isIntersecting","rootMargin","observe","visibilityState","getBoundingClientRect","h","innerHeight","top","bottom","add","remove","Slide","static","idx","cap","mnt","type","constructor","li","useCaption","this","Caption","create","isVideo","MountVideo","MountPicture","contains","getElement","insertBefore","firstChild","getType","dataset","video","onPreDisplay","cur","m","CLS_PRE_DISPLAY","transition","display","CLS_DISPLAY","getDuration","elm","createElement","CLS_PIC","is","appendChild","CLS_DUAL","img","i","createImage","src","srcset","sizes","imgSub","keys","isCur","doRandom","RANDOM_RATE","Math","random","ar","CLS_VIDEO","vs","v","initialize","createVideo","s","setAttribute","muted","playsinline","clientWidth","clientHeight","play","pause","currentTime","duration","arFrame","className","CLS_CAP","CLS_SUBTITLE","CLS_LINE","CLS_CIRCLE","caption","ds","d","wrapText","wrapDiv","n","from","childNodes","nodeType","str","nodeValue","trim","createTextNode","parentNode","replaceChild","tags","tagName","t","removeChild","innerWidth","CLS_BGS","bgs","initBackgrounds","frame","bg","backgroundImage","transitionBackgrounds","CLS_PREV","CLS_NEXT","CLS_ACTIVE","DX_FLICK","initButtons","transitionFn","prevBtn","nextBtn","prevFn","nextFn","disabled","ontouchstart","_initFlick","sts","prev","next","px","touches","pageX","x","changedTouches","_setCommonFlickProcess","btn","which","cancelable","preventDefault","CLS_RIVETS","CLS_RIVET","rivets","initRivets","rs","dir","transitionRivets","thumbs","initThumbnails","it","transitionThumbnails","CLS_SLIDE_CNT","CLS_SLIDE_IDX","slideCntElms","slideIdxElms","initIndicators","innerHTML","transitionIndicators","TransitionSlide","slides","tranTime","_size","_lis","_time","transform","opacity","TransitionScroll","_cur","_curPsd","_doing","_queue","ps","_calcPosition","curPsd","_doTransition","shift","curIdx","curIdxPsd","idxPsd","_shift","_getTransition","floor","curPs","time","tf","lenPsd","abs","hs","ceil","j","TransitionFade","pointerEvents","hasVideo","initSlides","tryResizeVideo","onResizeSlide","cloneLis","isScroll","ss","finish","nls","cloneNode","navigator","maxTouchPoints","pointerType","once","console","log","stStep","last","stReserve","getIdxDir","performance","now","dt","step","fs","move"],"mappings":"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","file":"show.min.js","sourcesContent":["/**\n * Gida Slider - Show\n *\n * @author Takuto Yanagida\n * @version 2022-11-04\n */\n\n\nwindow.GIDA = window['GIDA'] ?? {};\n\nwindow.GIDA.sliders = window.GIDA['sliders'] ?? {};\n\nwindow.GIDA.slider_show = function (id, opts = {}) {\n\tconst NS          = 'gida-slider-show';\n\tconst CLS_FRAME   = NS + '-frame';\n\tconst CLS_SLIDES  = NS + '-slides';\n\tconst CLS_VISIBLE = 'visible';\n\tconst CLS_START   = 'start';\n\tconst CLS_VIEW    = 'view';\n\tconst CLS_PAUSE   = 'pause';\n\tconst CLS_SCROLL  = 'scroll';\n\tconst OFFSET_VIEW = 100;\n\n\tconst root = id ? document.getElementById(id) : document.getElementsByClassName(NS)[0];\n\tif (!root) return;\n\n\tconst effectType   = opts['effect_type']        ?? 'slide';  // 'scroll' or 'fade'\n\tconst timeDur      = opts['duration_time']      ?? 8;  // [second]\n\tconst timeTran     = opts['transition_time']    ?? 1;  // [second]\n\tconst randomTiming = opts['random_timing']      ?? false;\n\tlet bgVisible      = opts['background_visible'] ?? true;\n\tlet sideVisible    = opts['side_slide_visible'] ?? false;\n\n\troot.style.setProperty('--transition-time', `${timeTran}s`);\n\n\tif (effectType !== 'scroll') sideVisible = false;\n\tif (sideVisible) {\n\t\tbgVisible = false;\n\t\tconst ss = root.querySelector('.' + CLS_SLIDES);\n\t\tss.style.overflow = 'visible';\n\t}\n\n\tconst lis  = Array.prototype.slice.call(root.querySelectorAll(`.${CLS_SLIDES} > li`));\n\tconst size = lis.length;\n\tconst sss  = [];\n\tlet effect = null;\n\n\tlet onTransitionEnd = null;\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t/**\n\t * Common Functions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-08-01\n\t */\n\t\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tfunction onLoad(fn) {\n\t\tif ('loading' === document.readyState) {\n\t\t\tdocument.addEventListener('DOMContentLoaded', fn);\n\t\t} else {\n\t\t\tsetTimeout(fn, 0);\n\t\t}\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction initResizeEventHandler() {\n\t\twindow.addEventListener('resize', () => { for (const l of resizeListeners) l(); }, { passive: true });\n\t}\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\tfunction run() {\n\t\t\tisRunning = false;\n\t\t\tfn();\n\t\t}\n\t\treturn () => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(run);\n\t\t};\n\t}\n\t\n\tfunction asyncTimeout(ms, fn = () => { }) {\n\t\tlet tid = null;\n\t\tlet res;\n\t\treturn {\n\t\t\tset: () => new Promise((r) => {\n\t\t\t\tres = r\n\t\t\t\ttid = setTimeout(async () => {\n\t\t\t\t\ttid = null;\n\t\t\t\t\tawait fn();\n\t\t\t\t\tr();\n\t\t\t\t}, ms);\n\t\t\t}),\n\t\t\tclear: () => {\n\t\t\t\tif (tid) {\n\t\t\t\t\tclearTimeout(tid);\n\t\t\t\t\ttid = null;\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction initViewportDetection(root, cls, offset) {\n\t\tconst io = new IntersectionObserver((es) => {\n\t\t\tfor (const e of es) root.classList[e.isIntersecting ? 'add' : 'remove'](cls);\n\t\t}, { rootMargin: `${offset}px 0px` });\n\t\tio.observe(root);\n\t\n\t\tdocument.addEventListener('visibilitychange', () => {\n\t\t\tconst v = ('hidden' !== document.visibilityState);\n\t\t\tif (v) {\n\t\t\t\tconst r = root.getBoundingClientRect();\n\t\t\t\tconst h = window.innerHeight;\n\t\t\t\tif ((0 < r.top && r.top < h) || (0 < r.bottom && r.bottom < h)) {\n\t\t\t\t\troot.classList.add(cls);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\troot.classList.remove(cls);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/**\n\t * Slide\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-11-03\n\t */\n\t\n\tclass Slide {\n\t\n\t\tstatic CLS_SCROLL      = 'scroll';\n\t\tstatic CLS_PRE_DISPLAY = 'pre-display';\n\t\tstatic CLS_DISPLAY     = 'display';\n\t\n\t\t#idx  = 0;\n\t\t#cap  = null;\n\t\t#mnt  = null;\n\t\t#type = '';\n\t\n\t\tconstructor(li, idx, useCaption = true) {\n\t\t\tthis.#idx = idx;\n\t\t\tthis.#cap = useCaption ? Caption.create(li) : null;\n\t\n\t\t\tif (this.#isVideo(li)) {\n\t\t\t\tthis.#mnt  = new MountVideo(li);\n\t\t\t\tthis.#type = 'video';\n\t\t\t} else {\n\t\t\t\tthis.#mnt  = new MountPicture(li);\n\t\t\t\tthis.#type = 'image';\n\t\t\t}\n\t\t\tif (li.classList.contains(Slide.CLS_SCROLL)) {\n\t\t\t\tthis.#mnt.getElement().classList.add(Slide.CLS_SCROLL);\n\t\t\t}\n\t\t\tli.insertBefore(this.#mnt.getElement(), li.firstChild);\n\t\t\tconst e = li.querySelector('a') ?? li;\n\t\t\te.insertBefore(this.#mnt.getElement(), e.firstChild);\n\t\t}\n\t\n\t\tgetType() {\n\t\t\treturn this.#type;\n\t\t}\n\t\n\t\t#isVideo(li) {\n\t\t\tif (li.dataset.video) return true;\n\t\t\tconst v = li.querySelector(':scope > video, :scope > a > video');\n\t\t\treturn null !== v;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif ('video' === this.#type && !this.#mnt.onResize()) return false;\n\t\t\tif (this.#cap) this.#cap.onResize();\n\t\t\treturn true;\n\t\t}\n\t\n\t\tonPreDisplay(cur, size) {\n\t\t\tconst m = ((this.#idx % size) === cur) ? 'add' : 'remove';\n\t\t\tthis.#mnt.getElement().classList[m](Slide.CLS_PRE_DISPLAY);\n\t\t\tif (this.#cap) this.#cap.getElement().classList[m](Slide.CLS_PRE_DISPLAY);\n\t\t}\n\t\n\t\ttransition(cur, size) {\n\t\t\tthis.#mnt.transition((this.#idx % size) === cur, size);\n\t\t}\n\t\n\t\tdisplay(cur, size) {\n\t\t\tconst m = ((this.#idx % size) === cur) ? 'add' : 'remove';\n\t\t\tthis.#mnt.getElement().classList[m](Slide.CLS_DISPLAY);\n\t\t\tif (this.#cap) this.#cap.getElement().classList[m](Slide.CLS_DISPLAY);\n\t\n\t\t\tthis.#mnt.display((this.#idx % size) === cur);\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, randomTiming) {\n\t\t\treturn this.#mnt.getDuration(timeDur, timeTran, randomTiming);\n\t\t}\n\t\n\t}\n\t/**\n\t * Mount Picture\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-11-03\n\t */\n\t\n\tclass MountPicture {\n\t\n\t\tstatic CLS_PIC  = NS + '-picture';\n\t\tstatic CLS_DUAL = 'dual';\n\t\n\t\tstatic RANDOM_RATE = 10;\n\t\n\t\t#elm = null;\n\t\n\t\tconstructor(li) {\n\t\t\tthis.#elm = document.createElement('div');\n\t\t\tthis.#elm.classList.add(MountPicture.CLS_PIC);\n\t\n\t\t\tconst is = li.querySelectorAll(':scope > img, :scope > a > img');\n\t\t\tif (is.length) {\n\t\t\t\tthis.#elm.appendChild(is[0]);\n\t\t\t\tif (1 < is.length) {\n\t\t\t\t\tthis.#elm.classList.add(MountPicture.CLS_DUAL);\n\t\t\t\t\tthis.#elm.appendChild(is[1]);\n\t\t\t\t}\n\t\t\t} else if (li.dataset.img) {\n\t\t\t\tconst i = this.#createImage(li, { src: 'img', srcset: 'imgSrcset', sizes: 'imgSizes' });\n\t\t\t\tthis.#elm.appendChild(i);\n\t\t\t\tif (li.dataset.imgSub) {\n\t\t\t\t\tthis.#elm.classList.add(MountPicture.CLS_DUAL);\n\t\t\t\t\tconst i = this.#createImage(li, { src: 'imgSub', srcset: 'imgSubSrcset', sizes: 'imgSubSizes' });\n\t\t\t\t\tthis.#elm.appendChild(i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t#createImage(li, keys) {\n\t\t\tconst i = document.createElement('img');\n\t\t\ti.src = li.dataset[keys.src];\n\t\n\t\t\tconst srcset = li.dataset[keys.srcset] ?? null;\n\t\t\tconst sizes  = li.dataset[keys.sizes]  ?? null;\n\t\t\tif (srcset) i.srcset = srcset;\n\t\t\tif (sizes)  i.sizes  = sizes;\n\t\t\treturn i;\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.#elm;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\tif (doRandom) {\n\t\t\t\tconst f = (1 + 0.01 * MountPicture.RANDOM_RATE * (1 - Math.random() * 2));\n\t\t\t\treturn timeDur * f;\n\t\t\t}\n\t\t\treturn timeDur;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Mount Video\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-11-03\n\t */\n\t\n\tclass MountVideo {\n\t\n\t\tstatic CLS_VIDEO = NS + '-video';\n\t\n\t\t#elm   = null;\n\t\t#video = null;\n\t\t#ar    = null;\n\t\n\t\tconstructor(li) {\n\t\t\tthis.#elm = document.createElement('div');\n\t\t\tthis.#elm.classList.add(MountVideo.CLS_VIDEO);\n\t\n\t\t\tconst vs = li.querySelectorAll(':scope > video, :scope > a > video');\n\t\t\tif (1 === vs.length) {\n\t\t\t\tconst v = vs[0];\n\t\t\t\tthis.#initialize(v);\n\t\t\t\tthis.#elm.appendChild(v);\n\t\t\t\tthis.#video = v;\n\t\t\t} else if (li.dataset.video) {\n\t\t\t\tconst v = this.#createVideo(li);\n\t\t\t\tthis.#initialize(v);\n\t\t\t\tthis.#elm.appendChild(v);\n\t\t\t\tthis.#video = v;\n\t\t\t}\n\t\t}\n\t\n\t\t#createVideo(li) {\n\t\t\tconst v = document.createElement('video');\n\t\t\tconst s = document.createElement('source');\n\t\t\ts.setAttribute('src', li.dataset.video);\n\t\t\tv.appendChild(s);\n\t\t\treturn v;\n\t\t}\n\t\n\t\t#initialize(v) {\n\t\t\tv.muted = true;\n\t\t\tv.playsinline = true;\n\t\t\tv.setAttribute('muted', true);\n\t\t\tv.setAttribute('playsinline', true);\n\t\t\tv.addEventListener('loadedmetadata', () => {\n\t\t\t\tconst ar = v.clientWidth / v.clientHeight;\n\t\t\t\tthis.#ar = (0 | (ar * 1000)) / 1000;\n\t\t\t});\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.#elm;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.#video.setAttribute('autoplay', true);\n\t\t\t\tthis.#video.play();\n\t\t\t\tif (size === 1) this.#video.setAttribute('loop', true);\n\t\t\t}\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (!isCur) {\n\t\t\t\tthis.#video.pause();\n\t\t\t\tthis.#video.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\treturn this.#video.duration - timeTran;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif (!this.#ar) return false;\n\t\t\tconst arFrame = this.#elm.clientWidth / this.#elm.clientHeight;\n\t\t\tif (this.#ar < arFrame) {\n\t\t\t\tthis.#video.classList.remove('height');\n\t\t\t\tthis.#video.classList.add('width');\n\t\t\t} else {\n\t\t\t\tthis.#video.classList.remove('width');\n\t\t\t\tthis.#video.classList.add('height');\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Caption\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-11-03\n\t */\n\t\n\tclass Caption {\n\t\n\t\tstatic CLS_CAP = NS + '-caption';\n\t\n\t\tstatic CLS_SUBTITLE = 'subtitle';\n\t\tstatic CLS_CIRCLE   = 'circle';\n\t\tstatic CLS_LINE     = 'line';\n\t\n\t\tstatic create(li) {\n\t\t\tconst elm = li.querySelector(':scope > div, :scope > a > div');\n\t\t\treturn elm ? new Caption(elm) : null;\n\t\t}\n\t\n\t\t#elm = null;\n\t\n\t\tconstructor(elm) {\n\t\t\tthis.#elm = elm;\n\t\n\t\t\tif ('' === elm.className) {\n\t\t\t\telm.classList.add(Caption.CLS_CAP);\n\t\t\t\telm.classList.add(Caption.CLS_SUBTITLE);\n\t\t\t}\n\t\t\tif (!elm.classList.contains(Caption.CLS_LINE) && !elm.classList.contains(Caption.CLS_CIRCLE)) {\n\t\t\t\telm.classList.add(Caption.CLS_SUBTITLE);\n\t\t\t}\n\t\t\tif (elm.classList.contains(Caption.CLS_LINE))     elm.dataset.caption = Caption.CLS_LINE;\n\t\t\tif (elm.classList.contains(Caption.CLS_CIRCLE))   elm.dataset.caption = Caption.CLS_CIRCLE;\n\t\t\tif (elm.classList.contains(Caption.CLS_SUBTITLE)) elm.dataset.caption = Caption.CLS_SUBTITLE;\n\t\n\t\t\tconst ds = elm.querySelectorAll(':scope > div');\n\t\t\tfor (const d of ds) this.#wrapText(d);\n\t\t\tthis.#wrapText(elm);\n\t\t\tthis.#wrapDiv(elm);\n\t\t}\n\t\n\t\t#wrapText(elm) {\n\t\t\tfor (const n of Array.from(elm.childNodes)) {\n\t\t\t\tif (3 === n.nodeType) {  // TEXT_NODE\n\t\t\t\t\tconst str = n.nodeValue.trim();\n\t\t\t\t\tif ('' !== str) {\n\t\t\t\t\t\tconst e = document.createElement('span');\n\t\t\t\t\t\te.appendChild(document.createTextNode(str));\n\t\t\t\t\t\tn.parentNode.replaceChild(e, n);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\t#wrapDiv(elm) {\n\t\t\tconst tags = [];\n\t\t\tfor (const n of Array.from(elm.childNodes)) {\n\t\t\t\tif (1 === n.nodeType) {  // ELEMENT_NODE\n\t\t\t\t\tif ('DIV' === n.tagName) {\n\t\t\t\t\t\tif (tags.length) {\n\t\t\t\t\t\t\tconst e = document.createElement('div');\n\t\t\t\t\t\t\tfor (const t of tags) e.appendChild(elm.removeChild(t));\n\t\t\t\t\t\t\telm.insertBefore(e, n);\n\t\t\t\t\t\t\ttags.length = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttags.push(n);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (tags.length) {\n\t\t\t\tconst e = document.createElement('div');\n\t\t\t\tfor (const t of tags) e.appendChild(elm.removeChild(t));\n\t\t\t\telm.appendChild(e);\n\t\t\t}\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.#elm;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif (window.innerWidth < 600) {\n\t\t\t\tthis.#elm.classList.remove(this.#elm.dataset.caption);\n\t\t\t\tthis.#elm.classList.add(Caption.CLS_SUBTITLE);\n\t\t\t} else {\n\t\t\t\tthis.#elm.classList.remove(Caption.CLS_SUBTITLE);\n\t\t\t\tthis.#elm.classList.add(this.#elm.dataset.caption);\n\t\t\t}\n\t\t}\n\t\n\t}\n\t/**\n\t * Backgrounds\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-11-04\n\t */\n\t\n\tconst CLS_BGS = NS + '-backgrounds';\n\t\n\tconst bgs = [];\n\t\n\tfunction initBackgrounds(size, root, lis) {\n\t\tconst frame = document.createElement('div');\n\t\tframe.classList.add(CLS_BGS);\n\t\troot.insertBefore(frame, root.firstChild);\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst li  = lis[i];\n\t\t\tconst bg  = document.createElement('div');\n\t\t\tconst img = li.querySelector(':scope img');\n\t\t\tif (img) {\n\t\t\t\tbg.style.backgroundImage = `url('${img.src}')`;\n\t\t\t}\n\t\t\tframe.appendChild(bg);\n\t\t\tbgs.push(bg);\n\t\t}\n\t}\n\t\n\tfunction transitionBackgrounds(idx, size) {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tif (!bgs[i]) continue;\n\t\t\tbgs[i].classList[i === idx ? 'add' : 'remove'](CLS_VISIBLE);\n\t\t}\n\t}\n\t\n\t/**\n\t * Buttons\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-07-28\n\t */\n\t\n\t\n\tconst CLS_PREV   = NS + '-prev';\n\tconst CLS_NEXT   = NS + '-next';\n\tconst CLS_ACTIVE = 'active';\n\tconst DX_FLICK   = 32;\n\t\n\tfunction initButtons(size, root, transitionFn) {\n\t\tconst frame   = root.getElementsByClassName(CLS_FRAME)[0];\n\t\tconst prevBtn = root.getElementsByClassName(CLS_PREV)[0];\n\t\tconst nextBtn = root.getElementsByClassName(CLS_NEXT)[0];\n\t\tif (size === 1) {\n\t\t\tif (prevBtn) prevBtn.style.display = 'none';\n\t\t\tif (nextBtn) nextBtn.style.display = 'none';\n\t\t\treturn;\n\t\t}\n\t\tconst prevFn = async () => { await transitionFn(null, -1); };\n\t\tconst nextFn = async () => { await transitionFn(null,  1); };\n\t\tif (prevBtn) prevBtn.addEventListener('click', async () => { frame.dataset.disabled = true; await prevFn(); frame.dataset.disabled = false; });\n\t\tif (nextBtn) nextBtn.addEventListener('click', async () => { frame.dataset.disabled = true; await nextFn(); frame.dataset.disabled = false; });\n\t\tif (window.ontouchstart === null) _initFlick(frame, prevFn, nextFn, prevBtn, nextBtn);\n\t}\n\t\n\tfunction _initFlick(frame, prevFn, nextFn, prevBtn, nextBtn) {\n\t\tconst sts = { prev: null, next: null };\n\t\tlet px;\n\t\n\t\tframe.addEventListener('touchstart', e => { px = e.touches[0].pageX; });\n\t\tframe.addEventListener('touchmove', e => {\n\t\t\tif (px === null) return;\n\t\t\tconst x = e.changedTouches[0].pageX;\n\t\n\t\t\tif (px + DX_FLICK < x) {  // ->\n\t\t\t\tprevFn();\n\t\t\t\t_setCommonFlickProcess(e, prevBtn, 'prev', sts);\n\t\t\t\tpx = null;\n\t\t\t} else if (x < px - DX_FLICK) {  // <-\n\t\t\t\tnextFn();\n\t\t\t\t_setCommonFlickProcess(e, nextBtn, 'next', sts);\n\t\t\t\tpx = null;\n\t\t\t}\n\t\t});\n\t\tframe.addEventListener('touchend', () => { px = null; });\n\t}\n\t\n\tfunction _setCommonFlickProcess(e, btn, which, sts) {\n\t\tif (e.cancelable === true) e.preventDefault();\n\t\tif (!btn) return;\n\t\tclearTimeout(sts[which]);\n\t\tbtn.classList.add(CLS_ACTIVE);\n\t\tsts[which] = setTimeout(() => { btn.classList.remove(CLS_ACTIVE); }, timeTran * 1000 / 2);\n\t}\n\t\n\t/**\n\t * Rivets\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t */\n\t\n\t\n\tconst CLS_RIVETS = NS + '-rivets';\n\tconst CLS_RIVET  = NS + '-rivet';\n\t\n\tconst rivets = [];\n\t\n\tfunction initRivets(size, root, transitionFn) {\n\t\tif (size === 1) return;\n\t\tconst rs = root.getElementsByClassName(CLS_RIVETS)[0];\n\t\tif (!rs) return;\n\t\tconst dir = size === 2 ? 1 : 0;\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst idx = i;\n\t\t\tconst r = document.createElement('span');\n\t\t\tr.id = id + '-rivet-' + idx;\n\t\t\tr.className = CLS_RIVET;\n\t\t\tr.addEventListener('click', () => { transitionFn(idx, dir); });\n\t\t\trs.appendChild(r);\n\t\t\trivets.push(r);\n\t\t}\n\t}\n\t\n\tfunction transitionRivets(idx) {\n\t\tfor (const r of rivets) r.classList.remove(CLS_VISIBLE);\n\t\tif (rivets[idx]) rivets[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t * Thumbnails\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t */\n\t\n\t\n\tconst thumbs = [];\n\t\n\tfunction initThumbnails(size) {\n\t\tif (size === 1) return;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst tid = id + '-' + i;\n\t\t\tlet it = document.querySelector('*[data-id=\"' + tid + '\"]');\n\t\t\tif (!it) it = document.getElementById(tid);\n\t\t\tthumbs.push(it);\n\t\t}\n\t}\n\t\n\tfunction transitionThumbnails(idx) {\n\t\tfor (const t of thumbs) {\n\t\t\tif (t) t.classList.remove(CLS_VISIBLE);\n\t\t}\n\t\tif (thumbs[idx]) thumbs[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t * Indicators\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-23\n\t */\n\t\n\t\n\tconst CLS_SLIDE_CNT = NS + '-slide-count';\n\tconst CLS_SLIDE_IDX = NS + '-slide-index';\n\t\n\tlet slideCntElms = [];\n\tlet slideIdxElms = [];\n\t\n\tfunction initIndicators(size, root) {\n\t\tslideCntElms = root.querySelectorAll('.' + CLS_SLIDE_CNT);\n\t\tslideIdxElms = root.querySelectorAll('.' + CLS_SLIDE_IDX);\n\t\tfor (const elm of slideCntElms) elm.innerHTML = size;\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = 1;\n\t}\n\t\n\tfunction transitionIndicators(idx) {\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = (idx + 1);\n\t}\n\t\n\t/**\n\t * Slide Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t */\n\t\n\t\n\tclass TransitionSlide {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._lis  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._lis[i].style.transform = 'translateX(' + (i ? 100 : 0) + '%)';\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._lis[i].style.opacity = 1;\n\t\t\t\t\tthis._lis[i].style.transition = 'transform ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._lis[i].style.transform = (i <= idx) ? 'translateX(0%)' : 'translateX(100%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Scroll Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-11-02\n\t */\n\t\n\t\n\tclass TransitionScroll {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._lis  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tthis._cur    = 0;\n\t\t\tthis._curPsd = 0;\n\t\t\tthis._doing  = false;\n\t\t\tthis._queue  = [];\n\t\n\t\t\tconst ps = this._calcPosition(0, 1);\n\t\t\tfor (let i = 0; i < this._lis.length; i += 1) {\n\t\t\t\tthis._lis[i].style.opacity   = 1;\n\t\t\t\tthis._lis[i].style.transform = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tthis._queue.push((cur, curPsd) => this._doTransition(cur, curPsd, idx, dir));\n\t\t\tif (this._doing) return;\n\t\t\tthis._doing = true;\n\t\t\twhile (this._queue.length) {\n\t\t\t\t[this._cur, this._curPsd] = await this._queue.shift()(this._cur, this._curPsd);\n\t\t\t}\n\t\t\tthis._doing = false;\n\t\t}\n\t\n\t\tasync _doTransition(curIdx, curIdxPsd, idx, dir) {\n\t\t\tif (0 === dir && curIdx !== idx) {\n\t\t\t\tconst r = (curIdx < idx) ? idx - curIdx : idx + this._size - curIdx;\n\t\t\t\tconst l = (idx < curIdx) ? curIdx - idx : curIdx + this._size - idx;\n\t\t\t\tdir = (l < r) ? -1 : 1;\n\t\t\t}\n\t\t\tlet ps = this._calcPosition(curIdxPsd, dir);\n\t\t\tfor (let i = 0; i < this._lis.length; i += 1) {\n\t\t\t\tthis._lis[i].style.transition = '';\n\t\t\t\tthis._lis[i].style.transform  = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t\tawait asyncTimeout(100).set();  // Wait\n\t\n\t\t\tlet d = 0;\n\t\t\tif (dir ===  1) d = idx - curIdx;\n\t\t\tif (dir === -1) d = curIdx - idx;\n\t\t\tif (d < 0) d += this._size;\n\t\n\t\t\tlet idxPsd = curIdxPsd;\n\t\t\tfor (let i = 0; i < d; i += 1) {\n\t\t\t\t[ps, idxPsd] = this._shift(ps, idxPsd, dir, this._time / d, this._getTransition(d, i));\n\t\t\t\tawait asyncTimeout(Math.floor(this._time * 1000 / d)).set();\n\t\t\t}\n\t\t\treturn [idx, idxPsd];\n\t\t}\n\t\n\t\t_getTransition(d, i) {\n\t\t\tif (d === 1) return 'ease';\n\t\t\tif (d === 2) {\n\t\t\t\tif (i === 0) return 'ease-in';\n\t\t\t\tif (i === 1) return 'ease-out';\n\t\t\t}\n\t\t\treturn 'linear';\n\t\t}\n\t\n\t\t_shift(curPs, curIdxPsd, dir, time, tf = 'ease') {\n\t\t\tconst lenPsd = this._lis.length;\n\t\n\t\t\tlet idxPsd = curIdxPsd + dir;\n\t\t\tif (lenPsd - 1 < idxPsd) idxPsd = 0;\n\t\t\tif (idxPsd < 0) idxPsd = lenPsd - 1;\n\t\n\t\t\tconst ps = this._calcPosition(idxPsd, dir);\n\t\n\t\t\tfor (let i = 0; i < lenPsd; i += 1) {\n\t\t\t\tconst t = (Math.abs(curPs[i] - ps[i]) === 1) ? `transform ${time}s ${tf}` : '';\n\t\t\t\tthis._lis[i].style.transition = t;\n\t\t\t\tthis._lis[i].style.transform  = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t\treturn [ps, idxPsd];\n\t\t}\n\t\n\t\t_calcPosition(idxPsd, dir) {\n\t\t\tconst lenPsd = this._lis.length;\n\t\t\tconst ps     = new Array(lenPsd);\n\t\n\t\t\tconst hs = (dir !== -1) ? Math.ceil((lenPsd - 1) / 2) : Math.floor((lenPsd - 1) / 2);\n\t\t\tconst rs = lenPsd - 1 - hs;\n\t\n\t\t\tfor (let i = 1; i <= hs; i += 1) {\n\t\t\t\tlet j = idxPsd + i;\n\t\t\t\tif (lenPsd - 1 < j) j -= lenPsd;\n\t\t\t\tps[j] = i;\n\t\t\t}\n\t\t\tfor (let i = 1; i <= rs; i += 1) {\n\t\t\t\tlet j = idxPsd - i;\n\t\t\t\tif (j < 0) j += lenPsd;\n\t\t\t\tps[j] = -i;\n\t\t\t}\n\t\t\tps[idxPsd] = 0;\n\t\t\treturn ps;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Fade Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t */\n\t\n\t\n\tclass TransitionFade {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._lis  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._lis[i].style.opacity = (i === 0) ? 1 : 0;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._lis[i].style.transition = 'opacity ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._lis[i].style.opacity = (i === idx) ? 1 : 0;\n\t\t\t\tthis._lis[i].style.pointerEvents = (i === idx) ? 'auto' : 'none';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t}\n\t\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tconst hasVideo = initSlides();\n\tif (bgVisible) initBackgrounds(size, root, lis);\n\n\tif (hasVideo) setTimeout(tryResizeVideo, 100);\n\tfunction tryResizeVideo() {\n\t\tconst finish = onResizeSlide();\n\t\tif (!finish) setTimeout(tryResizeVideo, 100);\n\t}\n\n\tconst frame = root.getElementsByClassName(CLS_FRAME)[0];\n\tif (0 < navigator.maxTouchPoints) {\n\t\tframe.addEventListener('pointerenter', e => {\n\t\t\tconst m = (e.pointerType === 'mouse') ? 'remove' : 'add';\n\t\t\tframe.classList[m]('touch');\n\t\t}, { once: true });\n\t}\n\n\tonLoad(() => {\n\t\tinitResizeEventHandler();\n\n\t\tinitButtons(size, root, transition);\n\t\tinitThumbnails(size);\n\t\tinitIndicators(size, root);\n\t\tinitRivets(size, root, transition);\n\n\t\tinitViewportDetection(root, CLS_VIEW, OFFSET_VIEW);\n\n\t\ttransition(0, 0);\n\t\tconsole.log(`Gida Slider - Show (#${id}): started`);\n\t\tsetTimeout(() => root.classList.add(CLS_START), 0);\n\t});\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction initSlides() {\n\t\tif (effectType === 'scroll' && 1 < size && size < 5) {\n\t\t\tcloneLis();\n\t\t\tif (size === 2) cloneLis();\n\t\t}\n\t\tconst isScroll = root.classList.contains(CLS_SCROLL);\n\t\tlet hasVideo = false;\n\n\t\tfor (let i = 0; i < lis.length; i += 1) {\n\t\t\tif (isScroll) lis[i].classList.add(CLS_SCROLL);\n\n\t\t\tconst ss = new Slide(lis[i], i);\n\t\t\tif ('video' === ss.getType()) hasVideo = true;\n\t\t\tsss.push(ss);\n\t\t}\n\t\tonResize(onResizeSlide, true);\n\t\tswitch (effectType) {\n\t\t\tcase 'slide' : effect = new TransitionSlide(size, lis, timeTran); break;\n\t\t\tcase 'scroll': effect = new TransitionScroll(size, lis, timeTran); break;\n\t\t\tcase 'fade'  : effect = new TransitionFade(size, lis, timeTran); break;\n\t\t\tdefault      : effect = new TransitionSlide(size, lis, timeTran); break;\n\t\t}\n\t\treturn hasVideo;\n\t}\n\n\tfunction onResizeSlide() {\n\t\tlet finish = true;\n\t\tfor (const ss of sss) {\n\t\t\tif (!ss.onResize()) finish = false;\n\t\t}\n\t\treturn finish;\n\t}\n\n\tfunction cloneLis() {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst li  = lis[i];\n\t\t\tconst nls = li.cloneNode(true);\n\t\t\tlis.push(nls);\n\t\t\tli.parentNode.appendChild(nls);\n\t\t}\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tlet curIdx    = 0;\n\tlet stStep    = null;\n\tlet last      = 0;\n\tlet stReserve = null;\n\n\tasync function transition(idx, dir) {\n\t\t[idx, dir] = getIdxDir(idx, dir);\n\n\t\tconst t = window.performance.now();\n\t\tif (dir !== 0 && t - last < timeTran * 1000) {\n\t\t\tclearTimeout(stReserve);\n\t\t\tstReserve = setTimeout(() => transition(idx, dir), timeTran * 1000 - (t - last));\n\t\t\treturn;\n\t\t}\n\t\tlast = t;\n\n\t\tfor (const ss of sss) ss.onPreDisplay(idx, size);\n\t\tfor (const ss of sss) ss.transition(idx, size);\n\n\t\ttransitionBackgrounds(idx, size);\n\t\ttransitionThumbnails(idx);\n\t\ttransitionIndicators(idx);\n\t\ttransitionRivets(idx);\n\n\t\tawait effect.transition(idx, dir);\n\t\tif (onTransitionEnd) onTransitionEnd();\n\t\tcurIdx = idx;\n\t\tdisplay(idx);\n\t}\n\n\tasync function display(idx) {\n\t\tfor (const ss of sss) ss.display(idx, size);\n\t\tif (size === 1) return;\n\n\t\tconst dt = sss[idx].getDuration(timeDur, timeTran, randomTiming);\n\t\tif (stStep) stStep.clear();\n\t\tstStep = asyncTimeout(Math.ceil(dt * 1000), step);\n\t\tawait stStep.set();\n\t}\n\n\tasync function step() {\n\t\tif (root.classList.contains(CLS_VIEW) && !root.classList.contains(CLS_PAUSE)) {\n\t\t\ttransition(null, 1);\n\t\t} else {\n\t\t\tasyncTimeout(timeDur * 1000, step).set();\n\t\t}\n\t}\n\n\tfunction getIdxDir(idx, dir) {\n\t\tif (idx === null) {\n\t\t\tidx = curIdx + dir;\n\t\t\tif (size - 1 < idx) idx = 0;\n\t\t\tif (idx < 0) idx = size - 1;\n\t\t} else if (dir === 0 && curIdx !== idx) {\n\t\t\tconst r = (curIdx < idx) ? idx - curIdx : idx + size - curIdx;\n\t\t\tconst l = (idx < curIdx) ? curIdx - idx : curIdx + size - idx;\n\t\t\tdir = (l < r) ? -1 : 1;\n\t\t}\n\t\treturn [idx, dir];\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tconst fs = {\n\t\tmove: idx => transition(idx, size === 2 ? 1 : 0),\n\t\tnext: ()  => transition((curIdx === size - 1) ? 0          : (curIdx + 1),  1),\n\t\tprev: ()  => transition((curIdx === 0       ) ? (size - 1) : (curIdx - 1), -1),\n\n\t\tonTransitionEnd: fn => { onTransitionEnd = fn; }\n\t};\n\twindow.GIDA.sliders[id] = fs;\n\treturn fs;\n\n}\n"]}