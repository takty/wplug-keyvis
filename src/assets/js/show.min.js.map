{"version":3,"sources":["show.js"],"names":["window","GIDA","sliders","slider_show","id","opts","arguments","length","undefined","NS","CLS_FRAME","CLS_SLIDES","CLS_VISIBLE","CLS_PRE_DISPLAY","CLS_DISPLAY","CLS_START","CLS_VIEW","CLS_PAUSE","OFFSET_VIEW","root","document","getElementById","getElementsByClassName","effectType","timeDur","timeTran","randomTiming","bgVisible","sideVisible","querySelector","style","overflow","slides","Array","prototype","slice","call","querySelectorAll","size","pics","effect","onTransitionEnd","hasVideo","resizeListeners","onResize","fn","doFirst","push","throttle","onLoad","readyState","addEventListener","setTimeout","initResizeEventHandler","l","passive","isRunning","run","requestAnimationFrame","asyncTimeout","ms","res","tid","set","Promise","r","async","clear","clearTimeout","initViewportDetection","cls","offset","IntersectionObserver","es","e","classList","isIntersecting","rootMargin","observe","visibilityState","getBoundingClientRect","h","innerHeight","top","bottom","add","remove","CLS_BGS","bgs","initBackgrounds","time","frame","createElement","insertBefore","firstChild","i","sl","bg","img","backgroundImage","src","transitionDuration","appendChild","transitionBackgrounds","idx","CLS_PREV","CLS_NEXT","CLS_ACTIVE","DX_FLICK","initButtons","transitionFn","prevBtn","nextBtn","display","prevFn","nextFn","dataset","disabled","ontouchstart","_initFlick","sts","prev","next","px","touches","pageX","x","changedTouches","_setCommonFlickProcess","btn","which","cancelable","preventDefault","CLS_RIVETS","CLS_RIVET","rivets","initRivets","rs","dir","className","transitionRivets","thumbs","initThumbnails","it","transitionThumbnails","t","CLS_SLIDE_CNT","CLS_SLIDE_IDX","slideCntElms","slideIdxElms","initIndicators","elm","innerHTML","transitionIndicators","CLS_CAP","caps","createCaption","c","contains","caption","ds","d","_wrapText","_wrapDiv","childNodes","cs","nodeType","str","nodeValue","trim","span","createTextNode","parentNode","replaceChild","tags","css","from","tagName","div","removeChild","onResizeCaption","innerWidth","preDisplayCaption","_updateCaptionClass","displayCaption","TransitionSlide","constructor","tranTime","this","_size","_sls","_time","transform","opacity","transition","TransitionScroll","_cur","_curPsd","_doing","_queue","ps","_calcPosition","cur","curPsd","_doTransition","shift","curIdx","curIdxPsd","idxPsd","_shift","_getTransition","Math","floor","curPs","tf","lenPsd","abs","hs","ceil","j","TransitionFade","pointerEvents","CLS_PIC","CLS_DUAL","CLS_SCROLL","RANDOM_RATE","PictureImage","p","imgs","_createImage","imgSrcset","imgSizes","imgSub","imgSubSrcset","imgSubSizes","srcset","sizes","getElement","isCur","preDisplay","getDuration","doRandom","dt","random","CLS_VIDEO","PictureVideo","vs","v","_initializeVideo","video","s","setAttribute","muted","playsinline","ar","clientWidth","clientHeight","play","pause","currentTime","duration","arFrame","tryResizeVideo","onResizeVideo","initImages","cloneSlides","scroll","isVideo","finish","nsl","cloneNode","navigator","maxTouchPoints","m","pointerType","once","console","log","stStep","last","stReserve","getIdxDir","performance","now","step","fs","move"],"mappings":"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","file":"show.min.js","sourcesContent":["/**\n * Gida Slider - Show\n *\n * @author Takuto Yanagida\n * @version 2022-09-09\n */\n\n\nwindow.GIDA = window['GIDA'] ?? {};\n\nwindow.GIDA.sliders = window.GIDA['sliders'] ?? {};\n\nwindow.GIDA.slider_show = function (id, opts = {}) {\n\tconst NS              = 'gida-slider-show';\n\tconst CLS_FRAME       = NS + '-frame';\n\tconst CLS_SLIDES      = NS + '-slides';\n\tconst CLS_VISIBLE     = 'visible';\n\tconst CLS_PRE_DISPLAY = 'pre-display';\n\tconst CLS_DISPLAY     = 'display';\n\tconst CLS_START       = 'start';\n\tconst CLS_VIEW        = 'view';\n\tconst CLS_PAUSE       = 'pause';\n\tconst OFFSET_VIEW     = 100;\n\n\tconst root = id ? document.getElementById(id) : document.getElementsByClassName(NS)[0];\n\tif (!root) return;\n\n\tconst effectType   = opts['effect_type']        ?? 'slide';  // 'scroll' or 'fade'\n\tconst timeDur      = opts['duration_time']      ?? 8;  // [second]\n\tconst timeTran     = opts['transition_time']    ?? 1;  // [second]\n\tconst randomTiming = opts['random_timing']      ?? false;\n\tlet bgVisible      = opts['background_visible'] ?? true;\n\tlet sideVisible    = opts['side_slide_visible'] ?? false;\n\n\tif (effectType !== 'scroll') sideVisible = false;\n\tif (sideVisible) {\n\t\tbgVisible = false;\n\t\tconst ss = root.querySelector('.' + CLS_SLIDES);\n\t\tss.style.overflow = 'visible';\n\t}\n\n\tconst slides = Array.prototype.slice.call(root.querySelectorAll(`.${CLS_SLIDES} > li`));\n\tconst size   = slides.length;\n\tconst pics   = [];\n\tlet effect   = null;\n\n\tlet onTransitionEnd = null;\n\tlet hasVideo        = false;\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t/**\n\t * Common Functions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-08-01\n\t */\n\t\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tfunction onLoad(fn) {\n\t\tif ('loading' === document.readyState) {\n\t\t\tdocument.addEventListener('DOMContentLoaded', fn);\n\t\t} else {\n\t\t\tsetTimeout(fn, 0);\n\t\t}\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction initResizeEventHandler() {\n\t\twindow.addEventListener('resize', () => { for (const l of resizeListeners) l(); }, { passive: true });\n\t}\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\tfunction run() {\n\t\t\tisRunning = false;\n\t\t\tfn();\n\t\t}\n\t\treturn () => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(run);\n\t\t};\n\t}\n\t\n\tfunction asyncTimeout(ms, fn = () => { }) {\n\t\tlet tid = null;\n\t\tlet res;\n\t\treturn {\n\t\t\tset: () => new Promise((r) => {\n\t\t\t\tres = r\n\t\t\t\ttid = setTimeout(async () => {\n\t\t\t\t\ttid = null;\n\t\t\t\t\tawait fn();\n\t\t\t\t\tr();\n\t\t\t\t}, ms);\n\t\t\t}),\n\t\t\tclear: () => {\n\t\t\t\tif (tid) {\n\t\t\t\t\tclearTimeout(tid);\n\t\t\t\t\ttid = null;\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction initViewportDetection(root, cls, offset) {\n\t\tconst io = new IntersectionObserver((es) => {\n\t\t\tfor (const e of es) root.classList[e.isIntersecting ? 'add' : 'remove'](cls);\n\t\t}, { rootMargin: `${offset}px 0px` });\n\t\tio.observe(root);\n\t\n\t\tdocument.addEventListener('visibilitychange', () => {\n\t\t\tconst v = ('hidden' !== document.visibilityState);\n\t\t\tif (v) {\n\t\t\t\tconst r = root.getBoundingClientRect();\n\t\t\t\tconst h = window.innerHeight;\n\t\t\t\tif ((0 < r.top && r.top < h) || (0 < r.bottom && r.bottom < h)) {\n\t\t\t\t\troot.classList.add(cls);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\troot.classList.remove(cls);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/**\n\t * Backgrounds\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-07-09\n\t */\n\t\n\t\n\tconst CLS_BGS = NS + '-backgrounds';\n\t\n\tconst bgs = [];\n\t\n\tfunction initBackgrounds(size, root, slides, time) {\n\t\tconst frame = document.createElement('div');\n\t\tframe.classList.add(CLS_BGS);\n\t\troot.insertBefore(frame, root.firstChild);\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst bg  = document.createElement('div');\n\t\t\tconst img = sl.querySelector(':scope img');\n\t\t\tif (img) {\n\t\t\t\tbg.style.backgroundImage    = `url('${img.src}')`;\n\t\t\t\tbg.style.transitionDuration = `${time * 2}s`;\n\t\t\t}\n\t\t\tframe.appendChild(bg);\n\t\t\tbgs.push(bg);\n\t\t}\n\t}\n\t\n\tfunction transitionBackgrounds(idx, size) {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tif (!bgs[i]) continue;\n\t\t\tbgs[i].classList[i === idx ? 'add' : 'remove'](CLS_VISIBLE);\n\t\t}\n\t}\n\t\n\t/**\n\t * Buttons\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-07-28\n\t */\n\t\n\t\n\tconst CLS_PREV   = NS + '-prev';\n\tconst CLS_NEXT   = NS + '-next';\n\tconst CLS_ACTIVE = 'active';\n\tconst DX_FLICK   = 32;\n\t\n\tfunction initButtons(size, root, transitionFn) {\n\t\tconst frame   = root.getElementsByClassName(CLS_FRAME)[0];\n\t\tconst prevBtn = root.getElementsByClassName(CLS_PREV)[0];\n\t\tconst nextBtn = root.getElementsByClassName(CLS_NEXT)[0];\n\t\tif (size === 1) {\n\t\t\tif (prevBtn) prevBtn.style.display = 'none';\n\t\t\tif (nextBtn) nextBtn.style.display = 'none';\n\t\t\treturn;\n\t\t}\n\t\tconst prevFn = async () => { await transitionFn(null, -1); };\n\t\tconst nextFn = async () => { await transitionFn(null,  1); };\n\t\tif (prevBtn) prevBtn.addEventListener('click', async () => { frame.dataset.disabled = true; await prevFn(); frame.dataset.disabled = false; });\n\t\tif (nextBtn) nextBtn.addEventListener('click', async () => { frame.dataset.disabled = true; await nextFn(); frame.dataset.disabled = false; });\n\t\tif (window.ontouchstart === null) _initFlick(frame, prevFn, nextFn, prevBtn, nextBtn);\n\t}\n\t\n\tfunction _initFlick(frame, prevFn, nextFn, prevBtn, nextBtn) {\n\t\tconst sts = { prev: null, next: null };\n\t\tlet px;\n\t\n\t\tframe.addEventListener('touchstart', e => { px = e.touches[0].pageX; });\n\t\tframe.addEventListener('touchmove', e => {\n\t\t\tif (px === null) return;\n\t\t\tconst x = e.changedTouches[0].pageX;\n\t\n\t\t\tif (px + DX_FLICK < x) {  // ->\n\t\t\t\tprevFn();\n\t\t\t\t_setCommonFlickProcess(e, prevBtn, 'prev', sts);\n\t\t\t\tpx = null;\n\t\t\t} else if (x < px - DX_FLICK) {  // <-\n\t\t\t\tnextFn();\n\t\t\t\t_setCommonFlickProcess(e, nextBtn, 'next', sts);\n\t\t\t\tpx = null;\n\t\t\t}\n\t\t});\n\t\tframe.addEventListener('touchend', () => { px = null; });\n\t}\n\t\n\tfunction _setCommonFlickProcess(e, btn, which, sts) {\n\t\tif (e.cancelable === true) e.preventDefault();\n\t\tif (!btn) return;\n\t\tclearTimeout(sts[which]);\n\t\tbtn.classList.add(CLS_ACTIVE);\n\t\tsts[which] = setTimeout(() => { btn.classList.remove(CLS_ACTIVE); }, timeTran * 1000 / 2);\n\t}\n\t\n\t/**\n\t * Rivets\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t */\n\t\n\t\n\tconst CLS_RIVETS = NS + '-rivets';\n\tconst CLS_RIVET  = NS + '-rivet';\n\t\n\tconst rivets = [];\n\t\n\tfunction initRivets(size, root, transitionFn) {\n\t\tif (size === 1) return;\n\t\tconst rs = root.getElementsByClassName(CLS_RIVETS)[0];\n\t\tif (!rs) return;\n\t\tconst dir = size === 2 ? 1 : 0;\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst idx = i;\n\t\t\tconst r = document.createElement('span');\n\t\t\tr.id = id + '-rivet-' + idx;\n\t\t\tr.className = CLS_RIVET;\n\t\t\tr.addEventListener('click', () => { transitionFn(idx, dir); });\n\t\t\trs.appendChild(r);\n\t\t\trivets.push(r);\n\t\t}\n\t}\n\t\n\tfunction transitionRivets(idx) {\n\t\tfor (const r of rivets) r.classList.remove(CLS_VISIBLE);\n\t\tif (rivets[idx]) rivets[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t * Thumbnails\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t */\n\t\n\t\n\tconst thumbs = [];\n\t\n\tfunction initThumbnails(size) {\n\t\tif (size === 1) return;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst tid = id + '-' + i;\n\t\t\tlet it = document.querySelector('*[data-id=\"' + tid + '\"]');\n\t\t\tif (!it) it = document.getElementById(tid);\n\t\t\tthumbs.push(it);\n\t\t}\n\t}\n\t\n\tfunction transitionThumbnails(idx) {\n\t\tfor (const t of thumbs) {\n\t\t\tif (t) t.classList.remove(CLS_VISIBLE);\n\t\t}\n\t\tif (thumbs[idx]) thumbs[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t * Indicators\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-23\n\t */\n\t\n\t\n\tconst CLS_SLIDE_CNT = NS + '-slide-count';\n\tconst CLS_SLIDE_IDX = NS + '-slide-index';\n\t\n\tlet slideCntElms = [];\n\tlet slideIdxElms = [];\n\t\n\tfunction initIndicators(size, root) {\n\t\tslideCntElms = root.querySelectorAll('.' + CLS_SLIDE_CNT);\n\t\tslideIdxElms = root.querySelectorAll('.' + CLS_SLIDE_IDX);\n\t\tfor (const elm of slideCntElms) elm.innerHTML = size;\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = 1;\n\t}\n\t\n\tfunction transitionIndicators(idx) {\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = (idx + 1);\n\t}\n\t\n\t/**\n\t * Captions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-09-09\n\t */\n\t\n\t\n\tconst CLS_CAP = NS + '-caption';\n\t\n\tconst caps = [];\n\t\n\tfunction createCaption(sl, time) {\n\t\tconst c = sl.querySelector(':scope > div, :scope > a > div');\n\t\tif (c) {\n\t\t\tc.style.transitionDuration = time + 's';\n\t\t\tif (c.className === '') {\n\t\t\t\tc.classList.add(CLS_CAP);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t\tif (!c.classList.contains('line') && !c.classList.contains('circle')) c.classList.add('subtitle');\n\t\t\tif (c.classList.contains('line'))     c.dataset.caption = 'line';\n\t\t\tif (c.classList.contains('circle'))   c.dataset.caption = 'circle';\n\t\t\tif (c.classList.contains('subtitle')) c.dataset.caption = 'subtitle';\n\t\n\t\t\tconst ds = c.querySelectorAll(':scope > div');\n\t\t\tfor (const d of ds) _wrapText(d);\n\t\t\t_wrapText(c);\n\t\t\t_wrapDiv(c);\n\t\t}\n\t\tcaps.push(c);\n\t}\n\t\n\tfunction _wrapText(c) {\n\t\tfor (let i = 0; i < c.childNodes.length; i += 1) {\n\t\t\tconst cs = c.childNodes[i];\n\t\t\tif (cs.nodeType === 3/*TEXT_NODE*/) {\n\t\t\t\tconst str = cs.nodeValue.trim();\n\t\t\t\tif (str === '') continue;\n\t\t\t\tconst span = document.createElement('span');\n\t\t\t\tspan.appendChild(document.createTextNode(str));\n\t\t\t\tcs.parentNode.replaceChild(span, cs);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction _wrapDiv(c) {\n\t\tlet tags = [];\n\t\tconst css = Array.from(c.childNodes);\n\t\tfor (let cs of css) {\n\t\t\tif (cs.nodeType === 1/*ELEMENT_NODE*/) {\n\t\t\t\tif (cs.tagName === 'DIV') {\n\t\t\t\t\tif (tags.length) {\n\t\t\t\t\t\tconst div = document.createElement('div');\n\t\t\t\t\t\tfor (const t of tags) div.appendChild(c.removeChild(t));\n\t\t\t\t\t\tc.insertBefore(div, cs);\n\t\t\t\t\t\ttags.length = 0;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttags.push(cs);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (tags.length) {\n\t\t\tconst div = document.createElement('div');\n\t\t\tfor (const t of tags) div.appendChild(c.removeChild(t));\n\t\t\tc.appendChild(div);\n\t\t}\n\t}\n\t\n\tfunction onResizeCaption() {\n\t\tif (window.innerWidth < 600) {\n\t\t\tfor (const c of caps) {\n\t\t\t\tif (!c) continue;\n\t\t\t\tc.classList.remove(c.dataset.caption);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const c of caps) {\n\t\t\t\tif (!c) continue;\n\t\t\t\tc.classList.remove('subtitle');\n\t\t\t\tc.classList.add(c.dataset.caption);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction preDisplayCaption(idx, size) {\n\t\t_updateCaptionClass(idx, size, CLS_PRE_DISPLAY);\n\t}\n\t\n\tfunction displayCaption(idx, size) {\n\t\t_updateCaptionClass(idx, size, CLS_DISPLAY);\n\t}\n\t\n\tfunction _updateCaptionClass(idx, size, cls) {\n\t\tfor (let i = 0; i < caps.length; i += 1) {\n\t\t\tif (!caps[i]) continue;\n\t\t\tif ((i % size) === idx) caps[i].classList.add(cls);\n\t\t\telse caps[i].classList.remove(cls);\n\t\t}\n\t}\n\t/**\n\t * Slide Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t */\n\t\n\t\n\tclass TransitionSlide {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = 'translateX(' + (i ? 100 : 0) + '%)';\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\t\tthis._sls[i].style.transition = 'transform ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = (i <= idx) ? 'translateX(0%)' : 'translateX(100%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Scroll Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-09-09\n\t */\n\t\n\t\n\tclass TransitionScroll {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tthis._cur    = 0;\n\t\t\tthis._curPsd = 0;\n\t\t\tthis._doing  = false;\n\t\t\tthis._queue  = [];\n\t\n\t\t\tconst ps = this._calcPosition(0, 1);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity   = 1;\n\t\t\t\tthis._sls[i].style.transform = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tthis._queue.push((cur, curPsd) => this._doTransition(cur, curPsd, idx, dir));\n\t\t\tif (this._doing) return;\n\t\t\tthis._doing = true;\n\t\t\twhile (this._queue.length) {\n\t\t\t\t[this._cur, this._curPsd] = await this._queue.shift()(this._cur, this._curPsd);\n\t\t\t}\n\t\t\tthis._doing = false;\n\t\t}\n\t\n\t\tasync _doTransition(curIdx, curIdxPsd, idx, dir) {\n\t\t\tif (0 === dir && curIdx !== idx) {\n\t\t\t\tconst r = (curIdx < idx) ? idx - curIdx : idx + this._size - curIdx;\n\t\t\t\tconst l = (idx < curIdx) ? curIdx - idx : curIdx + this._size - idx;\n\t\t\t\tdir = (l < r) ? -1 : 1;\n\t\t\t}\n\t\t\tlet ps = this._calcPosition(curIdxPsd, dir);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.transition = '';\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t\tawait asyncTimeout(100).set();  // Wait\n\t\n\t\t\tlet d = 0;\n\t\t\tif (dir ===  1) d = idx - curIdx;\n\t\t\tif (dir === -1) d = curIdx - idx;\n\t\t\tif (d < 0) d += this._size;\n\t\n\t\t\tlet idxPsd = curIdxPsd;\n\t\t\tfor (let i = 0; i < d; i += 1) {\n\t\t\t\t[ps, idxPsd] = this._shift(ps, idxPsd, dir, this._time / d, this._getTransition(d, i));\n\t\t\t\tawait asyncTimeout(Math.floor(this._time * 1000 / d)).set();\n\t\t\t}\n\t\t\treturn [idx, idxPsd];\n\t\t}\n\t\n\t\t_getTransition(d, i) {\n\t\t\tif (d === 1) return 'ease';\n\t\t\tif (d === 2) {\n\t\t\t\tif (i === 0) return 'ease-in';\n\t\t\t\tif (i === 1) return 'ease-out';\n\t\t\t}\n\t\t\treturn 'linear';\n\t\t}\n\t\n\t\t_shift(curPs, curIdxPsd, dir, time, tf = 'ease') {\n\t\t\tconst lenPsd = this._sls.length;\n\t\n\t\t\tlet idxPsd = curIdxPsd + dir;\n\t\t\tif (lenPsd - 1 < idxPsd) idxPsd = 0;\n\t\t\tif (idxPsd < 0) idxPsd = lenPsd - 1;\n\t\n\t\t\tconst ps = this._calcPosition(idxPsd, dir);\n\t\n\t\t\tfor (let i = 0; i < lenPsd; i += 1) {\n\t\t\t\tconst t = (Math.abs(curPs[i] - ps[i]) === 1) ? `transform ${time}s ${tf}` : '';\n\t\t\t\tthis._sls[i].style.transition = t;\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${ps[i] * 100}%)`;\n\t\t\t}\n\t\t\treturn [ps, idxPsd];\n\t\t}\n\t\n\t\t_calcPosition(idxPsd, dir) {\n\t\t\tconst lenPsd = this._sls.length;\n\t\t\tconst ps     = new Array(lenPsd);\n\t\n\t\t\tconst hs = (dir !== -1) ? Math.ceil((lenPsd - 1) / 2) : Math.floor((lenPsd - 1) / 2);\n\t\t\tconst rs = lenPsd - 1 - hs;\n\t\n\t\t\tfor (let i = 1; i <= hs; i += 1) {\n\t\t\t\tlet j = idxPsd + i;\n\t\t\t\tif (lenPsd - 1 < j) j -= lenPsd;\n\t\t\t\tps[j] = i;\n\t\t\t}\n\t\t\tfor (let i = 1; i <= rs; i += 1) {\n\t\t\t\tlet j = idxPsd - i;\n\t\t\t\tif (j < 0) j += lenPsd;\n\t\t\t\tps[j] = -i;\n\t\t\t}\n\t\t\tps[idxPsd] = 0;\n\t\t\treturn ps;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Fade Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t */\n\t\n\t\n\tclass TransitionFade {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === 0) ? 1 : 0;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.transition = 'opacity ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === idx) ? 1 : 0;\n\t\t\t\tthis._sls[i].style.pointerEvents = (i === idx) ? 'auto' : 'none';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t}\n\t\n\t/**\n\t * Image Picture\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-09-09\n\t */\n\t\n\t\n\tconst CLS_PIC    = NS + '-picture';\n\tconst CLS_DUAL   = 'dual';\n\tconst CLS_SCROLL = 'scroll';\n\t\n\tconst RANDOM_RATE = 10;\n\t\n\tclass PictureImage {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_PIC);\n\t\t\tif (sl.classList.contains(CLS_SCROLL)) p.classList.add(CLS_SCROLL);\n\t\n\t\t\tconst imgs = sl.querySelectorAll(':scope > img, :scope > a > img');\n\t\t\tif (imgs.length) {\n\t\t\t\tp.appendChild(imgs[0]);\n\t\t\t\tif (1 < imgs.length) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(imgs[1]);\n\t\t\t\t}\n\t\t\t} else if (sl.dataset.img) {\n\t\t\t\tp.appendChild(this._createImage(sl.dataset.img, sl.dataset.imgSrcset ?? null, sl.dataset.imgSizes ?? null));\n\t\t\t\tif (sl.dataset.imgSub) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(this._createImage(sl.dataset.imgSub, sl.dataset.imgSubSrcset ?? null, sl.dataset.imgSubSizes ?? null));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_createImage(src, srcset, sizes) {\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.src = src;\n\t\t\tif (srcset) img.srcset = srcset;\n\t\t\tif (sizes)  img.sizes  = sizes;\n\t\t\treturn img;\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t}\n\t\n\t\tpreDisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_PRE_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_PRE_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\tif (!doRandom) return timeDur;\n\t\t\treturn dt * (1 + 0.01 * RANDOM_RATE * (1 - Math.random() * 2));\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Image Video\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-09-09\n\t */\n\t\n\t\n\tconst CLS_VIDEO = NS + '-video';\n\t\n\tclass PictureVideo {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_VIDEO);\n\t\n\t\t\tconst vs = sl.querySelectorAll(':scope > video, :scope > a > video');\n\t\t\tif (1 === vs.length) {\n\t\t\t\tconst v = vs[0];\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\t\t} else if (sl.dataset.video) {\n\t\t\t\tconst v = document.createElement('video');\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\n\t\t\t\tconst s = document.createElement('source');\n\t\t\t\ts.setAttribute('src', sl.dataset.video);\n\t\t\t\tv.appendChild(s);\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_initializeVideo(v) {\n\t\t\tv.muted = true;\n\t\t\tv.playsinline = true;\n\t\t\tv.setAttribute('muted', true);\n\t\t\tv.setAttribute('playsinline', true);\n\t\t\tv.addEventListener('loadedmetadata', () => {\n\t\t\t\tconst ar = v.clientWidth / v.clientHeight;\n\t\t\t\tthis.ar = (0 | (ar * 1000)) / 1000;\n\t\t\t});\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.v.setAttribute('autoplay', true);\n\t\t\t\tthis.v.play();\n\t\t\t\tif (size === 1) this.v.setAttribute('loop', true);\n\t\t\t}\n\t\t}\n\t\n\t\tpreDisplay(isCur) {\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (!isCur) {\n\t\t\t\tthis.v.pause();\n\t\t\t\tthis.v.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\treturn this.v.duration - timeTran;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif (!this.ar) return false;\n\t\t\tconst arFrame = this.p.clientWidth / this.p.clientHeight;\n\t\t\tif (this.ar < arFrame) {\n\t\t\t\tthis.v.classList.remove('height');\n\t\t\t\tthis.v.classList.add('width');\n\t\t\t} else {\n\t\t\t\tthis.v.classList.remove('width');\n\t\t\t\tthis.v.classList.add('height');\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\n\t}\n\t\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tinitImages();\n\tif (bgVisible) initBackgrounds(size, root, slides, timeTran);\n\n\tif (hasVideo) setTimeout(tryResizeVideo, 100);\n\tfunction tryResizeVideo() {\n\t\tconst finish = onResizeVideo();\n\t\tif (!finish) setTimeout(tryResizeVideo, 100);\n\t}\n\n\tconst frame = root.getElementsByClassName(CLS_FRAME)[0];\n\tif (0 < navigator.maxTouchPoints) {\n\t\tframe.addEventListener('pointerenter', (e) => {\n\t\t\tconst m = (e.pointerType === 'mouse') ? 'remove' : 'add';\n\t\t\tframe.classList[m]('touch');\n\t\t}, { once: true });\n\t}\n\n\tonLoad(() => {\n\t\tinitResizeEventHandler();\n\n\t\tinitButtons(size, root, transition);\n\t\tinitThumbnails(size);\n\t\tinitIndicators(size, root);\n\t\tinitRivets(size, root, transition);\n\n\t\tinitViewportDetection(root, CLS_VIEW, OFFSET_VIEW);\n\n\t\ttransition(0, 0);\n\t\tconsole.log(`Gida Slider - Show (#${id}): started`);\n\t\tsetTimeout(() => root.classList.add(CLS_START), 0);\n\t});\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction initImages() {\n\t\tif (effectType === 'scroll' && 1 < size && size < 5) {\n\t\t\tcloneSlides();\n\t\t\tif (size === 2) cloneSlides();\n\t\t}\n\t\tconst scroll = root.classList.contains(CLS_SCROLL);\n\t\tfor (const sl of slides) {\n\t\t\tif (scroll) sl.classList.add(CLS_SCROLL);\n\n\t\t\tsl.style.opacity = 0;  // for avoiding flickering slides on page loading\n\t\t\tcreateCaption(sl, timeTran);\n\t\t\tlet p = null;\n\t\t\tif (isVideo(sl)) {\n\t\t\t\tp = new PictureVideo(sl);\n\t\t\t\thasVideo = true;\n\t\t\t} else {\n\t\t\t\tp = new PictureImage(sl);\n\t\t\t}\n\t\t\tsl.insertBefore(p.getElement(), sl.firstChild);\n\t\t\tconst e = sl.querySelector('a') ?? sl;\n\t\t\te.insertBefore(p.getElement(), e.firstChild);\n\t\t\tpics.push(p);\n\t\t}\n\t\tif (hasVideo) onResize(onResizeVideo);\n\t\tonResize(onResizeCaption, true);\n\t\tswitch (effectType) {\n\t\t\tcase 'slide' : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t\tcase 'scroll': effect = new TransitionScroll(size, slides, timeTran); break;\n\t\t\tcase 'fade'  : effect = new TransitionFade(size, slides, timeTran); break;\n\t\t\tdefault      : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t}\n\t}\n\n\tfunction isVideo(sl) {\n\t\tif (sl.dataset.video) return true;\n\t\tconst vs = sl.querySelectorAll(':scope > video, :scope > a > video');\n\t\treturn 0 < vs.length;\n\t}\n\n\tfunction onResizeVideo() {\n\t\tlet finish = true;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst p = pics[i];\n\t\t\tif (p instanceof PictureVideo) {\n\t\t\t\tif (!p.onResize()) finish = false;\n\t\t\t}\n\t\t}\n\t\treturn finish;\n\t}\n\n\tfunction cloneSlides() {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst nsl = sl.cloneNode(true);\n\t\t\tslides.push(nsl);\n\t\t\tsl.parentNode.appendChild(nsl);\n\t\t}\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tlet curIdx    = 0;\n\tlet stStep    = null;\n\tlet last      = 0;\n\tlet stReserve = null;\n\n\tasync function transition(idx, dir) {\n\t\t[idx, dir] = getIdxDir(idx, dir);\n\n\t\tconst t = window.performance.now();\n\t\tif (dir !== 0 && t - last < timeTran * 1000) {\n\t\t\tclearTimeout(stReserve);\n\t\t\tstReserve = setTimeout(() => transition(idx, dir), timeTran * 1000 - (t - last));\n\t\t\treturn;\n\t\t}\n\t\tlast = t;\n\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].preDisplay((i % size) === idx);\n\t\t}\n\t\tpreDisplayCaption(idx, size);\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].transition((i % size) === idx, size);\n\t\t}\n\t\ttransitionBackgrounds(idx, size);\n\t\ttransitionThumbnails(idx);\n\t\ttransitionIndicators(idx);\n\t\ttransitionRivets(idx);\n\n\t\tawait effect.transition(idx, dir);\n\t\tif (onTransitionEnd) onTransitionEnd();\n\t\tcurIdx = idx;\n\t\tdisplay(idx);\n\t}\n\n\tasync function display(idx) {\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].display((i % size) === idx);\n\t\t}\n\t\tdisplayCaption(idx, size);\n\t\tif (size === 1) return;\n\n\t\tconst dt = pics[idx].getDuration(timeDur, timeTran, randomTiming);\n\t\tif (stStep) stStep.clear();\n\t\tstStep = asyncTimeout(Math.ceil(dt * 1000), step);\n\t\tawait stStep.set();\n\t}\n\n\tasync function step() {\n\t\tif (root.classList.contains(CLS_VIEW) && !root.classList.contains(CLS_PAUSE)) {\n\t\t\ttransition(null, 1);\n\t\t} else {\n\t\t\tasyncTimeout(timeDur * 1000, step).set();\n\t\t}\n\t}\n\n\tfunction getIdxDir(idx, dir) {\n\t\tif (idx === null) {\n\t\t\tidx = curIdx + dir;\n\t\t\tif (size - 1 < idx) idx = 0;\n\t\t\tif (idx < 0) idx = size - 1;\n\t\t} else if (dir === 0 && curIdx !== idx) {\n\t\t\tconst r = (curIdx < idx) ? idx - curIdx : idx + size - curIdx;\n\t\t\tconst l = (idx < curIdx) ? curIdx - idx : curIdx + size - idx;\n\t\t\tdir = (l < r) ? -1 : 1;\n\t\t}\n\t\treturn [idx, dir];\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tconst fs = {\n\t\tmove: idx => transition(idx, size === 2 ? 1 : 0),\n\t\tnext: ()  => transition((curIdx === size - 1) ? 0          : (curIdx + 1),  1),\n\t\tprev: ()  => transition((curIdx === 0       ) ? (size - 1) : (curIdx - 1), -1),\n\n\t\tonTransitionEnd: fn => { onTransitionEnd = fn; }\n\t};\n\twindow.GIDA.sliders[id] = fs;\n\treturn fs;\n\n}\n"]}