{"version":3,"sources":["show.js"],"names":["window","GIDA","_rl","document","addEventListener","slider_show","id","opts","arguments","length","undefined","NS","CLS_FRAME","CLS_SLIDES","CLS_VISIBLE","CLS_DISPLAY","CLS_VIEW","CLS_PAUSE","OFFSET_VIEW","root","getElementById","getElementsByClassName","effectType","timeDur","timeTran","randomTiming","bgVisible","sideVisible","querySelector","style","overflow","slides","Array","prototype","slice","call","querySelectorAll","size","pics","effect","onTransitionEnd","hasVideo","resizeListeners","onResize","fn","doFirst","push","throttle","initResizeEventHandler","l","passive","isRunning","run","requestAnimationFrame","asyncTimeout","ms","res","tid","set","Promise","r","setTimeout","async","clear","clearTimeout","CLS_BGS","bgs","initBackgrounds","time","frame","createElement","classList","add","insertBefore","firstChild","i","sl","bg","img","backgroundImage","src","transitionDuration","appendChild","transitionBackgrounds","idx","CLS_PREV","CLS_NEXT","initButtons","transitionFn","prevBtn","nextBtn","display","prevFn","nextFn","dataset","disabled","ontouchstart","_initFlick","stX","mvX","mvY","e","touches","pageX","changedTouches","pageY","cancelable","preventDefault","CLS_RIVETS","CLS_RIVET","rivets","initRivets","rs","dir","className","transitionRivets","remove","thumbs","initThumbnails","it","transitionThumbnails","t","CLS_SLIDE_CNT","CLS_SLIDE_IDX","slideCntElms","slideIdxElms","initIndicators","elm","innerHTML","transitionIndicators","CLS_CAP","caps","createCaption","c","contains","caption","ds","d","_wrapText","_wrapDiv","childNodes","cs","nodeType","str","nodeValue","trim","span","createTextNode","parentNode","replaceChild","tags","css","from","tagName","div","removeChild","onResizeCaption","innerWidth","displayCaption","TransitionSlide","constructor","tranTime","this","_size","_sls","_time","transform","opacity","transition","TransitionScroll","_curIdx","_curIdxPsd","_curPos","_calcPosition","tf","shift","Math","floor","curPos","pos","abs","idxPsd","sizePsd","hs","ceil","j","TransitionFade","pointerEvents","CLS_PIC","CLS_DUAL","CLS_SCROLL","RANDOM_RATE","PictureImage","p","imgs","_createImage","imgSrcset","imgSizes","imgSub","imgSubSrcset","imgSubSizes","srcset","sizes","getElement","isCur","getDuration","doRandom","dt","random","CLS_VIDEO","PictureVideo","vs","v","_initializeVideo","video","s","setAttribute","muted","playsinline","ar","clientWidth","clientHeight","play","pause","currentTime","duration","arFrame","tryResizeVideo","onResizeVideo","onLoaded","IntersectionObserver","es","isIntersecting","rootMargin","observe","console","log","initImages","cloneSlides","scroll","isVideo","finish","nsl","cloneNode","curIdx","stStep","last","getIdxDir","performance","now","step","next","previous","slider_show_page","btn","click"],"mappings":"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","file":"show.min.js","sourcesContent":["/**\n * Gida Slider - Show\n *\n * @author Takuto Yanagida\n * @version 2022-07-19\n */\n\n\nwindow.GIDA = window['GIDA'] ?? {};\n\nwindow.GIDA._rl = 0;\ndocument.addEventListener('DOMContentLoaded', () => window.GIDA._rl = 1);\nwindow.addEventListener('load', () => window.GIDA._rl = 2);\n\nwindow.GIDA.slider_show = function (id, opts = {}) {\n\tconst NS          = 'gida-slider-show';\n\tconst CLS_FRAME   = NS + '-frame';\n\tconst CLS_SLIDES  = NS + '-slides';\n\tconst CLS_VISIBLE = 'visible';\n\tconst CLS_DISPLAY = 'display';\n\tconst CLS_VIEW    = 'view';\n\tconst CLS_PAUSE   = 'pause';\n\tconst OFFSET_VIEW = 100;\n\n\tconst root = id ? document.getElementById(id) : document.getElementsByClassName(NS)[0];\n\tif (!root) return;\n\n\tconst effectType   = opts['effect_type']        ?? 'slide';  // 'scroll' or 'fade'\n\tconst timeDur      = opts['duration_time']      ?? 8;  // [second]\n\tconst timeTran     = opts['transition_time']    ?? 1;  // [second]\n\tconst randomTiming = opts['random_timing']      ?? false;\n\tlet bgVisible      = opts['background_visible'] ?? true;\n\tlet sideVisible    = opts['side_slide_visible'] ?? false;\n\n\tif (effectType !== 'scroll') sideVisible = false;\n\tif (sideVisible) {\n\t\tbgVisible = false;\n\t\tconst ss = root.querySelector('.' + CLS_SLIDES);\n\t\tss.style.overflow = 'visible';\n\t}\n\n\tconst slides = Array.prototype.slice.call(root.querySelectorAll(`.${CLS_SLIDES} > li`));\n\tconst size   = slides.length;\n\tconst pics   = [];\n\tlet effect   = null;\n\n\tlet onTransitionEnd = null;\n\tlet hasVideo        = false;\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t/**\n\t * Common Functions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-07-19\n\t */\n\t\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction initResizeEventHandler() {\n\t\twindow.addEventListener('resize', () => { for (const l of resizeListeners) l(); }, { passive: true });\n\t}\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\tfunction run() {\n\t\t\tisRunning = false;\n\t\t\tfn();\n\t\t}\n\t\treturn () => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(run);\n\t\t};\n\t}\n\t\n\tfunction asyncTimeout(ms, fn = () => { }) {\n\t\tlet tid = null;\n\t\tlet res;\n\t\treturn {\n\t\t\tset: () => new Promise((r) => {\n\t\t\t\tres = r\n\t\t\t\ttid = setTimeout(async () => {\n\t\t\t\t\ttid = null;\n\t\t\t\t\tawait fn();\n\t\t\t\t\tr();\n\t\t\t\t}, ms);\n\t\t\t}),\n\t\t\tclear: () => {\n\t\t\t\tif (tid) {\n\t\t\t\t\tclearTimeout(tid);\n\t\t\t\t\ttid = null;\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t\n\t/**\n\t * Backgrounds\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-07-09\n\t */\n\t\n\t\n\tconst CLS_BGS = NS + '-backgrounds';\n\t\n\tconst bgs = [];\n\t\n\tfunction initBackgrounds(size, root, slides, time) {\n\t\tconst frame = document.createElement('div');\n\t\tframe.classList.add(CLS_BGS);\n\t\troot.insertBefore(frame, root.firstChild);\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst bg  = document.createElement('div');\n\t\t\tconst img = sl.querySelector(':scope img');\n\t\t\tif (img) {\n\t\t\t\tbg.style.backgroundImage    = `url('${img.src}')`;\n\t\t\t\tbg.style.transitionDuration = `${time * 2}s`;\n\t\t\t}\n\t\t\tframe.appendChild(bg);\n\t\t\tbgs.push(bg);\n\t\t}\n\t}\n\t\n\tfunction transitionBackgrounds(idx, size) {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tif (!bgs[i]) continue;\n\t\t\tbgs[i].classList[i === idx ? 'add' : 'remove'](CLS_VISIBLE);\n\t\t}\n\t}\n\t\n\t/**\n\t * Buttons\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-08-26\n\t */\n\t\n\t\n\tconst CLS_PREV = NS + '-prev';\n\tconst CLS_NEXT = NS + '-next';\n\t\n\tfunction initButtons(size, root, transitionFn) {\n\t\tconst frame   = root.getElementsByClassName(CLS_FRAME)[0];\n\t\tconst prevBtn = root.getElementsByClassName(CLS_PREV)[0];\n\t\tconst nextBtn = root.getElementsByClassName(CLS_NEXT)[0];\n\t\tif (size === 1) {\n\t\t\tif (prevBtn) prevBtn.style.display = 'none';\n\t\t\tif (nextBtn) nextBtn.style.display = 'none';\n\t\t\treturn;\n\t\t}\n\t\tconst prevFn = async () => { await transitionFn(null, -1); };\n\t\tconst nextFn = async () => { await transitionFn(null,  1); };\n\t\tif (prevBtn) prevBtn.addEventListener('click', async () => { frame.dataset.disabled = true; await prevFn(); frame.dataset.disabled = false; });\n\t\tif (nextBtn) nextBtn.addEventListener('click', async () => { frame.dataset.disabled = true; await nextFn(); frame.dataset.disabled = false; });\n\t\tif (window.ontouchstart === null) _initFlick(frame, prevFn, nextFn);\n\t}\n\t\n\tfunction _initFlick(frame, prevFn, nextFn) {\n\t\tconst DX = 50;\n\t\tlet stX, mvX, mvY;\n\t\n\t\tframe.addEventListener('touchstart', (e) => {\n\t\t\tstX = e.touches[0].pageX;\n\t\t\tmvX = mvY = null;\n\t\t});\n\t\tframe.addEventListener('touchmove', (e) => {\n\t\t\tmvX = e.changedTouches[0].pageX;\n\t\t\tmvY = e.changedTouches[0].pageY;\n\t\t});\n\t\tframe.addEventListener('touchend', (e) => {\n\t\t\tif (mvX === null || mvY === null) return;\n\t\t\tif (mvX < stX - DX) {  // <-\n\t\t\t\tnextFn();\n\t\t\t\tif (e.cancelable === true) e.preventDefault();\n\t\t\t} else if (stX + DX < mvX) {  // ->\n\t\t\t\tprevFn();\n\t\t\t\tif (e.cancelable === true) e.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/**\n\t * Rivets\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t */\n\t\n\t\n\tconst CLS_RIVETS = NS + '-rivets';\n\tconst CLS_RIVET  = NS + '-rivet';\n\t\n\tconst rivets = [];\n\t\n\tfunction initRivets(size, root, transitionFn) {\n\t\tif (size === 1) return;\n\t\tconst rs = root.getElementsByClassName(CLS_RIVETS)[0];\n\t\tif (!rs) return;\n\t\tconst dir = size === 2 ? 1 : 0;\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst idx = i;\n\t\t\tconst r = document.createElement('span');\n\t\t\tr.id = id + '-rivet-' + idx;\n\t\t\tr.className = CLS_RIVET;\n\t\t\tr.addEventListener('click', () => { transitionFn(idx, dir); });\n\t\t\trs.appendChild(r);\n\t\t\trivets.push(r);\n\t\t}\n\t}\n\t\n\tfunction transitionRivets(idx) {\n\t\tfor (const r of rivets) r.classList.remove(CLS_VISIBLE);\n\t\tif (rivets[idx]) rivets[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t * Thumbnails\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t */\n\t\n\t\n\tconst thumbs = [];\n\t\n\tfunction initThumbnails(size) {\n\t\tif (size === 1) return;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst tid = id + '-' + i;\n\t\t\tlet it = document.querySelector('*[data-id=\"' + tid + '\"]');\n\t\t\tif (!it) it = document.getElementById(tid);\n\t\t\tthumbs.push(it);\n\t\t}\n\t}\n\t\n\tfunction transitionThumbnails(idx) {\n\t\tfor (const t of thumbs) {\n\t\t\tif (t) t.classList.remove(CLS_VISIBLE);\n\t\t}\n\t\tif (thumbs[idx]) thumbs[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t * Indicators\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-23\n\t */\n\t\n\t\n\tconst CLS_SLIDE_CNT = NS + '-slide-count';\n\tconst CLS_SLIDE_IDX = NS + '-slide-index';\n\t\n\tlet slideCntElms = [];\n\tlet slideIdxElms = [];\n\t\n\tfunction initIndicators(size, root) {\n\t\tslideCntElms = root.querySelectorAll('.' + CLS_SLIDE_CNT);\n\t\tslideIdxElms = root.querySelectorAll('.' + CLS_SLIDE_IDX);\n\t\tfor (const elm of slideCntElms) elm.innerHTML = size;\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = 1;\n\t}\n\t\n\tfunction transitionIndicators(idx) {\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = (idx + 1);\n\t}\n\t\n\t/**\n\t * Captions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-08-25\n\t */\n\t\n\t\n\tconst CLS_CAP = NS + '-caption';\n\t\n\tconst caps = [];\n\t\n\tfunction createCaption(sl, time) {\n\t\tconst c = sl.querySelector(':scope > div, :scope > a > div');\n\t\tif (c) {\n\t\t\tc.style.transitionDuration = time + 's';\n\t\t\tif (c.className === '') {\n\t\t\t\tc.classList.add(CLS_CAP);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t\tif (!c.classList.contains('line') && !c.classList.contains('circle')) c.classList.add('subtitle');\n\t\t\tif (c.classList.contains('line'))     c.dataset.caption = 'line';\n\t\t\tif (c.classList.contains('circle'))   c.dataset.caption = 'circle';\n\t\t\tif (c.classList.contains('subtitle')) c.dataset.caption = 'subtitle';\n\t\n\t\t\tconst ds = c.querySelectorAll(':scope > div');\n\t\t\tfor (const d of ds) _wrapText(d);\n\t\t\t_wrapText(c);\n\t\t\t_wrapDiv(c);\n\t\t}\n\t\tcaps.push(c);\n\t}\n\t\n\tfunction _wrapText(c) {\n\t\tfor (let i = 0; i < c.childNodes.length; i += 1) {\n\t\t\tconst cs = c.childNodes[i];\n\t\t\tif (cs.nodeType === 3/*TEXT_NODE*/) {\n\t\t\t\tconst str = cs.nodeValue.trim();\n\t\t\t\tif (str === '') continue;\n\t\t\t\tconst span = document.createElement('span');\n\t\t\t\tspan.appendChild(document.createTextNode(str));\n\t\t\t\tcs.parentNode.replaceChild(span, cs);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction _wrapDiv(c) {\n\t\tlet tags = [];\n\t\tconst css = Array.from(c.childNodes);\n\t\tfor (let cs of css) {\n\t\t\tif (cs.nodeType === 1/*ELEMENT_NODE*/) {\n\t\t\t\tif (cs.tagName === 'DIV') {\n\t\t\t\t\tif (tags.length) {\n\t\t\t\t\t\tconst div = document.createElement('div');\n\t\t\t\t\t\tfor (const t of tags) div.appendChild(c.removeChild(t));\n\t\t\t\t\t\tc.insertBefore(div, cs);\n\t\t\t\t\t\ttags.length = 0;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttags.push(cs);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (tags.length) {\n\t\t\tconst div = document.createElement('div');\n\t\t\tfor (const t of tags) div.appendChild(c.removeChild(t));\n\t\t\tc.appendChild(div);\n\t\t}\n\t}\n\t\n\tfunction onResizeCaption() {\n\t\tif (window.innerWidth < 600) {\n\t\t\tfor (const c of caps) {\n\t\t\t\tif (!c) continue;\n\t\t\t\tc.classList.remove(c.dataset.caption);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const c of caps) {\n\t\t\t\tif (!c) continue;\n\t\t\t\tc.classList.remove('subtitle');\n\t\t\t\tc.classList.add(c.dataset.caption);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction displayCaption(idx, size) {\n\t\tfor (let i = 0; i < caps.length; i += 1) {\n\t\t\tif (!caps[i]) continue;\n\t\t\tif ((i % size) === idx) caps[i].classList.add(CLS_DISPLAY);\n\t\t\telse caps[i].classList.remove(CLS_DISPLAY);\n\t\t}\n\t}\n\t/**\n\t * Slide Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t */\n\t\n\t\n\tclass TransitionSlide {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = 'translateX(' + (i ? 100 : 0) + '%)';\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\t\tthis._sls[i].style.transition = 'transform ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = (i <= idx) ? 'translateX(0%)' : 'translateX(100%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Scroll Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-29\n\t */\n\t\n\t\n\tclass TransitionScroll {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size      = size;\n\t\t\tthis._sls       = slides;\n\t\t\tthis._time      = tranTime;\n\t\t\tthis._curIdx    = 0;\n\t\t\tthis._curIdxPsd = 0;\n\t\t\tthis._curPos    = this._calcPosition(0, 1);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\tthis._sls[i].style.transform = `translateX(${this._curPos[i] * 100}%)`;\n\t\t\t}\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tthis._curPos = this._calcPosition(this._curIdxPsd, dir);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.transition = '';\n\t\t\t\tthis._sls[i].style.transform  = 'translateX(' + 100 * this._curPos[i] + '%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(10).set();  // Wait\n\t\n\t\t\tlet d = 0;\n\t\t\tif (dir ===  1) d = idx - this._curIdx;\n\t\t\tif (dir === -1) d = this._curIdx - idx;\n\t\t\tif (d < 0) d += this._size;\n\t\n\t\t\tfor (let i = 0; i < d; i += 1) {\n\t\t\t\tconst tf = (d === 1) ? 'ease' : ((i === 0) ? 'ease-in' : ((i === d - 1) ? 'ease-out' : 'linear'));\n\t\t\t\tthis._curPos = this.shift(this._curPos, dir, this._time / d, tf);\n\t\t\t\tawait asyncTimeout(Math.floor(this._time * 1000 / d)).set();\n\t\t\t}\n\t\t\tthis._curIdx = idx;\n\t\t}\n\t\n\t\tshift(curPos, dir, time, tf = 'ease') {\n\t\t\tthis._curIdxPsd += dir;\n\t\t\tif (this._sls.length - 1 < this._curIdxPsd) this._curIdxPsd = 0;\n\t\t\tif (this._curIdxPsd < 0) this._curIdxPsd = this._sls.length - 1;\n\t\n\t\t\tconst pos = this._calcPosition(this._curIdxPsd, dir);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tconst t = (Math.abs(curPos[i] - pos[i]) === 1) ? `transform ${time}s ${tf}` : '';\n\t\t\t\tthis._sls[i].style.transition = t;\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${100 * pos[i]}%)`;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t\t_calcPosition(idxPsd, dir) {\n\t\t\tconst sizePsd = this._sls.length;\n\t\t\tconst pos = new Array(sizePsd);\n\t\t\tpos[idxPsd] = 0;\n\t\t\tconst hs = (dir !== -1) ? Math.ceil((sizePsd - 1) / 2) : Math.floor((sizePsd - 1) / 2);\n\t\t\tconst rs = sizePsd - 1 - hs;\n\t\t\tfor (let i = 1; i <= hs; i += 1) {\n\t\t\t\tlet j = idxPsd + i;\n\t\t\t\tif (sizePsd - 1 < j) j -= sizePsd;\n\t\t\t\tpos[j] = i;\n\t\t\t}\n\t\t\tfor (let i = 1; i <= rs; i += 1) {\n\t\t\t\tlet j = idxPsd - i;\n\t\t\t\tif (j < 0) j += sizePsd;\n\t\t\t\tpos[j] = -i;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Fade Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t */\n\t\n\t\n\tclass TransitionFade {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === 0) ? 1 : 0;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.transition = 'opacity ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === idx) ? 1 : 0;\n\t\t\t\tthis._sls[i].style.pointerEvents = (i === idx) ? 'auto' : 'none';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t}\n\t\n\t/**\n\t * Image Picture\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-08-25\n\t */\n\t\n\t\n\tconst CLS_PIC    = NS + '-picture';\n\tconst CLS_DUAL   = 'dual';\n\tconst CLS_SCROLL = 'scroll';\n\t\n\tconst RANDOM_RATE = 10;\n\t\n\tclass PictureImage {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_PIC);\n\t\t\tif (sl.classList.contains(CLS_SCROLL)) p.classList.add(CLS_SCROLL);\n\t\n\t\t\tconst imgs = sl.querySelectorAll(':scope > img, :scope > a > img');\n\t\t\tif (imgs.length) {\n\t\t\t\tp.appendChild(imgs[0]);\n\t\t\t\tif (1 < imgs.length) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(imgs[1]);\n\t\t\t\t}\n\t\t\t} else if (sl.dataset.img) {\n\t\t\t\tp.appendChild(this._createImage(sl.dataset.img, sl.dataset.imgSrcset ?? null, sl.dataset.imgSizes ?? null));\n\t\t\t\tif (sl.dataset.imgSub) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(this._createImage(sl.dataset.imgSub, sl.dataset.imgSubSrcset ?? null, sl.dataset.imgSubSizes ?? null));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_createImage(src, srcset, sizes) {\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.src = src;\n\t\t\tif (srcset) img.srcset = srcset;\n\t\t\tif (sizes)  img.sizes  = sizes;\n\t\t\treturn img;\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\tif (!doRandom) return timeDur;\n\t\t\treturn dt * (1 + 0.01 * RANDOM_RATE * (1 - Math.random() * 2));\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t * Image Video\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-08-25\n\t */\n\t\n\t\n\tconst CLS_VIDEO = NS + '-video';\n\t\n\tclass PictureVideo {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_VIDEO);\n\t\n\t\t\tconst vs = sl.querySelectorAll(':scope > video, :scope > a > video');\n\t\t\tif (1 === vs.length) {\n\t\t\t\tconst v = vs[0];\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\t\t} else if (sl.dataset.video) {\n\t\t\t\tconst v = document.createElement('video');\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\n\t\t\t\tconst s = document.createElement('source');\n\t\t\t\ts.setAttribute('src', sl.dataset.video);\n\t\t\t\tv.appendChild(s);\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_initializeVideo(v) {\n\t\t\tv.muted = true;\n\t\t\tv.playsinline = true;\n\t\t\tv.setAttribute('muted', true);\n\t\t\tv.setAttribute('playsinline', true);\n\t\t\tv.addEventListener('loadedmetadata', () => {\n\t\t\t\tconst ar = v.clientWidth / v.clientHeight;\n\t\t\t\tthis.ar = (0 | (ar * 1000)) / 1000;\n\t\t\t});\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.v.setAttribute('autoplay', true);\n\t\t\t\tthis.v.play();\n\t\t\t\tif (size === 1) this.v.setAttribute('loop', true);\n\t\t\t}\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (!isCur) {\n\t\t\t\tthis.v.pause();\n\t\t\t\tthis.v.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\treturn this.v.duration - timeTran;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif (!this.ar) return false;\n\t\t\tconst arFrame = this.p.clientWidth / this.p.clientHeight;\n\t\t\tif (this.ar < arFrame) {\n\t\t\t\tthis.v.classList.remove('height');\n\t\t\t\tthis.v.classList.add('width');\n\t\t\t} else {\n\t\t\t\tthis.v.classList.remove('width');\n\t\t\t\tthis.v.classList.add('height');\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\n\t}\n\t\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tinitImages();\n\tif (bgVisible) initBackgrounds(size, root, slides, timeTran);\n\n\tif (hasVideo) setTimeout(tryResizeVideo, 100);\n\tfunction tryResizeVideo() {\n\t\tconst finish = onResizeVideo();\n\t\tif (!finish) setTimeout(tryResizeVideo, 100);\n\t}\n\n\tfunction onLoaded() {\n\t\tinitResizeEventHandler();\n\n\t\tinitButtons(size, root, transition);\n\t\tinitThumbnails(size);\n\t\tinitIndicators(size, root);\n\t\tinitRivets(size, root, transition);\n\n\t\tconst io = new IntersectionObserver((es) => {\n\t\t\tfor (const e of es) root.classList[e.isIntersecting ? 'add' : 'remove'](CLS_VIEW);\n\t\t}, { rootMargin: `${OFFSET_VIEW}px 0px` });\n\t\tio.observe(root);\n\n\t\ttransition(0, 0);\n\t\tconsole.log(`Gida Slider - Show (#${id}): started`)\n\t}\n\tif (2 === window.GIDA._rl) {\n\t\tsetTimeout(onLoaded, 0);\n\t} else if (1 === window.GIDA._rl) {\n\t\twindow.addEventListener('load', onLoaded);\n\t} else {\n\t\tdocument.addEventListener('DOMContentLoaded', onLoaded);\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction initImages() {\n\t\tif (effectType === 'scroll' && 1 < size && size < 5) {\n\t\t\tcloneSlides();\n\t\t\tif (size === 2) cloneSlides();\n\t\t}\n\t\tconst scroll = root.classList.contains(CLS_SCROLL);\n\t\tfor (const sl of slides) {\n\t\t\tif (scroll) sl.classList.add(CLS_SCROLL);\n\n\t\t\tsl.style.opacity = 0;  // for avoiding flickering slides on page loading\n\t\t\tcreateCaption(sl, timeTran);\n\t\t\tlet p = null;\n\t\t\tif (isVideo(sl)) {\n\t\t\t\tp = new PictureVideo(sl);\n\t\t\t\thasVideo = true;\n\t\t\t} else {\n\t\t\t\tp = new PictureImage(sl);\n\t\t\t}\n\t\t\tsl.insertBefore(p.getElement(), sl.firstChild);\n\t\t\tconst e = sl.querySelector('a') ?? sl;\n\t\t\te.insertBefore(p.getElement(), e.firstChild);\n\t\t\tpics.push(p);\n\t\t}\n\t\tif (hasVideo) onResize(onResizeVideo);\n\t\tonResize(onResizeCaption, true);\n\t\tswitch (effectType) {\n\t\t\tcase 'slide' : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t\tcase 'scroll': effect = new TransitionScroll(size, slides, timeTran); break;\n\t\t\tcase 'fade'  : effect = new TransitionFade(size, slides, timeTran); break;\n\t\t\tdefault      : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t}\n\t}\n\n\tfunction isVideo(sl) {\n\t\tif (sl.dataset.video) return true;\n\t\tconst vs = sl.querySelectorAll(':scope > video, :scope > a > video');\n\t\treturn 0 < vs.length;\n\t}\n\n\tfunction onResizeVideo() {\n\t\tlet finish = true;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst p = pics[i];\n\t\t\tif (p instanceof PictureVideo) {\n\t\t\t\tif (!p.onResize()) finish = false;\n\t\t\t}\n\t\t}\n\t\treturn finish;\n\t}\n\n\tfunction cloneSlides() {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst nsl = sl.cloneNode(true);\n\t\t\tslides.push(nsl);\n\t\t\tsl.parentNode.appendChild(nsl);\n\t\t}\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tlet curIdx = 0;\n\tlet stStep = null;\n\tlet last   = 0;\n\n\tasync function transition(idx, dir) {\n\t\t[idx, dir] = getIdxDir(idx, dir);\n\n\t\tconst t = window.performance.now();\n\t\tif (dir !== 0 && t - last < timeTran * 1000) return;\n\t\tlast = t;\n\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].transition((i % size) === idx, size);\n\t\t}\n\t\ttransitionBackgrounds(idx, size);\n\t\ttransitionThumbnails(idx);\n\t\ttransitionIndicators(idx);\n\t\ttransitionRivets(idx);\n\n\t\tawait effect.transition(idx, dir);\n\t\tif (onTransitionEnd) onTransitionEnd();\n\t\tcurIdx = idx;\n\t\tdisplay(idx);\n\t}\n\n\tasync function display(idx) {\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].display((i % size) === idx);\n\t\t}\n\t\tdisplayCaption(idx, size);\n\t\tif (size === 1) return;\n\n\t\tconst dt = pics[idx].getDuration(timeDur, timeTran, randomTiming);\n\t\tif (stStep) stStep.clear();\n\t\tstStep = asyncTimeout(Math.ceil(dt * 1000), step);\n\t\tawait stStep.set();\n\t}\n\n\tasync function step() {\n\t\tif (root.classList.contains(CLS_VIEW) && !root.classList.contains(CLS_PAUSE)) {\n\t\t\ttransition(null, 1);\n\t\t} else {\n\t\t\tasyncTimeout(timeDur * 1000, step).set();\n\t\t}\n\t}\n\n\tfunction getIdxDir(idx, dir) {\n\t\tif (idx === null) {\n\t\t\tidx = curIdx + dir;\n\t\t\tif (size - 1 < idx) idx = 0;\n\t\t\tif (idx < 0) idx = size - 1;\n\t\t} else if (dir === 0) {\n\t\t\tif (curIdx < idx) {\n\t\t\t\tdir = 1;\n\t\t\t\tif ((curIdx - (idx - size)) < (idx - curIdx)) dir = -1;\n\t\t\t}\n\t\t\tif (idx < curIdx) {\n\t\t\t\tdir = -1;\n\t\t\t\tif (((idx + size) - curIdx) < (curIdx - idx)) dir = 1;\n\t\t\t}\n\t\t}\n\t\treturn [idx, dir];\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\treturn {\n\t\tnext           : () => { transition((curIdx === size - 1) ? 0   : (curIdx + 1),  1); },\n\t\tprevious       : () => { transition((curIdx === 0) ? (size - 1) : (curIdx - 1), -1); },\n\t\tonTransitionEnd: (fn) => { onTransitionEnd = fn; }\n\t};\n\n}\n\nwindow.GIDA.slider_show_page = function (id, idx) {\n\tconst btn = document.getElementById(id + '-rivet-' + idx);\n\tif (btn) btn.click();\n}\n"]}