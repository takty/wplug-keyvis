{"version":3,"sources":["show.js"],"names":["window","GIDA","slider_show","id","opts","NS","CLS_SLIDES","CLS_VISIBLE","CLS_DISPLAY","CLS_VIEW","root","document","getElementById","getElementsByClassName","effectType","timeDur","timeTran","randomTiming","bgVisible","sideVisible","querySelector","style","overflow","slides","Array","prototype","slice","call","querySelectorAll","size","length","pics","effect","onTransitionEnd","hasVideo","resizeListeners","onResize","fn","doFirst","push","isRunning","run","requestAnimationFrame","throttle","asyncTimeout","ms","res","tid","set","Promise","r","setTimeout","async","clear","clearTimeout","addEventListener","l","passive","bgs","rivets","thumbs","slideCntElms","slideIdxElms","caps","createCaption","sl","time","c","transitionDuration","className","classList","add","contains","dataset","caption","ds","d","_wrapText","tags","css","from","childNodes","cs","nodeType","tagName","div","createElement","t","appendChild","removeChild","insertBefore","_wrapDiv","i","str","nodeValue","trim","span","createTextNode","parentNode","replaceChild","onResizeCaption","innerWidth","remove","TransitionSlide","constructor","tranTime","this","_size","_sls","_time","transform","opacity","transition","[object Object]","idx","dir","TransitionScroll","_curIdx","_curIdxPsd","_curPos","_calcPosition","tf","shift","Math","floor","curPos","pos","abs","idxPsd","sizePsd","hs","ceil","rs","j","TransitionFade","pointerEvents","CLS_DUAL","CLS_SCROLL","PictureImage","p","imgs","img","_createImage","imgSrcset","imgSizes","imgSub","imgSubSrcset","imgSubSizes","src","srcset","sizes","getElement","isCur","display","getDuration","doRandom","dt","random","PictureVideo","vs","v","_initializeVideo","video","s","setAttribute","muted","playsinline","ar","clientWidth","clientHeight","play","pause","currentTime","duration","arFrame","isVideo","onResizeVideo","finish","nsl","cloneNode","cloneSlides","scroll","firstChild","e","initImages","frame","bg","imgLeft","backgroundImage","initBackgrounds","transitionFn","prevBtn","nextBtn","prevFn","nextFn","disabled","ontouchstart","DX","stX","mvX","mvY","touches","pageX","changedTouches","pageY","cancelable","preventDefault","_initFlick","initButtons","it","initThumbnails","elm","innerHTML","initIndicators","initRivets","IntersectionObserver","es","isIntersecting","rootMargin","observe","tryResizeVideo","curIdx","stStep","last","getIdxDir","performance","now","transitionBackgrounds","transitionThumbnails","transitionIndicators","transitionRivets","displayCaption","step","next","previous","slider_show_page","btn","click"],"mappings":"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","file":"show.min.js","sourcesContent":["/**\n *\n * Gida Slider - Show (JS)\n *\n * @author Takuto Yanagida\n * @version 2021-08-25\n *\n */\n\n\nwindow.GIDA = window['GIDA'] ?? {};\n\n\nwindow.GIDA.slider_show = function (id, opts = {}) {\n\tconst NS          = 'gida-slider-show';\n\tconst CLS_FRAME   = NS + '-frame';\n\tconst CLS_SLIDES  = NS + '-slides';\n\tconst CLS_VISIBLE = 'visible';\n\tconst CLS_DISPLAY = 'display';\n\tconst CLS_VIEW    = 'view';\n\tconst CLS_PAUSE   = 'pause';\n\tconst OFFSET_VIEW = 100;\n\n\tconst root = id ? document.getElementById(id) : document.getElementsByClassName(NS)[0];\n\tif (!root) return;\n\n\tconst effectType   = opts['effect_type']           ?? 'slide';\n\tconst timeDur      = opts['duration_time']         ?? 8;  // [second]\n\tconst timeTran     = opts['transition_time']       ?? 1;  // [second]\n\tconst randomTiming = opts['is_random_timing']      ?? false;\n\tlet bgVisible      = opts['is_background_visible'] ?? true;\n\tlet sideVisible    = opts['is_side_slide_visible'] ?? false;\n\n\tif (effectType !== 'scroll') sideVisible = false;\n\tif (sideVisible) {\n\t\tbgVisible = false;\n\t\tconst ss = root.querySelector('.' + CLS_SLIDES);\n\t\tss.style.overflow = 'visible';\n\t}\n\n\tconst slides = Array.prototype.slice.call(root.querySelectorAll(`.${CLS_SLIDES} > li`));\n\tconst size   = slides.length;\n\tconst pics   = [];\n\tlet effect   = null;\n\n\tlet onTransitionEnd = null;\n\tlet hasVideo        = false;\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t/**\n\t *\n\t * Common Functions (JS)\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-30\n\t *\n\t */\n\t\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => { for (const l of resizeListeners) l(); }, { passive: true });\n\t});\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\tfunction run() {\n\t\t\tisRunning = false;\n\t\t\tfn();\n\t\t}\n\t\treturn () => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(run);\n\t\t};\n\t}\n\t\n\tfunction asyncTimeout(ms, fn = () => { }) {\n\t\tlet tid = null;\n\t\tlet res;\n\t\treturn {\n\t\t\tset: () => new Promise((r) => {\n\t\t\t\tres = r\n\t\t\t\ttid = setTimeout(async () => {\n\t\t\t\t\ttid = null;\n\t\t\t\t\tawait fn();\n\t\t\t\t\tr();\n\t\t\t\t}, ms);\n\t\t\t}),\n\t\t\tclear: () => {\n\t\t\t\tif (tid) {\n\t\t\t\t\tclearTimeout(tid);\n\t\t\t\t\ttid = null;\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t\n\t/**\n\t *\n\t * Backgrounds\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_BGS = NS + '-backgrounds';\n\t\n\tconst bgs = [];\n\t\n\tfunction initBackgrounds(size, root, slides, time) {\n\t\tconst frame = document.createElement('div');\n\t\tframe.classList.add(CLS_BGS);\n\t\troot.insertBefore(frame, root.firstChild);\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst bg  = document.createElement('div');\n\t\t\tconst img = sl.dataset.img ?? sl.dataset.imgLeft;\n\t\t\tif (img) {\n\t\t\t\tbg.style.backgroundImage    = `url('${img}')`;\n\t\t\t\tbg.style.transitionDuration = `${time * 2}s`;\n\t\t\t}\n\t\t\tframe.appendChild(bg);\n\t\t\tbgs.push(bg);\n\t\t}\n\t}\n\t\n\tfunction transitionBackgrounds(idx, size) {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tif (!bgs[i]) continue;\n\t\t\tbgs[i].classList[i === idx ? 'add' : 'remove'](CLS_VISIBLE);\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Buttons\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-08-26\n\t *\n\t */\n\t\n\t\n\tconst CLS_PREV = NS + '-prev';\n\tconst CLS_NEXT = NS + '-next';\n\t\n\tfunction initButtons(size, root, transitionFn) {\n\t\tconst frame   = root.getElementsByClassName(CLS_FRAME)[0];\n\t\tconst prevBtn = root.getElementsByClassName(CLS_PREV)[0];\n\t\tconst nextBtn = root.getElementsByClassName(CLS_NEXT)[0];\n\t\tif (size === 1) {\n\t\t\tif (prevBtn) prevBtn.style.display = 'none';\n\t\t\tif (nextBtn) nextBtn.style.display = 'none';\n\t\t\treturn;\n\t\t}\n\t\tconst prevFn = async () => { await transitionFn(null, -1); };\n\t\tconst nextFn = async () => { await transitionFn(null,  1); };\n\t\tif (prevBtn) prevBtn.addEventListener('click', async () => { frame.dataset.disabled = true; await prevFn(); frame.dataset.disabled = false; });\n\t\tif (nextBtn) nextBtn.addEventListener('click', async () => { frame.dataset.disabled = true; await nextFn(); frame.dataset.disabled = false; });\n\t\tif (window.ontouchstart === null) _initFlick(frame, prevFn, nextFn);\n\t}\n\t\n\tfunction _initFlick(frame, prevFn, nextFn) {\n\t\tconst DX = 50;\n\t\tlet stX, mvX, mvY;\n\t\n\t\tframe.addEventListener('touchstart', (e) => {\n\t\t\tstX = e.touches[0].pageX;\n\t\t\tmvX = mvY = null;\n\t\t});\n\t\tframe.addEventListener('touchmove', (e) => {\n\t\t\tmvX = e.changedTouches[0].pageX;\n\t\t\tmvY = e.changedTouches[0].pageY;\n\t\t});\n\t\tframe.addEventListener('touchend', (e) => {\n\t\t\tif (mvX === null || mvY === null) return;\n\t\t\tif (mvX < stX - DX) {  // <-\n\t\t\t\tnextFn();\n\t\t\t\tif (e.cancelable === true) e.preventDefault();\n\t\t\t} else if (stX + DX < mvX) {  // ->\n\t\t\t\tprevFn();\n\t\t\t\tif (e.cancelable === true) e.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/**\n\t *\n\t * Rivets\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_RIVETS = NS + '-rivets';\n\tconst CLS_RIVET  = NS + '-rivet';\n\t\n\tconst rivets = [];\n\t\n\tfunction initRivets(size, root, transitionFn) {\n\t\tif (size === 1) return;\n\t\tconst rs = root.getElementsByClassName(CLS_RIVETS)[0];\n\t\tif (!rs) return;\n\t\tconst dir = size === 2 ? 1 : 0;\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst idx = i;\n\t\t\tconst r = document.createElement('span');\n\t\t\tr.id = id + '-rivet-' + idx;\n\t\t\tr.className = CLS_RIVET;\n\t\t\tr.addEventListener('click', () => { transitionFn(idx, dir); });\n\t\t\trs.appendChild(r);\n\t\t\trivets.push(r);\n\t\t}\n\t}\n\t\n\tfunction transitionRivets(idx) {\n\t\tfor (const r of rivets) r.classList.remove(CLS_VISIBLE);\n\t\tif (rivets[idx]) rivets[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t *\n\t * Thumbnails\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst thumbs = [];\n\t\n\tfunction initThumbnails(size) {\n\t\tif (size === 1) return;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst tid = id + '-' + i;\n\t\t\tlet it = document.querySelector('*[data-id=\"' + tid + '\"]');\n\t\t\tif (!it) it = document.getElementById(tid);\n\t\t\tthumbs.push(it);\n\t\t}\n\t}\n\t\n\tfunction transitionThumbnails(idx) {\n\t\tfor (const t of thumbs) {\n\t\t\tif (t) t.classList.remove(CLS_VISIBLE);\n\t\t}\n\t\tif (thumbs[idx]) thumbs[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t *\n\t * Indicators\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-23\n\t *\n\t */\n\t\n\t\n\tconst CLS_SLIDE_CNT = NS + '-slide-count';\n\tconst CLS_SLIDE_IDX = NS + '-slide-index';\n\t\n\tlet slideCntElms = [];\n\tlet slideIdxElms = [];\n\t\n\tfunction initIndicators(size, root) {\n\t\tslideCntElms = root.querySelectorAll('.' + CLS_SLIDE_CNT);\n\t\tslideIdxElms = root.querySelectorAll('.' + CLS_SLIDE_IDX);\n\t\tfor (const elm of slideCntElms) elm.innerHTML = size;\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = 1;\n\t}\n\t\n\tfunction transitionIndicators(idx) {\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = (idx + 1);\n\t}\n\t\n\t/**\n\t *\n\t * Captions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-08-25\n\t *\n\t */\n\t\n\t\n\tconst CLS_CAP = NS + '-caption';\n\t\n\tconst caps = [];\n\t\n\tfunction createCaption(sl, time) {\n\t\tconst c = sl.querySelector(':scope > div, :scope > a > div');\n\t\tif (c) {\n\t\t\tc.style.transitionDuration = time + 's';\n\t\t\tif (c.className === '') {\n\t\t\t\tc.classList.add(CLS_CAP);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t\tif (!c.classList.contains('line') && !c.classList.contains('circle')) c.classList.add('subtitle');\n\t\t\tif (c.classList.contains('line'))     c.dataset.caption = 'line';\n\t\t\tif (c.classList.contains('circle'))   c.dataset.caption = 'circle';\n\t\t\tif (c.classList.contains('subtitle')) c.dataset.caption = 'subtitle';\n\t\n\t\t\tconst ds = c.querySelectorAll(':scope > div');\n\t\t\tfor (const d of ds) _wrapText(d);\n\t\t\t_wrapText(c);\n\t\t\t_wrapDiv(c);\n\t\t}\n\t\tcaps.push(c);\n\t}\n\t\n\tfunction _wrapText(c) {\n\t\tfor (let i = 0; i < c.childNodes.length; i += 1) {\n\t\t\tconst cs = c.childNodes[i];\n\t\t\tif (cs.nodeType === 3/*TEXT_NODE*/) {\n\t\t\t\tconst str = cs.nodeValue.trim();\n\t\t\t\tif (str === '') continue;\n\t\t\t\tconst span = document.createElement('span');\n\t\t\t\tspan.appendChild(document.createTextNode(str));\n\t\t\t\tcs.parentNode.replaceChild(span, cs);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction _wrapDiv(c) {\n\t\tlet tags = [];\n\t\tconst css = Array.from(c.childNodes);\n\t\tfor (let cs of css) {\n\t\t\tif (cs.nodeType === 1/*ELEMENT_NODE*/) {\n\t\t\t\tif (cs.tagName === 'DIV') {\n\t\t\t\t\tif (tags.length) {\n\t\t\t\t\t\tconst div = document.createElement('div');\n\t\t\t\t\t\tfor (const t of tags) div.appendChild(c.removeChild(t));\n\t\t\t\t\t\tc.insertBefore(div, cs);\n\t\t\t\t\t\ttags.length = 0;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttags.push(cs);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (tags.length) {\n\t\t\tconst div = document.createElement('div');\n\t\t\tfor (const t of tags) div.appendChild(c.removeChild(t));\n\t\t\tc.appendChild(div);\n\t\t}\n\t}\n\t\n\tfunction onResizeCaption() {\n\t\tif (window.innerWidth < 600) {\n\t\t\tfor (const c of caps) {\n\t\t\t\tif (!c) continue;\n\t\t\t\tc.classList.remove(c.dataset.caption);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const c of caps) {\n\t\t\t\tif (!c) continue;\n\t\t\t\tc.classList.remove('subtitle');\n\t\t\t\tc.classList.add(c.dataset.caption);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction displayCaption(idx, size) {\n\t\tfor (let i = 0; i < caps.length; i += 1) {\n\t\t\tif (!caps[i]) continue;\n\t\t\tif ((i % size) === idx) caps[i].classList.add(CLS_DISPLAY);\n\t\t\telse caps[i].classList.remove(CLS_DISPLAY);\n\t\t}\n\t}\n\t/**\n\t *\n\t * Slide Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionSlide {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = 'translateX(' + (i ? 100 : 0) + '%)';\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\t\tthis._sls[i].style.transition = 'transform ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = (i <= idx) ? 'translateX(0%)' : 'translateX(100%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Scroll Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-29\n\t *\n\t */\n\t\n\t\n\tclass TransitionScroll {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size      = size;\n\t\t\tthis._sls       = slides;\n\t\t\tthis._time      = tranTime;\n\t\t\tthis._curIdx    = 0;\n\t\t\tthis._curIdxPsd = 0;\n\t\t\tthis._curPos    = this._calcPosition(0, 1);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\tthis._sls[i].style.transform = `translateX(${this._curPos[i] * 100}%)`;\n\t\t\t}\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tthis._curPos = this._calcPosition(this._curIdxPsd, dir);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.transition = '';\n\t\t\t\tthis._sls[i].style.transform  = 'translateX(' + 100 * this._curPos[i] + '%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(10).set();  // Wait\n\t\n\t\t\tlet d = 0;\n\t\t\tif (dir ===  1) d = idx - this._curIdx;\n\t\t\tif (dir === -1) d = this._curIdx - idx;\n\t\t\tif (d < 0) d += this._size;\n\t\n\t\t\tfor (let i = 0; i < d; i += 1) {\n\t\t\t\tconst tf = (d === 1) ? 'ease' : ((i === 0) ? 'ease-in' : ((i === d - 1) ? 'ease-out' : 'linear'));\n\t\t\t\tthis._curPos = this.shift(this._curPos, dir, this._time / d, tf);\n\t\t\t\tawait asyncTimeout(Math.floor(this._time * 1000 / d)).set();\n\t\t\t}\n\t\t\tthis._curIdx = idx;\n\t\t}\n\t\n\t\tshift(curPos, dir, time, tf = 'ease') {\n\t\t\tthis._curIdxPsd += dir;\n\t\t\tif (this._sls.length - 1 < this._curIdxPsd) this._curIdxPsd = 0;\n\t\t\tif (this._curIdxPsd < 0) this._curIdxPsd = this._sls.length - 1;\n\t\n\t\t\tconst pos = this._calcPosition(this._curIdxPsd, dir);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tconst t = (Math.abs(curPos[i] - pos[i]) === 1) ? `transform ${time}s ${tf}` : '';\n\t\t\t\tthis._sls[i].style.transition = t;\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${100 * pos[i]}%)`;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t\t_calcPosition(idxPsd, dir) {\n\t\t\tconst sizePsd = this._sls.length;\n\t\t\tconst pos = new Array(sizePsd);\n\t\t\tpos[idxPsd] = 0;\n\t\t\tconst hs = (dir !== -1) ? Math.ceil((sizePsd - 1) / 2) : Math.floor((sizePsd - 1) / 2);\n\t\t\tconst rs = sizePsd - 1 - hs;\n\t\t\tfor (let i = 1; i <= hs; i += 1) {\n\t\t\t\tlet j = idxPsd + i;\n\t\t\t\tif (sizePsd - 1 < j) j -= sizePsd;\n\t\t\t\tpos[j] = i;\n\t\t\t}\n\t\t\tfor (let i = 1; i <= rs; i += 1) {\n\t\t\t\tlet j = idxPsd - i;\n\t\t\t\tif (j < 0) j += sizePsd;\n\t\t\t\tpos[j] = -i;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Fade Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionFade {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === 0) ? 1 : 0;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.transition = 'opacity ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === idx) ? 1 : 0;\n\t\t\t\tthis._sls[i].style.pointerEvents = (i === idx) ? 'auto' : 'none';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Image Picture\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-08-25\n\t *\n\t */\n\t\n\t\n\tconst CLS_PIC    = NS + '-picture';\n\tconst CLS_DUAL   = 'dual';\n\tconst CLS_SCROLL = 'scroll';\n\t\n\tconst RANDOM_RATE = 10;\n\t\n\tclass PictureImage {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_PIC);\n\t\t\tif (sl.classList.contains(CLS_SCROLL)) p.classList.add(CLS_SCROLL);\n\t\n\t\t\tconst imgs = sl.querySelectorAll(':scope > img, :scope > a > img');\n\t\t\tif (imgs.length) {\n\t\t\t\tp.appendChild(imgs[0]);\n\t\t\t\tif (1 < imgs.length) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(imgs[1]);\n\t\t\t\t}\n\t\t\t} else if (sl.dataset.img) {\n\t\t\t\tp.appendChild(this._createImage(sl.dataset.img, sl.dataset.imgSrcset ?? null, sl.dataset.imgSizes ?? null));\n\t\t\t\tif (sl.dataset.imgSub) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(this._createImage(sl.dataset.imgSub, sl.dataset.imgSubSrcset ?? null, sl.dataset.imgSubSizes ?? null));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_createImage(src, srcset, sizes) {\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.src = src;\n\t\t\tif (srcset) img.srcset = srcset;\n\t\t\tif (sizes)  img.sizes  = sizes;\n\t\t\treturn img;\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\tif (!doRandom) return timeDur;\n\t\t\treturn dt * (1 + 0.01 * RANDOM_RATE * (1 - Math.random() * 2));\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Image Video\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-08-25\n\t *\n\t */\n\t\n\t\n\tconst CLS_VIDEO = NS + '-video';\n\t\n\tclass PictureVideo {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_VIDEO);\n\t\n\t\t\tconst vs = sl.querySelectorAll(':scope > video, :scope > a > video');\n\t\t\tif (1 === vs.length) {\n\t\t\t\tconst v = vs[0];\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\t\t} else if (sl.dataset.video) {\n\t\t\t\tconst v = document.createElement('video');\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\n\t\t\t\tconst s = document.createElement('source');\n\t\t\t\ts.setAttribute('src', sl.dataset.video);\n\t\t\t\tv.appendChild(s);\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_initializeVideo(v) {\n\t\t\tv.muted = true;\n\t\t\tv.playsinline = true;\n\t\t\tv.setAttribute('muted', true);\n\t\t\tv.setAttribute('playsinline', true);\n\t\t\tv.addEventListener('loadedmetadata', () => {\n\t\t\t\tconst ar = v.clientWidth / v.clientHeight;\n\t\t\t\tthis.ar = (0 | (ar * 1000)) / 1000;\n\t\t\t});\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.v.setAttribute('autoplay', true);\n\t\t\t\tthis.v.play();\n\t\t\t\tif (size === 1) this.v.setAttribute('loop', true);\n\t\t\t}\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (!isCur) {\n\t\t\t\tthis.v.pause();\n\t\t\t\tthis.v.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\treturn this.v.duration - timeTran;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif (!this.ar) return false;\n\t\t\tconst arFrame = this.p.clientWidth / this.p.clientHeight;\n\t\t\tif (this.ar < arFrame) {\n\t\t\t\tthis.v.classList.remove('height');\n\t\t\t\tthis.v.classList.add('width');\n\t\t\t} else {\n\t\t\t\tthis.v.classList.remove('width');\n\t\t\t\tthis.v.classList.add('height');\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\n\t}\n\t\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tinitImages();\n\tif (bgVisible) initBackgrounds(size, root, slides, timeTran);\n\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\tinitButtons(size, root, transition);\n\t\tinitThumbnails(size);\n\t\tinitIndicators(size, root);\n\t\tinitRivets(size, root, transition);\n\n\t\tconst io = new IntersectionObserver((es) => {\n\t\t\tfor (const e of es) root.classList[e.isIntersecting ? 'add' : 'remove'](CLS_VIEW);\n\t\t}, { rootMargin: `${OFFSET_VIEW}px 0px` });\n\t\tio.observe(root);\n\n\t\ttransition(0, 0);\n\t});\n\tif (hasVideo) setTimeout(tryResizeVideo, 100);\n\tfunction tryResizeVideo() {\n\t\tconst finish = onResizeVideo();\n\t\tif (!finish) setTimeout(tryResizeVideo, 100);\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction initImages() {\n\t\tif (effectType === 'scroll' && 1 < size && size < 5) {\n\t\t\tcloneSlides();\n\t\t}\n\t\tconst scroll = root.classList.contains(CLS_SCROLL);\n\t\tfor (const sl of slides) {\n\t\t\tif (scroll) sl.classList.add(CLS_SCROLL);\n\n\t\t\tsl.style.opacity = 0;  // for avoiding flickering slides on page loading\n\t\t\tcreateCaption(sl, timeTran);\n\t\t\tlet p = null;\n\t\t\tif (isVideo(sl)) {\n\t\t\t\tp = new PictureVideo(sl);\n\t\t\t\thasVideo = true;\n\t\t\t} else {\n\t\t\t\tp = new PictureImage(sl);\n\t\t\t}\n\t\t\tsl.insertBefore(p.getElement(), sl.firstChild);\n\t\t\tconst e = sl.querySelector('a') ?? sl;\n\t\t\te.insertBefore(p.getElement(), e.firstChild);\n\t\t\tpics.push(p);\n\t\t}\n\t\tif (hasVideo) onResize(onResizeVideo);\n\t\tonResize(onResizeCaption, true);\n\t\tswitch (effectType) {\n\t\t\tcase 'slide' : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t\tcase 'scroll': effect = new TransitionScroll(size, slides, timeTran); break;\n\t\t\tcase 'fade'  : effect = new TransitionFade(size, slides, timeTran); break;\n\t\t\tdefault      : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t}\n\t}\n\n\tfunction isVideo(sl) {\n\t\tif (sl.dataset.video) return true;\n\t\tconst vs = sl.querySelectorAll(':scope > video, :scope > a > video');\n\t\treturn 0 < vs.length;\n\t}\n\n\tfunction onResizeVideo() {\n\t\tlet finish = true;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst p = pics[i];\n\t\t\tif (p instanceof PictureVideo) {\n\t\t\t\tif (!p.onResize()) finish = false;\n\t\t\t}\n\t\t}\n\t\treturn finish;\n\t}\n\n\tfunction cloneSlides() {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst nsl = sl.cloneNode(true);\n\t\t\tslides.push(nsl);\n\t\t\tsl.parentNode.appendChild(nsl);\n\t\t}\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tlet curIdx = 0;\n\tlet stStep = null;\n\tlet last   = 0;\n\n\tasync function transition(idx, dir) {\n\t\t[idx, dir] = getIdxDir(idx, dir);\n\n\t\tconst t = window.performance.now();\n\t\tif (dir !== 0 && t - last < timeTran * 1000) return;\n\t\tlast = t;\n\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].transition((i % size) === idx, size);\n\t\t}\n\t\ttransitionBackgrounds(idx, size);\n\t\ttransitionThumbnails(idx);\n\t\ttransitionIndicators(idx);\n\t\ttransitionRivets(idx);\n\n\t\tawait effect.transition(idx, dir);\n\t\tif (onTransitionEnd) onTransitionEnd();\n\t\tcurIdx = idx;\n\t\tdisplay(idx);\n\t}\n\n\tasync function display(idx) {\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].display((i % size) === idx);\n\t\t}\n\t\tdisplayCaption(idx, size);\n\t\tif (size === 1) return;\n\n\t\tconst dt = pics[idx].getDuration(timeDur, timeTran, randomTiming);\n\t\tif (stStep) stStep.clear();\n\t\tstStep = asyncTimeout(Math.ceil(dt * 1000), step);\n\t\tawait stStep.set();\n\t}\n\n\tasync function step() {\n\t\tif (root.classList.contains(CLS_VIEW) && !root.classList.contains(CLS_PAUSE)) {\n\t\t\ttransition(null, 1);\n\t\t} else {\n\t\t\tasyncTimeout(timeDur * 1000, step).set();\n\t\t}\n\t}\n\n\tfunction getIdxDir(idx, dir) {\n\t\tif (idx === null) {\n\t\t\tidx = curIdx + dir;\n\t\t\tif (size - 1 < idx) idx = 0;\n\t\t\tif (idx < 0) idx = size - 1;\n\t\t} else if (dir === 0) {\n\t\t\tif (curIdx < idx) {\n\t\t\t\tdir = 1;\n\t\t\t\tif ((curIdx - (idx - size)) < (idx - curIdx)) dir = -1;\n\t\t\t}\n\t\t\tif (idx < curIdx) {\n\t\t\t\tdir = -1;\n\t\t\t\tif (((idx + size) - curIdx) < (curIdx - idx)) dir = 1;\n\t\t\t}\n\t\t}\n\t\treturn [idx, dir];\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\treturn {\n\t\tnext           : () => { transition((curIdx === size - 1) ? 0   : (curIdx + 1),  1); },\n\t\tprevious       : () => { transition((curIdx === 0) ? (size - 1) : (curIdx - 1), -1); },\n\t\tonTransitionEnd: (fn) => { onTransitionEnd = fn; }\n\t};\n\n}\n\nwindow.GIDA.slider_show_page = function (id, idx) {\n\tconst btn = document.getElementById(id + '-rivet-' + idx);\n\tif (btn) btn.click();\n}\n"]}