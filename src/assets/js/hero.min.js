"use strict";window.GIDA=window.GIDA??{},window.GIDA.sliders=window.GIDA.sliders??{},window.GIDA.slider_hero=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const e="gida-slider-hero",i=e+"-slides",n="pre-display",o="display",a="start",l="view",r="pause",c=100,d=t?document.getElementById(t):document.getElementsByClassName(e)[0];if(!d)return;const h=s.effect_type??"slide",u=s.duration_time??8,m=s.transition_time??1,_=s.random_timing??!1,f=Array.prototype.slice.call(d.querySelectorAll(`.${i} > li`)),p=f.length,g=[];let y=null,v=null,w=!1;const L=[];function z(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s&&t(),L.push(E(t))}function b(t){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):setTimeout(t,0)}function A(){window.addEventListener("resize",(()=>{for(const t of L)t()}),{passive:!0})}function E(t){let s;function e(){s=!1,t()}return()=>{s||(s=!0,requestAnimationFrame(e))}}function T(t){let s,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},i=null;return{set:()=>new Promise((n=>{s=n,i=setTimeout((async()=>{i=null,await e(),n()}),t)})),clear:()=>{i&&(clearTimeout(i),i=null,s())}}}function S(t,s,e){new IntersectionObserver((e=>{for(const i of e)t.classList[i.isIntersecting?"add":"remove"](s)}),{rootMargin:`${e}px 0px`}).observe(t),document.addEventListener("visibilitychange",(()=>{if("hidden"!==document.visibilityState){const e=t.getBoundingClientRect(),i=window.innerHeight;(0<e.top&&e.top<i||0<e.bottom&&e.bottom<i)&&t.classList.add(s)}else t.classList.remove(s)}))}class D{constructor(t,s,e){this._size=t,this._sls=s,this._time=e;for(let t=0;t<this._size;t+=1)this._sls[t].style.transform="translateX("+(t?100:0)+"%)";setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transition="transform "+this._time+"s"}),10)}async transition(t,s){for(let s=0;s<this._size;s+=1)this._sls[s].style.transform=s<=t?"translateX(0%)":"translateX(100%)";await T(1e3*this._time).set()}}class I{constructor(t,s,e){this._size=t,this._sls=s,this._time=e,this._cur=0,this._curPsd=0,this._doing=!1,this._queue=[];const i=this._calcPosition(0,1);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transform=`translateX(${100*i[t]}%)`}async transition(t,s){if(this._queue.push(((e,i)=>this._doTransition(e,i,t,s))),!this._doing){for(this._doing=!0;this._queue.length;)[this._cur,this._curPsd]=await this._queue.shift()(this._cur,this._curPsd);this._doing=!1}}async _doTransition(t,s,e,i){if(0===i&&t!==e){const s=t<e?e-t:e+this._size-t;i=(e<t?t-e:t+this._size-e)<s?-1:1}let n=this._calcPosition(s,i);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.transition="",this._sls[t].style.transform=`translateX(${100*n[t]}%)`;await T(100).set();let o=0;1===i&&(o=e-t),-1===i&&(o=t-e),o<0&&(o+=this._size);let a=s;for(let t=0;t<o;t+=1)[n,a]=this._shift(n,a,i,this._time/o,this._getTransition(o,t)),await T(Math.floor(1e3*this._time/o)).set();return[e,a]}_getTransition(t,s){if(1===t)return"ease";if(2===t){if(0===s)return"ease-in";if(1===s)return"ease-out"}return"linear"}_shift(t,s,e,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ease";const o=this._sls.length;let a=s+e;o-1<a&&(a=0),a<0&&(a=o-1);const l=this._calcPosition(a,e);for(let s=0;s<o;s+=1){const e=1===Math.abs(t[s]-l[s])?`transform ${i}s ${n}`:"";this._sls[s].style.transition=e,this._sls[s].style.transform=`translateX(${100*l[s]}%)`}return[l,a]}_calcPosition(t,s){const e=this._sls.length,i=new Array(e),n=-1!==s?Math.ceil((e-1)/2):Math.floor((e-1)/2),o=e-1-n;for(let s=1;s<=n;s+=1){let n=t+s;e-1<n&&(n-=e),i[n]=s}for(let s=1;s<=o;s+=1){let n=t-s;n<0&&(n+=e),i[n]=-s}return i[t]=0,i}}class C{constructor(t,s,e){this._size=t,this._sls=s,this._time=e;for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=0===t?1:0;setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.transition="opacity "+this._time+"s"}),10)}async transition(t,s){for(let s=0;s<this._size;s+=1)this._sls[s].style.opacity=s===t?1:0,this._sls[s].style.pointerEvents=s===t?"auto":"none";await T(1e3*this._time).set()}}const q=e+"-picture",M="dual",P="scroll",$=10;class G{constructor(t){const s=document.createElement("div");s.classList.add(q),t.classList.contains(P)&&s.classList.add(P);const e=t.querySelectorAll(":scope > img, :scope > a > img");e.length?(s.appendChild(e[0]),1<e.length&&(s.classList.add(M),s.appendChild(e[1]))):t.dataset.img&&(s.appendChild(this._createImage(t.dataset.img,t.dataset.imgSrcset??null,t.dataset.imgSizes??null)),t.dataset.imgSub&&(s.classList.add(M),s.appendChild(this._createImage(t.dataset.imgSub,t.dataset.imgSubSrcset??null,t.dataset.imgSubSizes??null)))),this.p=s}_createImage(t,s,e){const i=document.createElement("img");return i.src=t,s&&(i.srcset=s),e&&(i.sizes=e),i}getElement(){return this.p}transition(t,s){}preDisplay(t){t?this.p.classList.add(n):this.p.classList.remove(n)}display(t){t?this.p.classList.add(o):this.p.classList.remove(o)}getDuration(t,s,e){return e?dt*(1+.01*$*(1-2*Math.random())):t}}const X=e+"-video";class B{constructor(t){const s=document.createElement("div");s.classList.add(X);const e=t.querySelectorAll(":scope > video, :scope > a > video");if(1===e.length){const t=e[0];this._initializeVideo(t),this.v=s.appendChild(t)}else if(t.dataset.video){const e=document.createElement("video");this._initializeVideo(e),this.v=s.appendChild(e);const i=document.createElement("source");i.setAttribute("src",t.dataset.video),e.appendChild(i)}this.p=s}_initializeVideo(t){t.muted=!0,t.playsinline=!0,t.setAttribute("muted",!0),t.setAttribute("playsinline",!0),t.addEventListener("loadedmetadata",(()=>{const s=t.clientWidth/t.clientHeight;this.ar=(0|1e3*s)/1e3}))}getElement(){return this.p}transition(t,s){t&&(this.v.setAttribute("autoplay",!0),this.v.play(),1===s&&this.v.setAttribute("loop",!0))}preDisplay(t){}display(t){t||(this.v.pause(),this.v.currentTime=0)}getDuration(t,s,e){return this.v.duration-s}onResize(){if(!this.ar)return!1;const t=this.p.clientWidth/this.p.clientHeight;return this.ar<t?(this.v.classList.remove("height"),this.v.classList.add("width")):(this.v.classList.remove("width"),this.v.classList.add("height")),!0}}function H(){V()||setTimeout(H,100)}function x(){const t=d.classList.contains(P);for(const s of f){t&&s.classList.add(P),s.style.opacity=0;let e=null;R(s)?(e=new B(s),w=!0):e=new G(s),s.insertBefore(e.getElement(),s.firstChild),g.push(e)}switch(w&&z(V),h){case"slide":default:y=new D(p,f,m);break;case"scroll":y=new I(p,f,m);break;case"fade":y=new C(p,f,m)}}function R(t){if(t.dataset.video)return!0;return 0<t.querySelectorAll(":scope > video, :scope > a > video").length}function V(){let t=!0;for(let s=0;s<p;s+=1){const e=g[s];e instanceof B&&(e.onResize()||(t=!1))}return t}x(),w&&setTimeout(H,100),b((()=>{A(),S(d,l,c),N(0,0),console.log(`Gida Slider - Hero (#${t}): started`),setTimeout((()=>d.classList.add(a)),0)}));let k=0,O=null,W=0,F=null;async function N(t,s){[t,s]=K(t,s);const e=window.performance.now();if(0!==s&&e-W<1e3*m)return clearTimeout(F),void(F=setTimeout((()=>N(t,s)),1e3*m-(e-W)));W=e;for(let s=0;s<f.length;s+=1)g[s].preDisplay(s%p===t);for(let s=0;s<f.length;s+=1)g[s].transition(s%p===t,p);await y.transition(t,s),v&&v(),k=t,j(t)}async function j(t){for(let s=0;s<f.length;s+=1)g[s].display(s%p===t);if(1===p)return;const s=g[t].getDuration(u,m,_);O&&O.clear(),O=T(Math.ceil(1e3*s),J),await O.set()}async function J(){d.classList.contains(l)&&!d.classList.contains(r)?N(null,1):T(1e3*u,J).set()}function K(t,s){return null===t?(p-1<(t=k+s)&&(t=0),t<0&&(t=p-1)):0===s&&(k<t&&(s=1,k-(t-p)<t-k&&(s=-1)),t<k&&(s=-1,t+p-k<k-t&&(s=1))),[t,s]}const Q={move:t=>N(t,2===p?1:0),next:()=>N(k===p-1?0:k+1,1),prev:()=>N(0===k?p-1:k-1,-1),onTransitionEnd:t=>{v=t}};return window.GIDA.sliders[t]=Q,Q};
//# sourceMappingURL=hero.min.js.map