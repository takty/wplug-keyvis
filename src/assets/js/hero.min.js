"use strict";window.GIDA=window.GIDA??{},window.GIDA._rl=0,document.addEventListener("DOMContentLoaded",(()=>window.GIDA._rl=1)),window.addEventListener("load",(()=>window.GIDA._rl=2)),window.GIDA.slider_hero=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const e="gida-slider-hero",i=e+"-slides",n="display",o="view",l="pause",a=100,r=t?document.getElementById(t):document.getElementsByClassName(e)[0];if(!r)return;const c=s.effect_type??"slide",d=s.duration_time??8,h=s.transition_time??1,u=s.random_timing??!1,_=Array.prototype.slice.call(r.querySelectorAll(`.${i} > li`)),m=_.length,f=[];let p=null,g=null,y=!1;const w=[];function v(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s&&t(),w.push(L(t))}function I(){window.addEventListener("resize",(()=>{for(const t of w)t()}),{passive:!0})}function L(t){let s;function e(){s=!1,t()}return()=>{s||(s=!0,requestAnimationFrame(e))}}function A(t){let s,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},i=null;return{set:()=>new Promise((n=>{s=n,i=setTimeout((async()=>{i=null,await e(),n()}),t)})),clear:()=>{i&&(clearTimeout(i),i=null,s())}}}class z{constructor(t,s,e){this._size=t,this._sls=s,this._time=e;for(let t=0;t<this._size;t+=1)this._sls[t].style.transform="translateX("+(t?100:0)+"%)";setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transition="transform "+this._time+"s"}),10)}async transition(t,s){for(let s=0;s<this._size;s+=1)this._sls[s].style.transform=s<=t?"translateX(0%)":"translateX(100%)";await A(1e3*this._time).set()}}class P{constructor(t,s,e){this._size=t,this._sls=s,this._time=e,this._curIdx=0,this._curIdxPsd=0,this._curPos=this._calcPosition(0,1);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transform=`translateX(${100*this._curPos[t]}%)`}async transition(t,s){this._curPos=this._calcPosition(this._curIdxPsd,s);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.transition="",this._sls[t].style.transform="translateX("+100*this._curPos[t]+"%)";await A(10).set();let e=0;1===s&&(e=t-this._curIdx),-1===s&&(e=this._curIdx-t),e<0&&(e+=this._size);for(let t=0;t<e;t+=1){const i=1===e?"ease":0===t?"ease-in":t===e-1?"ease-out":"linear";this._curPos=this.shift(this._curPos,s,this._time/e,i),await A(Math.floor(1e3*this._time/e)).set()}this._curIdx=t}shift(t,s,e){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ease";this._curIdxPsd+=s,this._sls.length-1<this._curIdxPsd&&(this._curIdxPsd=0),this._curIdxPsd<0&&(this._curIdxPsd=this._sls.length-1);const n=this._calcPosition(this._curIdxPsd,s);for(let s=0;s<this._sls.length;s+=1){const o=1===Math.abs(t[s]-n[s])?`transform ${e}s ${i}`:"";this._sls[s].style.transition=o,this._sls[s].style.transform=`translateX(${100*n[s]}%)`}return n}_calcPosition(t,s){const e=this._sls.length,i=new Array(e);i[t]=0;const n=-1!==s?Math.ceil((e-1)/2):Math.floor((e-1)/2),o=e-1-n;for(let s=1;s<=n;s+=1){let n=t+s;e-1<n&&(n-=e),i[n]=s}for(let s=1;s<=o;s+=1){let n=t-s;n<0&&(n+=e),i[n]=-s}return i}}class E{constructor(t,s,e){this._size=t,this._sls=s,this._time=e;for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=0===t?1:0;setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.transition="opacity "+this._time+"s"}),10)}async transition(t,s){for(let s=0;s<this._size;s+=1)this._sls[s].style.opacity=s===t?1:0,this._sls[s].style.pointerEvents=s===t?"auto":"none";await A(1e3*this._time).set()}}const x=e+"-picture",b="dual",D="scroll",S=10;class C{constructor(t){const s=document.createElement("div");s.classList.add(x),t.classList.contains(D)&&s.classList.add(D);const e=t.querySelectorAll(":scope > img, :scope > a > img");e.length?(s.appendChild(e[0]),1<e.length&&(s.classList.add(b),s.appendChild(e[1]))):t.dataset.img&&(s.appendChild(this._createImage(t.dataset.img,t.dataset.imgSrcset??null,t.dataset.imgSizes??null)),t.dataset.imgSub&&(s.classList.add(b),s.appendChild(this._createImage(t.dataset.imgSub,t.dataset.imgSubSrcset??null,t.dataset.imgSubSizes??null)))),this.p=s}_createImage(t,s,e){const i=document.createElement("img");return i.src=t,s&&(i.srcset=s),e&&(i.sizes=e),i}getElement(){return this.p}transition(t,s){}display(t){t?this.p.classList.add(n):this.p.classList.remove(n)}getDuration(t,s,e){return e?dt*(1+.01*S*(1-2*Math.random())):t}}const G=e+"-video";class M{constructor(t){const s=document.createElement("div");s.classList.add(G);const e=t.querySelectorAll(":scope > video, :scope > a > video");if(1===e.length){const t=e[0];this._initializeVideo(t),this.v=s.appendChild(t)}else if(t.dataset.video){const e=document.createElement("video");this._initializeVideo(e),this.v=s.appendChild(e);const i=document.createElement("source");i.setAttribute("src",t.dataset.video),e.appendChild(i)}this.p=s}_initializeVideo(t){t.muted=!0,t.playsinline=!0,t.setAttribute("muted",!0),t.setAttribute("playsinline",!0),t.addEventListener("loadedmetadata",(()=>{const s=t.clientWidth/t.clientHeight;this.ar=(0|1e3*s)/1e3}))}getElement(){return this.p}transition(t,s){t&&(this.v.setAttribute("autoplay",!0),this.v.play(),1===s&&this.v.setAttribute("loop",!0))}display(t){t||(this.v.pause(),this.v.currentTime=0)}getDuration(t,s,e){return this.v.duration-s}onResize(){if(!this.ar)return!1;const t=this.p.clientWidth/this.p.clientHeight;return this.ar<t?(this.v.classList.remove("height"),this.v.classList.add("width")):(this.v.classList.remove("width"),this.v.classList.add("height")),!0}}function T(){B()||setTimeout(T,100)}function $(){I();new IntersectionObserver((t=>{for(const s of t)r.classList[s.isIntersecting?"add":"remove"](o)}),{rootMargin:`${a}px 0px`}).observe(r),k(0,0),console.log(`Gida Slider - Hero (#${t}): started`)}function X(){const t=r.classList.contains(D);for(const s of _){t&&s.classList.add(D),s.style.opacity=0;let e=null;q(s)?(e=new M(s),y=!0):e=new C(s),s.insertBefore(e.getElement(),s.firstChild),f.push(e)}switch(y&&v(B),c){default:p=new z(m,_,h);break;case"scroll":p=new P(m,_,h);break;case"fade":p=new E(m,_,h)}}function q(t){if(t.dataset.video)return!0;return 0<t.querySelectorAll(":scope > video, :scope > a > video").length}function B(){let t=!0;for(let s=0;s<m;s+=1){const e=f[s];e instanceof M&&(e.onResize()||(t=!1))}return t}X(),y&&setTimeout(T,100),2===window.GIDA._rl?setTimeout($,0):1===window.GIDA._rl?window.addEventListener("load",$):document.addEventListener("DOMContentLoaded",$);let H=0,O=null,V=0;async function k(t,s){[t,s]=F(t,s);const e=window.performance.now();if(!(0!==s&&e-V<1e3*h)){V=e;for(let s=0;s<_.length;s+=1)f[s].transition(s%m===t,m);await p.transition(t,s),g&&g(),H=t,R(t)}}async function R(t){for(let s=0;s<_.length;s+=1)f[s].display(s%m===t);if(1===m)return;const s=f[t].getDuration(d,h,u);O&&O.clear(),O=A(Math.ceil(1e3*s),W),await O.set()}async function W(){r.classList.contains(o)&&!r.classList.contains(l)?k(null,1):A(1e3*d,W).set()}function F(t,s){return null===t?(m-1<(t=H+s)&&(t=0),t<0&&(t=m-1)):0===s&&(H<t&&(s=1,H-(t-m)<t-H&&(s=-1)),t<H&&(s=-1,t+m-H<H-t&&(s=1))),[t,s]}return{next:()=>{k(H===m-1?0:H+1,1)},previous:()=>{k(0===H?m-1:H-1,-1)},onTransitionEnd:t=>{g=t}}};
//# sourceMappingURL=hero.min.js.map